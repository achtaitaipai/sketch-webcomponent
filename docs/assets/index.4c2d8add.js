var Qs=Object.defineProperty;var Ks=(c,i,n)=>i in c?Qs(c,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[i]=n;var D=(c,i,n)=>(Ks(c,typeof i!="symbol"?i+"":i,n),n);const $s=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const g of h.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function n(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerpolicy&&(h.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?h.credentials="include":l.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(l){if(l.ep)return;l.ep=!0;const h=n(l);fetch(l.href,h)}};$s();var el=Object.defineProperty,tl=(c,i,n)=>i in c?el(c,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[i]=n,se=(c,i,n)=>(tl(c,typeof i!="symbol"?i+"":i,n),n);function il(c,i,n){c/=255,i/=255,n/=255;const a={h:0,s:0,b:0};var l=0,h=0;if(c>=i&&c>=n?(h=c,l=i>n?n:i):i>=n&&i>=c?(h=i,l=c>n?n:c):(h=n,l=i>c?c:i),a.b=h,a.s=h?(h-l)/h:0,!a.s)a.h=0;else{const g=h-l;c==h?a.h=(i-n)/g:i==h?a.h=2+(n-c)/g:a.h=4+(c-i)/g,a.h=Math.floor(a.h*60),a.h<0&&(a.h+=360)}return a.s=Math.floor(a.s*100),a.b=Math.floor(a.b*100),a}function Ft(c,i,n){let a=0,l=0,h=0;if(i==0)n==0?a=l=h=0:a=l=h=Math.floor(n*255/100);else{c==360&&(c=0),c/=60,i=i/100,n=n/100;var g=Math.floor(c),v=c-g,_=n*(1-i),w=n*(1-i*v),k=n*(1-i*(1-v));switch(g){case 0:a=n,l=k,h=_;break;case 1:a=w,l=n,h=_;break;case 2:a=_,l=n,h=k;break;case 3:a=_,l=w,h=n;break;case 4:a=k,l=_,h=n;break;case 5:a=n,l=_,h=w;break}a=Math.floor(a*255),l=Math.floor(l*255),h=Math.floor(h*255)}return nl(a,l,h)}function nl(c,i,n){return"#"+[c,i,n].map(a=>("0"+a.toString(16)).slice(-2)).join("")}function rl(c){const i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c);return i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:null}function ol(c){const i=rl(c);return i?il(i[0],i[1],i[2]):null}function Yo(c){return/(^#[0-9A-F]{6}$)/i.test(c)}class al{constructor(i,n,a){se(this,"elements"),se(this,"confirmBtn"),se(this,"cancelBtn"),this._colorPicker=i,this.elements=document.createElement("div"),this.elements.classList.add("btns"),this.confirmBtn=document.createElement("button"),this.confirmBtn.classList.add("btns_ok"),this.confirmBtn.textContent=n,this.elements.appendChild(this.confirmBtn),this.cancelBtn=document.createElement("button"),this.cancelBtn.classList.add("btns_cancel"),this.cancelBtn.textContent=a,this.elements.appendChild(this.cancelBtn),this.cancelBtn.addEventListener("click",()=>this._cancel()),this.cancelBtn.addEventListener("keydown",l=>this._keyDown(l)),this.confirmBtn.addEventListener("click",()=>this._confirm())}_cancel(){this._colorPicker.exit()}_confirm(){this._colorPicker.close();const i=Ft(this._colorPicker.hue,this._colorPicker.saturation,this._colorPicker.brightness);this._colorPicker.dispatchEvent(new CustomEvent("color-change",{detail:i}))}_keyDown(i){var n,a;i.code==="Tab"&&!i.shiftKey&&((a=(n=this._colorPicker.shadowRoot)==null?void 0:n.querySelector(".picker"))==null||a.focus(),i.preventDefault())}}function sl(){const c=document.createElement("style");return c.textContent=`
            :host {
				display:flex;
				flex-direction: column;
				align-items: center;
                position: relative;
                padding:.5rem;
                gap:.7rem;
                background-color:var(--bg,#3f3e3e);
                border-radius:0.3125rem;
                display:none;
                z-index:10;
            }
            .picker{
                width:100%;
                height:auto;
                padding-top:100%;
                position:relative;
                cursor:pointer;
            }
            .picker::after{
                content:"";
                position:absolute;
                inset:0;
                background-image: linear-gradient(to right, #fff, rgba(204, 154, 129, 0));
            }
            .picker::before{
                content:"";
                position:absolute;
                inset:0;
                z-index:1;
                background-image: linear-gradient(to top, #000, rgba(204, 154, 129, 0));
            }
            .picker_cursor{
                position:absolute;
                width:.6rem;
                height:.6rem;
                border-radius:50%;
                border:2px solid #fff;
                mix-blend-mode:difference;
                left:100%;
                transform:translate(-50%,-50%);
                z-index:2;
            }
            .range-wrapper{
                display:flex;
                align-items:center;
                justify-content:space-between;
                width:100%;
                gap:.5rem;
            }
            .hueRange{
				-webkit-appearance :none;
                width:100%;
                height:.8rem;
                outline: 0;
                border-radius:0.5rem;
                box-sizing:border-box;
                background: linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%);
                cursor:pointer;
				padding:0;
            }
            .hueRange:focus{
                outline:1px solid;
            }
            .preview{
                width:1.5rem;
                height:1.2rem;
                outline:1px solid white;
            }
            input[type=range]::-webkit-slider-thumb {
                -webkit-appearance: none;
                border: 2px solid #ffff;
                height: 1rem;
                width: .35rem;
                background: transparent;
                cursor: pointer;
              }
              
              input[type=range]::-moz-range-thumb {
                -webkit-appearance: none;
                border: 2px solid #ffff;
                height: 1rem;
                width: .35rem;
                background: transparent;
                cursor: pointer;
              }
			  .pallet{
				  width:100%;
                display:grid;
                grid-template-columns:repeat(8,1fr);
                align-content:center;
				gap:.2rem;
            }
            .colorBtn{
                display: none;
            }
            .colorLabel{
                cursor:pointer;
                border-radius:0.125rem;
				width:100%;
                padding-top:100%;
            }
            .colorLabel:hover,.colorLabel:focus{
                transform:scale(1.1);
            }
            .colorBtn:checked + .colorLabel{
                outline:1px solid white;
                outline-offset: 1px;
            }
            .hexInput{
                grid-row:2;
                grid-column:2 / -1;
                display:block;
                width:100%;
                margin:0;
                box-sizing:border-box;
                background-color:var(--bg-input,#282828);
                color:var(--font-color,white);
                font-size:.8em;
                border:0;
                padding:.4rem;
            }
            .hexInput.error{
                background-color: var(--bg-error,#7b0000);
            }
            .btns{
                display:flex;
                width:100%;
                gap:.3125rem;
            }
            .btns_ok,.btns_cancel{
                width:100%;
                cursor:pointer;
                background-color:var(--bg-input,#282828);
                color:var(--font-color,white);
                border:0;
                padding:0.2rem;
            }
        `,c}class ll{constructor(i,n){se(this,"element"),this._colorPicker=i,this._onChange=n,this.element=document.createElement("input"),this.element.classList.add("hexInput"),this.element.setAttribute("type","text"),this.element.setAttribute("maxlength","7"),this.update(),this.element.addEventListener("input",a=>this._onInput(a))}update(){const i=Ft(this._colorPicker.hue,this._colorPicker.saturation,this._colorPicker.brightness);this.element.value=i}_onInput(i){const n=i.target;/^#([A-Fa-f0-9]{6})$/.test(n.value)?(this.element.classList.remove("error"),this._onChange(n.value)):this.element.classList.add("error")}}class cl{constructor(i,n){se(this,"element"),this._colorPicker=i,this._onChange=n,this.element=document.createElement("input"),this.element.classList.add("hueRange"),this.element.setAttribute("type","range"),this.element.setAttribute("min","0"),this.element.setAttribute("max","360"),this.element.setAttribute("value","0"),this.element.addEventListener("input",a=>this._hueRangeChange())}_hueRangeChange(){this._onChange(this.value)}update(){this.value=this._colorPicker.hue}get value(){return parseInt(this.element.value)}set value(i){this.element.value=i.toString()}}class Uo{constructor(i,n,a){se(this,"element"),se(this,"selected"),this._colorPicker=i,this._onChange=a,this.element=document.createElement("div"),this.element.classList.add("pallet"),this._init(n),this.selected=this.element.querySelector('input[type="radio"]')}_init(i){const n=this.element.querySelector("input:checked");this.element.innerHTML="",i.forEach((l,h)=>{const g=document.createElement("input");g.setAttribute("type","radio"),g.setAttribute("name","color"),g.setAttribute("value",l),g.id=`clrBtn-${h}`,g.classList.add("colorBtn");const v=document.createElement("label");v.setAttribute("for",`clrBtn-${h}`),v.classList.add("colorLabel"),v.style.backgroundColor=l,v.setAttribute("tabindex","0"),v.addEventListener("keydown",_=>{_.code==="Space"&&v.click()}),g.addEventListener("click",_=>this._clrBtnClick(_)),this.element.appendChild(g),this.element.appendChild(v)});const a=n?this.element.querySelector(`#${n.id}`):null;a?(this.selected=a,this.selected&&(this.selected.checked=!0)):(this.selected=n||this.element.querySelector('input[type="radio"]'),this.selected.checked=!0),this._onChange(this.selected.value)}_clrBtnClick(i){const n=i.target;this.selected=n,this._onChange(n.value)}setColors(i){this._init(i)}update(){const i=Ft(this._colorPicker.hue,this._colorPicker.saturation,this._colorPicker.brightness),n=this.element.querySelector(`label[for="${this.selected.id}"]`);this.selected.value=i,n&&n.style.setProperty("background-color",i)}get clrs(){const i=[];return this.element.querySelectorAll(".colorBtn").forEach(a=>{i.push(a.value)}),i!=null?i:[]}set clrs(i){this.element.innerHTML="",this._init(i)}}class ul{constructor(i,n){se(this,"element"),se(this,"cursor"),this._colorPicker=i,this._onChange=n,this.element=document.createElement("div"),this.element.classList.add("picker"),this.element.addEventListener("click",a=>this._onClick(a)),this.element.addEventListener("mousemove",a=>this._onMove(a)),this.element.setAttribute("tabindex","0"),this.cursor=document.createElement("span"),this.cursor.classList.add("picker_cursor"),this.element.appendChild(this.cursor),this.element.addEventListener("keydown",a=>this._pickerKeyDown(a))}_onClick(i){const{left:n,top:a,width:l,height:h}=this.element.getBoundingClientRect(),g=i.clientX-n,v=i.clientY-a;this.cursor.style.setProperty("left",`${g}px`),this.cursor.style.setProperty("top",`${v}px`),this._colorPicker.brightness=Math.min(100,Math.max(0,100-v/h*100)),this._colorPicker.saturation=Math.min(100,Math.max(0,g/l*100)),this._onChange()}_onMove(i){if(i.buttons===1){i.preventDefault();const{left:n,top:a,width:l,height:h}=this.element.getBoundingClientRect(),g=Math.min(l,Math.max(0,i.clientX-n)),v=Math.min(h,Math.max(0,i.clientY-a));this.cursor.style.setProperty("left",`${g}px`),this.cursor.style.setProperty("top",`${v}px`),this._colorPicker.brightness=Math.min(100,Math.max(0,100-v/h*100)),this._colorPicker.saturation=Math.min(100,Math.max(0,g/l*100)),this._onChange()}}_pickerKeyDown(i){var n,a;switch(i.key){case"ArrowUp":this._colorPicker.brightness=Math.min(100,this._colorPicker.brightness+10),this._onChange();break;case"ArrowDown":this._colorPicker.brightness=Math.max(0,this._colorPicker.brightness-10),this._onChange();break;case"ArrowLeft":this._colorPicker.saturation=Math.max(0,this._colorPicker.saturation-10),this._onChange();break;case"ArrowRight":this._colorPicker.saturation=Math.min(100,this._colorPicker.saturation+10),this._onChange();break;case"Tab":i.shiftKey&&((a=(n=this._colorPicker.shadowRoot)==null?void 0:n.querySelector(".btns_cancel"))==null||a.focus(),i.preventDefault());break}this.update()}update(){this.element.style.setProperty("background-color",Ft(this._colorPicker.hue,100,100));const{width:i,height:n}=this.element.getBoundingClientRect(),a=this._colorPicker.saturation/100*i,l=(1-this._colorPicker.brightness/100)*n;this.cursor.style.setProperty("left",`${a}px`),this.cursor.style.setProperty("top",`${l}px`)}}class dl{constructor(i){se(this,"element"),this._colorPicker=i,this.element=document.createElement("div"),this.element.classList.add("preview")}update(){const i=Ft(this._colorPicker.hue,this._colorPicker.saturation,this._colorPicker.brightness);this.element.style.backgroundColor=i}}class hl extends HTMLElement{constructor(){var i;super(),se(this,"_picker"),se(this,"_hueRange"),se(this,"_hexInput"),se(this,"_preview"),se(this,"_rangeWrapper"),se(this,"_btns"),se(this,"_pallet",null),se(this,"_selectedClr",null),se(this,"_palletClr",null),se(this,"_savedPalletClr",null),se(this,"_savedSelected",null),se(this,"_value"),se(this,"_savedValue",null),se(this,"hue",0),se(this,"saturation",0),se(this,"brightness",0),se(this,"_backdrop"),se(this,"_openBtn",null);const n=this.attachShadow({mode:"open"});this._definePalletClr(),this._picker=new ul(this,this._onPickerChange.bind(this)),this._hueRange=new cl(this,this._onHueRangeChange.bind(this)),this._preview=new dl(this),this._rangeWrapper=document.createElement("div"),this._rangeWrapper.classList.add("range-wrapper"),this._rangeWrapper.appendChild(this._hueRange.element),this._palletClr&&(this._pallet=new Uo(this,this._palletClr,this._onPalletChange.bind(this))),this._hexInput=new ll(this,this._onHexInputChange.bind(this)),this._btns=new al(this,this.getAttribute("confirm-label")||"Ok",this.getAttribute("cancel-label")||"Cancel"),n.appendChild(this._picker.element),n.appendChild(this._rangeWrapper),this._pallet?(n.appendChild(this._pallet.element),this._palletClr&&(this.updateHSB(this._palletClr[0]),this._selectedClr=this._pallet.element.querySelector(`input[value="${this._palletClr[0]}"]`))):(this._rangeWrapper.insertBefore(this._preview.element,this._hueRange.element),this._preview.update()),this._value=((i=this._selectedClr)==null?void 0:i.value)||"#000000",n.appendChild(this._hexInput.element),n.appendChild(this._btns.elements),this._picker.update(),this.setAttribute("aria-label","Color Picker"),this.setAttribute("role","dialog"),this.setAttribute("tabindex","0"),n.appendChild(sl()),this._backdrop=this._createBackdrop()}static get observedAttributes(){return["confirm-label","cancel-label","pallet"]}attributeChangedCallback(i,n,a){i==="pallet"?(this._definePalletClr(),this._resetPallet()):i==="confirm-label"?this._btns.confirmBtn.textContent=a:i==="cancel-label"&&(this._btns.cancelBtn.textContent=a)}_resetPallet(){var i,n;const a=this._rangeWrapper.querySelector(".preview");a&&this._rangeWrapper.removeChild(a),this._palletClr?(this._pallet||(this._pallet=new Uo(this,this._palletClr,this._onPalletChange),(i=this.shadowRoot)==null||i.insertBefore(this._pallet.element,this._hexInput.element),this._selectedClr=this._pallet.element.querySelector(`input[value="${this._palletClr[0]}"]`),this._selectedClr&&(this._selectedClr.checked=!0)),(n=this._pallet)==null||n.setColors(this._palletClr)):(this._rangeWrapper.insertBefore(this._preview.element,this._hueRange.element),this._preview.update())}get value(){return this._value}set value(i){var n;if(!Yo(i))throw new Error("Invalid hex color");if(this._value=Ft(this.hue,this.saturation,this.brightness),this._savedValue=this._value,this._hexInput.update(),this._preview.update(),this._picker.update(),this._hueRange.update(),this.updateHSB(i),this._pallet){(n=this._pallet)==null||n.update();const a=Array.from(this._pallet.element.querySelectorAll('input[type="radio"]'));this._palletClr=a.map(l=>l.value),this._savedPalletClr=[...this._palletClr]}}open(){var i,n;this._openBtn=document.activeElement,this.style.display="flex",this.setAttribute("aria-hidden","false"),this._picker.element.focus(),this.addEventListener("keydown",a=>this._keyDown(a)),this._picker.update(),this._hexInput.update(),this._resetPallet(),this._palletClr&&(this._savedPalletClr=[...this._palletClr]),this._savedValue=this.value,this._savedSelected=((n=(i=this._pallet)==null?void 0:i.element.querySelector("input:checked"))==null?void 0:n.id)||null,document.body.appendChild(this._backdrop)}_createBackdrop(){const i=document.createElement("div");return i.classList.add("backdrop"),i.addEventListener("click",()=>this.exit()),i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.zIndex="1",i.style.backgroundColor="rgba(0,0,0,0.5)",i.id="clrpckr-backdrop",i}close(){var i;this.style.display="none",this.setAttribute("aria-hidden","true"),this.removeEventListener("keydown",a=>this._keyDown(a)),this._pallet&&(this._palletClr=this._pallet.clrs),this._value=Ft(this.hue,this.saturation,this.brightness);const n=document.getElementById("clrpckr-backdrop");n&&n.remove(),(i=this._openBtn)==null||i.focus()}exit(){var i;this.close(),this._savedPalletClr&&(this._palletClr=[...this._savedPalletClr]),this._savedValue&&(this.value=this._savedValue);const n=(i=this._pallet)==null?void 0:i.element.querySelector(`#${this._savedSelected}`);n&&(n.checked=!0)}_definePalletClr(){const i=this.getAttribute("pallet");let n=[];i&&JSON.parse(i).forEach(l=>{typeof l=="string"&&Yo(l)&&n.push(l)}),this._palletClr=n.length>0?n:null}_keyDown(i){i.code==="Escape"?this.exit():i.code==="Enter"&&this.close()}updateHSB(i){const n=ol(i);n&&(this.hue=n.h,this.saturation=n.s,this.brightness=n.b)}_onPalletChange(i){var n,a,l,h;this.updateHSB(i),(n=this._picker)==null||n.update(),(a=this._hueRange)==null||a.update(),(l=this._hexInput)==null||l.update(),(h=this._preview)==null||h.update()}_onHexInputChange(i){var n,a,l,h;this.updateHSB(i),(n=this._picker)==null||n.update(),(a=this._hueRange)==null||a.update(),(l=this._pallet)==null||l.update(),(h=this._preview)==null||h.update()}_onHueRangeChange(i){var n,a,l,h;this.hue=i,(n=this._picker)==null||n.update(),(a=this._pallet)==null||a.update(),(l=this._hexInput)==null||l.update(),(h=this._preview)==null||h.update()}_onPickerChange(){var i;(i=this._pallet)==null||i.update(),this._hexInput.update(),this._preview.update()}get pallet(){var i;return((i=this._pallet)==null?void 0:i.clrs)||[]}set pallet(i){this._palletClr=i,this._value=this._palletClr[0]}}customElements.define("color-picker",hl);class fl{constructor(i,n){D(this,"_zoomValue",1);D(this,"_translate",{x:0,y:0});this._frame=i,this._canvas=n,document.addEventListener("fullscreenchange",a=>{this.fitSketch()})}get zoomValue(){return this._zoomValue}set zoomValue(i){this._zoomValue=i,this._canvas.style.width=this._canvas.width*this._zoomValue+"px";const n=this._frame.getBoundingClientRect();this.translate={x:-(n.width-this._canvas.width*this._zoomValue)/2,y:-(n.height-this._canvas.height*this._zoomValue)/2}}get translate(){return this._translate}set translate(i){this._translate=i,this._canvas.style.setProperty("transform",`translate(${-this._translate.x}px,${-this._translate.y}px)`)}fitSketch(){const{width:i,height:n}=this._frame.getBoundingClientRect(),a=this._canvas.width/this._canvas.height,l=i/n;this.zoomValue=a<l?n/this._canvas.height:i/this._canvas.width}zoom(i,n,a){let l=this._zoomValue>1?this._zoomValue+1:this._zoomValue*2;if(n&&n<0&&(l=this._zoomValue>1?this._zoomValue-1:this._zoomValue*.999999),a&&(l=a>1?this._zoomValue+.25:this._zoomValue-.25),l=Math.max(1,Math.min(50,l)),i){i.x=Math.min(Math.max(i.x,0),this._canvas.width),i.y=Math.min(Math.max(i.y,0),this._canvas.width);const h=i.x*l-i.x*this._zoomValue+this._translate.x,g=i.y*l-i.y*this._zoomValue+this._translate.y;this._translate={x:h,y:g}}this._zoomValue=l,this._canvas.style.width=this._canvas.width*this._zoomValue+"px",this._canvas.style.setProperty("transform",`translate(${-this._translate.x}px,${-this._translate.y}px)`)}drag(i,n){const a=n.x-i.x,l=n.y-i.y;this.translate={x:this.translate.x-a,y:this.translate.y-l}}}class na{constructor(){D(this,"rgba",[0,0,0,255])}get hex(){return"#"+this.rgba.map(i=>("00"+i.toString(16)).slice(-2)).join("")}}class pl extends na{constructor(i){var a;super();const n=((a=i.replace("#","").match(/(..?)/g))==null?void 0:a.map(l=>parseInt(l,16)))||[];this.rgba=this.rgba.map((l,h)=>n[h]||l)}}class vl extends na{constructor(i){super(),this.rgba=i}}function rr(c){return typeof c=="string"?new pl(c):new vl(c)}class ra{constructor(i,n,a){D(this,"canvas");D(this,"actif",!0);D(this,"_ctx");this.canvas=document.createElement("canvas"),this._ctx=this.canvas.getContext("2d"),i&&(this.canvas.width=i),n&&(this.canvas.height=n),a&&this._ctx.drawImage(a,0,0)}set width(i){this.canvas.width=i}get width(){return this.canvas.width}set height(i){this.canvas.height=i}get height(){return this.canvas.height}getImgData(i=0,n=0,a=this.width,l=this.height){return new ImageData(new Uint8ClampedArray(this._ctx.getImageData(i,n,a,l).data),a,l)}get imgData(){return this._ctx.getImageData(0,0,this.width,this.height)}putDatas(i,n,a){this.clear(),this._ctx.putImageData(i,n,a)}crop(i,n,a,l){const h=this._ctx.getImageData(i,n,a,l);this.width=a,this.height=l,this._ctx.putImageData(h,0,0)}resize(i,n,a=-1,l=-1){let h=0,g=0;a===0?h=(i-this.width)/2:a===1&&(h=i-this.width),l===0?g=(n-this.height)/2:l===1&&(g=n-this.height);const v=this._ctx.getImageData(0,0,this.width,this.height);this.width=i,this.height=n,this._ctx.putImageData(v,h,g)}paint(i,n,a){this._ctx.fillStyle=a||"#000000";const l=n>1?i.x-n/2:i.x,h=n>1?i.y-n/2:i.y;this._ctx.fillRect(Math.floor(l),Math.floor(h),n,n)}erase(i,n){const a=n>1?i.x-n/2:i.x,l=n>1?i.y-n/2:i.y;this._ctx.clearRect(Math.floor(a),Math.floor(l),n,n)}_getColor(i){const[n,a,l,h]=this._ctx.getImageData(i.x,i.y,1,1).data;return[n,a,l,h].join("-")}_getHexColor(i){const[n,a,l,h]=this._ctx.getImageData(i.x,i.y,1,1).data;return h===0?null:"#"+((1<<24)+(n<<16)+(a<<8)+l).toString(16).slice(1)}_hexToRgba(i){var a;const n=((a=i.replace("#","").match(/(..?)/g))==null?void 0:a.map(l=>parseInt(l,16)))||[];for(let l=n.length;l<4;l++)n.push(l===3?255:0);return n}}class gi extends ra{clear(){this._ctx.clearRect(0,0,this.width,this.height)}bucket(i,n){const a=i.y*this.width+i.x,l=this.getImgData().data,h=rr([...l.slice(4*a,4*a+4)]);if(rr(n).hex===h.hex)return;const v=new Set([a]),_=v.values();let w=_.next();for(;!w.done;){if(rr([...l.slice(4*w.value,4*w.value+4)]).hex===h.hex){const S=w.value%this.width,C=Math.floor(w.value/this.width);S>0&&v.add(w.value-1),S<this.width-1&&v.add(w.value+1),C>0&&v.add(w.value-this.width),C<this.height-1&&v.add(w.value+this.width),this.paint({x:S,y:C},1,n)}w=_.next()}}line(i,n,a,l){const h=Math.floor(i.x),g=Math.floor(i.y),v=Math.floor(n.x),_=Math.floor(n.y);if(h===v&&g===_){this.paint(i,a,l);return}const w=Math.abs(v-h),k=Math.abs(_-g),S=Math.sign(v-h),C=Math.sign(_-g);if(k===0)for(let M=h;M!==v+S;M+=S)this.paint({x:M,y:g},a,l);else if(w===0)for(let M=g;M!==_+C;M+=C)this.paint({x:h,y:M},a,l);else if(w>=k){const M=2*k,B=-2*w;let F=-w,I=g;for(let O=h;O!==v+S;O+=S)this.paint({x:O,y:I},a,l),F+=M,F>=0&&(I+=C,F+=B)}else{const M=2*w,B=-2*k;let F=-k,I=h;for(let O=g;O!==_+C;O+=C)this.paint({x:I,y:O},a,l),F+=M,F>=0&&(I+=S,F+=B)}}fillRect(i,n,a,l){this._ctx.fillStyle=l,this._ctx.fillRect(i.x,i.y,n,a)}rect(i,n,a,l,h){this.line({x:i.x,y:i.y},{x:i.x+n,y:i.y},l,h),this.line({x:i.x+n,y:i.y},{x:i.x+n,y:i.y+a},l,h),this.line({x:i.x,y:i.y+a},{x:i.x+n,y:i.y+a},l,h),this.line({x:i.x,y:i.y},{x:i.x,y:i.y+a},l,h)}ellipse(i,n,a,l,h){this._ctx.fillStyle=h;const g=Math.floor(n/2),v=Math.floor(a/2);let _=0,w=v,k=v*v-g*g*v+.25*g*g,S=2*v*v*_,C=2*g*g*w;for(;S<C;)this._ctx.fillRect(_+i.x,w+i.y,l,l),this._ctx.fillRect(-_+i.x,w+i.y,l,l),this._ctx.fillRect(_+i.x,-w+i.y,l,l),this._ctx.fillRect(-_+i.x,-w+i.y,l,l),k<0?(_++,S=S+2*v*v,k=k+S+v*v):(_++,w--,S=S+2*v*v,C=C-2*g*g,k=k+S-C+v*v);let M=v*v*((_+.5)*(_+.5))+g*g*((w-1)*(w-1))-g*g*v*v;for(;w>=0;)this._ctx.fillRect(_+i.x,w+i.y,l,l),this._ctx.fillRect(-_+i.x,w+i.y,l,l),this._ctx.fillRect(_+i.x,-w+i.y,l,l),this._ctx.fillRect(-_+i.x,-w+i.y,l,l),M>0?(w--,C=C-2*g*g,M=M+g*g-C):(w--,_++,S=S+2*v*v,C=C-2*g*g,M=M+S-C+g*g)}drawImg(i){this._ctx.drawImage(i,0,0)}}class gl extends ra{constructor(n,a){super(n,a);D(this,"_colors",["#909090","#C0C0C0"]);D(this,"_size",4);this.clear()}clear(){for(let n=0;n<=Math.ceil(this.height/this._size);n++)for(let a=0;a<=Math.ceil(this.width/this._size);a++){const l=(a+n)%2;this.paint({x:a*this._size,y:n*this._size},this._size,this._colors[l])}}}class yt{constructor(){D(this,"_observers",[]);D(this,"_newId",function*(){let i=0;for(;;)yield i,i++}())}subscribe(i){const n=this._newId.next().value;return this._observers.push({id:n,callback:i}),n}unsubscribe(i){this._observers=this._observers.filter(n=>n.id!==i)}notify(i){this._observers.forEach(n=>n.callback(i))}}function ml(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}function sn(c){throw new Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oa={exports:{}};(function(c,i){(function(n){c.exports=n()})(function(){var n={};Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default=function(e){return!(!e||!e.Window)&&e instanceof e.Window};var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.init=g,a.getWindow=function(e){return(0,n.default)(e)?e:(e.ownerDocument||e).defaultView||h.window},a.window=a.realWindow=void 0;var l=void 0;a.realWindow=l;var h=void 0;function g(e){a.realWindow=l=e;var t=e.document.createTextNode("");t.ownerDocument!==e.document&&typeof e.wrap=="function"&&e.wrap(t)===t&&(e=e.wrap(e)),a.window=h=e}a.window=h,typeof window!="undefined"&&window&&g(window);var v={};function _(e){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var w=function(e){return!!e&&_(e)==="object"},k=function(e){return typeof e=="function"},S={window:function(e){return e===a.window||(0,n.default)(e)},docFrag:function(e){return w(e)&&e.nodeType===11},object:w,func:k,number:function(e){return typeof e=="number"},bool:function(e){return typeof e=="boolean"},string:function(e){return typeof e=="string"},element:function(e){if(!e||_(e)!=="object")return!1;var t=a.getWindow(e)||a.window;return/object|function/.test(_(t.Element))?e instanceof t.Element:e.nodeType===1&&typeof e.nodeName=="string"},plainObject:function(e){return w(e)&&!!e.constructor&&/function Object\b/.test(e.constructor.toString())},array:function(e){return w(e)&&e.length!==void 0&&k(e.splice)}};v.default=S;var C={};function M(e){var t=e.interaction;if(t.prepared.name==="drag"){var r=t.prepared.axis;r==="x"?(t.coords.cur.page.y=t.coords.start.page.y,t.coords.cur.client.y=t.coords.start.client.y,t.coords.velocity.client.y=0,t.coords.velocity.page.y=0):r==="y"&&(t.coords.cur.page.x=t.coords.start.page.x,t.coords.cur.client.x=t.coords.start.client.x,t.coords.velocity.client.x=0,t.coords.velocity.page.x=0)}}function B(e){var t=e.iEvent,r=e.interaction;if(r.prepared.name==="drag"){var o=r.prepared.axis;if(o==="x"||o==="y"){var s=o==="x"?"y":"x";t.page[s]=r.coords.start.page[s],t.client[s]=r.coords.start.client[s],t.delta[s]=0}}}Object.defineProperty(C,"__esModule",{value:!0}),C.default=void 0;var F={id:"actions/drag",install:function(e){var t=e.actions,r=e.Interactable,o=e.defaults;r.prototype.draggable=F.draggable,t.map.drag=F,t.methodDict.drag="draggable",o.actions.drag=F.defaults},listeners:{"interactions:before-action-move":M,"interactions:action-resume":M,"interactions:action-move":B,"auto-start:check":function(e){var t=e.interaction,r=e.interactable,o=e.buttons,s=r.options.drag;if(s&&s.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||(o&r.options.drag.mouseButtons)!=0))return e.action={name:"drag",axis:s.lockAxis==="start"?s.startAxis:s.lockAxis},!1}},draggable:function(e){return v.default.object(e)?(this.options.drag.enabled=e.enabled!==!1,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):v.default.bool(e)?(this.options.drag.enabled=e,this):this.options.drag},beforeMove:M,move:B,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},I=F;C.default=I;var O={};Object.defineProperty(O,"__esModule",{value:!0}),O.default=void 0;var L={init:function(e){var t=e;L.document=t.document,L.DocumentFragment=t.DocumentFragment||Y,L.SVGElement=t.SVGElement||Y,L.SVGSVGElement=t.SVGSVGElement||Y,L.SVGElementInstance=t.SVGElementInstance||Y,L.Element=t.Element||Y,L.HTMLElement=t.HTMLElement||L.Element,L.Event=t.Event,L.Touch=t.Touch||Y,L.PointerEvent=t.PointerEvent||t.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function Y(){}var ne=L;O.default=ne;var J={};Object.defineProperty(J,"__esModule",{value:!0}),J.default=void 0;var ee={init:function(e){var t=O.default.Element,r=e.navigator||{};ee.supportsTouch="ontouchstart"in e||v.default.func(e.DocumentTouch)&&O.default.document instanceof e.DocumentTouch,ee.supportsPointerEvent=r.pointerEnabled!==!1&&!!O.default.PointerEvent,ee.isIOS=/iP(hone|od|ad)/.test(r.platform),ee.isIOS7=/iP(hone|od|ad)/.test(r.platform)&&/OS 7[^\d]/.test(r.appVersion),ee.isIe9=/MSIE 9/.test(r.userAgent),ee.isOperaMobile=r.appName==="Opera"&&ee.supportsTouch&&/Presto/.test(r.userAgent),ee.prefixedMatchesSelector="matches"in t.prototype?"matches":"webkitMatchesSelector"in t.prototype?"webkitMatchesSelector":"mozMatchesSelector"in t.prototype?"mozMatchesSelector":"oMatchesSelector"in t.prototype?"oMatchesSelector":"msMatchesSelector",ee.pEventTypes=ee.supportsPointerEvent?O.default.PointerEvent===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,ee.wheelEvent=O.default.document&&"onmousewheel"in O.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},ye=ee;J.default=ye;var G={};function ue(e){var t=e.parentNode;if(v.default.docFrag(t)){for(;(t=t.host)&&v.default.docFrag(t););return t}return t}function Pe(e,t){return a.window!==a.realWindow&&(t=t.replace(/\/deep\//g," ")),e[J.default.prefixedMatchesSelector](t)}Object.defineProperty(G,"__esModule",{value:!0}),G.nodeContains=function(e,t){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1},G.closest=function(e,t){for(;v.default.element(e);){if(Pe(e,t))return e;e=ue(e)}return null},G.parentNode=ue,G.matchesSelector=Pe,G.indexOfDeepestElement=function(e){for(var t,r=[],o=0;o<e.length;o++){var s=e[o],u=e[t];if(s&&o!==t)if(u){var f=ge(s),d=ge(u);if(f!==s.ownerDocument)if(d!==s.ownerDocument)if(f!==d){r=r.length?r:je(u);var p=void 0;if(u instanceof O.default.HTMLElement&&s instanceof O.default.SVGElement&&!(s instanceof O.default.SVGSVGElement)){if(s===d)continue;p=s.ownerSVGElement}else p=s;for(var m=je(p,u.ownerDocument),y=0;m[y]&&m[y]===r[y];)y++;var b=[m[y-1],m[y],r[y]];if(b[0])for(var E=b[0].lastChild;E;){if(E===b[1]){t=o,r=m;break}if(E===b[2])break;E=E.previousSibling}}else P=s,x=u,(parseInt(a.getWindow(P).getComputedStyle(P).zIndex,10)||0)>=(parseInt(a.getWindow(x).getComputedStyle(x).zIndex,10)||0)&&(t=o);else t=o}else t=o}var P,x;return t},G.matchesUpTo=function(e,t,r){for(;v.default.element(e);){if(Pe(e,t))return!0;if((e=ue(e))===r)return Pe(e,t)}return!1},G.getActualElement=function(e){return e.correspondingUseElement||e},G.getScrollXY=ke,G.getElementClientRect=Ie,G.getElementRect=function(e){var t=Ie(e);if(!J.default.isIOS7&&t){var r=ke(a.getWindow(e));t.left+=r.x,t.right+=r.x,t.top+=r.y,t.bottom+=r.y}return t},G.getPath=function(e){for(var t=[];e;)t.push(e),e=ue(e);return t},G.trySelector=function(e){return!!v.default.string(e)&&(O.default.document.querySelector(e),!0)};var ge=function(e){return e.parentNode||e.host};function je(e,t){for(var r,o=[],s=e;(r=ge(s))&&s!==t&&r!==s.ownerDocument;)o.unshift(s),s=r;return o}function ke(e){return{x:(e=e||a.window).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}function Ie(e){var t=e instanceof O.default.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.default=function(e,t){for(var r in t)e[r]=t[r];return e};var K={};function dt(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function ht(e,t,r){return e==="parent"?(0,G.parentNode)(r):e==="self"?t.getRect(r):(0,G.closest)(r,e)}Object.defineProperty(K,"__esModule",{value:!0}),K.getStringOptionResult=ht,K.resolveRectLike=function(e,t,r,o){var s,u=e;return v.default.string(u)?u=ht(u,t,r):v.default.func(u)&&(u=u.apply(void 0,function(f){if(Array.isArray(f))return dt(f)}(s=o)||function(f){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(f))return Array.from(f)}(s)||function(f,d){if(f){if(typeof f=="string")return dt(f,d);var p=Object.prototype.toString.call(f).slice(8,-1);return p==="Object"&&f.constructor&&(p=f.constructor.name),p==="Map"||p==="Set"?Array.from(f):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?dt(f,d):void 0}}(s)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())),v.default.element(u)&&(u=(0,G.getElementRect)(u)),u},K.rectToXY=function(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}},K.xywhToTlbr=function(e){return!e||"left"in e&&"top"in e||((e=(0,z.default)({},e)).left=e.x||0,e.top=e.y||0,e.right=e.right||e.left+e.width,e.bottom=e.bottom||e.top+e.height),e},K.tlbrToXywh=function(e){return!e||"x"in e&&"y"in e||((e=(0,z.default)({},e)).x=e.left||0,e.y=e.top||0,e.width=e.width||(e.right||0)-e.x,e.height=e.height||(e.bottom||0)-e.y),e},K.addEdges=function(e,t,r){e.left&&(t.left+=r.x),e.right&&(t.right+=r.x),e.top&&(t.top+=r.y),e.bottom&&(t.bottom+=r.y),t.width=t.right-t.left,t.height=t.bottom-t.top};var et={};Object.defineProperty(et,"__esModule",{value:!0}),et.default=function(e,t,r){var o=e.options[r],s=o&&o.origin||e.options.origin,u=(0,K.resolveRectLike)(s,e,t,[e&&t]);return(0,K.rectToXY)(u)||{x:0,y:0}};var xt={};function $t(e){return e.trim().split(/ +/)}Object.defineProperty(xt,"__esModule",{value:!0}),xt.default=function e(t,r,o){if(o=o||{},v.default.string(t)&&t.search(" ")!==-1&&(t=$t(t)),v.default.array(t))return t.reduce(function(p,m){return(0,z.default)(p,e(m,r,o))},o);if(v.default.object(t)&&(r=t,t=""),v.default.func(r))o[t]=o[t]||[],o[t].push(r);else if(v.default.array(r))for(var s=0;s<r.length;s++){var u;u=r[s],e(t,u,o)}else if(v.default.object(r))for(var f in r){var d=$t(f).map(function(p){return"".concat(t).concat(p)});e(d,r[f],o)}return o};var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.default=void 0,Ze.default=function(e,t){return Math.sqrt(e*e+t*t)};var ei={};function Pn(e,t){for(var r in t){var o=Pn.prefixedPropREs,s=!1;for(var u in o)if(r.indexOf(u)===0&&o[u].test(r)){s=!0;break}s||typeof t[r]=="function"||(e[r]=t[r])}return e}Object.defineProperty(ei,"__esModule",{value:!0}),ei.default=void 0,Pn.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,moz:/(Pressure)$/};var wa=Pn;ei.default=wa;var q={};function Cn(e){return e instanceof O.default.Event||e instanceof O.default.Touch}function ti(e,t,r){return e=e||"page",(r=r||{}).x=t[e+"X"],r.y=t[e+"Y"],r}function Sr(e,t){return t=t||{x:0,y:0},J.default.isOperaMobile&&Cn(e)?(ti("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):ti("page",e,t),t}function Pr(e,t){return t=t||{},J.default.isOperaMobile&&Cn(e)?ti("screen",e,t):ti("client",e,t),t}function Ii(e){var t=[];return v.default.array(e)?(t[0]=e[0],t[1]=e[1]):e.type==="touchend"?e.touches.length===1?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):e.touches.length===0&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function Cr(e){for(var t={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},r=0;r<e.length;r++){var o=e[r];for(var s in t)t[s]+=o[s]}for(var u in t)t[u]/=e.length;return t}Object.defineProperty(q,"__esModule",{value:!0}),q.copyCoords=function(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp},q.setCoordDeltas=function(e,t,r){e.page.x=r.page.x-t.page.x,e.page.y=r.page.y-t.page.y,e.client.x=r.client.x-t.client.x,e.client.y=r.client.y-t.client.y,e.timeStamp=r.timeStamp-t.timeStamp},q.setCoordVelocity=function(e,t){var r=Math.max(t.timeStamp/1e3,.001);e.page.x=t.page.x/r,e.page.y=t.page.y/r,e.client.x=t.client.x/r,e.client.y=t.client.y/r,e.timeStamp=r},q.setZeroCoords=function(e){e.page.x=0,e.page.y=0,e.client.x=0,e.client.y=0},q.isNativePointer=Cn,q.getXY=ti,q.getPageXY=Sr,q.getClientXY=Pr,q.getPointerId=function(e){return v.default.number(e.pointerId)?e.pointerId:e.identifier},q.setCoords=function(e,t,r){var o=t.length>1?Cr(t):t[0];Sr(o,e.page),Pr(o,e.client),e.timeStamp=r},q.getTouchPair=Ii,q.pointerAverage=Cr,q.touchBBox=function(e){if(!e.length)return null;var t=Ii(e),r=Math.min(t[0].pageX,t[1].pageX),o=Math.min(t[0].pageY,t[1].pageY),s=Math.max(t[0].pageX,t[1].pageX),u=Math.max(t[0].pageY,t[1].pageY);return{x:r,y:o,left:r,top:o,right:s,bottom:u,width:s-r,height:u-o}},q.touchDistance=function(e,t){var r=t+"X",o=t+"Y",s=Ii(e),u=s[0][r]-s[1][r],f=s[0][o]-s[1][o];return(0,Ze.default)(u,f)},q.touchAngle=function(e,t){var r=t+"X",o=t+"Y",s=Ii(e),u=s[1][r]-s[0][r],f=s[1][o]-s[0][o];return 180*Math.atan2(f,u)/Math.PI},q.getPointerType=function(e){return v.default.string(e.pointerType)?e.pointerType:v.default.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type||"")||e instanceof O.default.Touch?"touch":"mouse"},q.getEventTargets=function(e){var t=v.default.func(e.composedPath)?e.composedPath():e.path;return[G.getActualElement(t?t[0]:e.target),G.getActualElement(e.currentTarget)]},q.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},q.coordsToEvent=function(e){return{coords:e,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},Object.defineProperty(q,"pointerExtend",{enumerable:!0,get:function(){return ei.default}});var Rt={};function xa(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ft(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.BaseEvent=void 0;var Or=function(){function e(o){(function(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),ft(this,"type",void 0),ft(this,"target",void 0),ft(this,"currentTarget",void 0),ft(this,"interactable",void 0),ft(this,"_interaction",void 0),ft(this,"timeStamp",void 0),ft(this,"immediatePropagationStopped",!1),ft(this,"propagationStopped",!1),this._interaction=o}var t,r;return t=e,(r=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&xa(t.prototype,r),e}();Rt.BaseEvent=Or,Object.defineProperty(Or.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var le={};Object.defineProperty(le,"__esModule",{value:!0}),le.find=le.findIndex=le.from=le.merge=le.remove=le.contains=void 0,le.contains=function(e,t){return e.indexOf(t)!==-1},le.remove=function(e,t){return e.splice(e.indexOf(t),1)};var Ir=function(e,t){for(var r=0;r<t.length;r++){var o=t[r];e.push(o)}return e};le.merge=Ir,le.from=function(e){return Ir([],e)};var Ar=function(e,t){for(var r=0;r<e.length;r++)if(t(e[r],r,e))return r;return-1};le.findIndex=Ar,le.find=function(e,t){return e[Ar(e,t)]};var tt={};function Tr(e){return(Tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ka(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Mr(e,t){return(Mr=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r})(e,t)}function Ea(e,t){return!t||Tr(t)!=="object"&&typeof t!="function"?it(e):t}function it(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function On(e){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(tt,"__esModule",{value:!0}),tt.DropEvent=void 0;var Sa=function(e){(function(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),p&&Mr(d,p)})(f,e);var t,r,o,s,u=(o=f,s=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var d,p=On(o);if(s){var m=On(this).constructor;d=Reflect.construct(p,arguments,m)}else d=p.apply(this,arguments);return Ea(this,d)});function f(d,p,m){var y;(function(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")})(this,f),pt(it(y=u.call(this,p._interaction)),"target",void 0),pt(it(y),"dropzone",void 0),pt(it(y),"dragEvent",void 0),pt(it(y),"relatedTarget",void 0),pt(it(y),"draggable",void 0),pt(it(y),"timeStamp",void 0),pt(it(y),"propagationStopped",!1),pt(it(y),"immediatePropagationStopped",!1);var b=m==="dragleave"?d.prev:d.cur,E=b.element,P=b.dropzone;return y.type=m,y.target=E,y.currentTarget=E,y.dropzone=P,y.dragEvent=p,y.relatedTarget=p.target,y.draggable=p.interactable,y.timeStamp=p.timeStamp,y}return t=f,(r=[{key:"reject",value:function(){var d=this,p=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&p.cur.dropzone===this.dropzone&&p.cur.element===this.target)if(p.prev.dropzone=this.dropzone,p.prev.element=this.target,p.rejected=!0,p.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var m=p.activeDrops,y=le.findIndex(m,function(E){var P=E.dropzone,x=E.element;return P===d.dropzone&&x===d.target});p.activeDrops.splice(y,1);var b=new f(p,this.dragEvent,"dropdeactivate");b.dropzone=this.dropzone,b.target=this.target,this.dropzone.fire(b)}else this.dropzone.fire(new f(p,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&ka(t.prototype,r),f}(Rt.BaseEvent);tt.DropEvent=Sa;var Ai={};function Dr(e,t){for(var r=0;r<e.slice().length;r++){var o=e.slice()[r],s=o.dropzone,u=o.element;t.dropzone=s,t.target=u,s.fire(t),t.propagationStopped=t.immediatePropagationStopped=!1}}function In(e,t){for(var r=function(u,f){for(var d=u.interactables,p=[],m=0;m<d.list.length;m++){var y=d.list[m];if(y.options.drop.enabled){var b=y.options.drop.accept;if(!(v.default.element(b)&&b!==f||v.default.string(b)&&!G.matchesSelector(f,b)||v.default.func(b)&&!b({dropzone:y,draggableElement:f})))for(var E=v.default.string(y.target)?y._context.querySelectorAll(y.target):v.default.array(y.target)?y.target:[y.target],P=0;P<E.length;P++){var x=E[P];x!==f&&p.push({dropzone:y,element:x,rect:y.getRect(x)})}}}return p}(e,t),o=0;o<r.length;o++){var s=r[o];s.rect=s.dropzone.getRect(s.element)}return r}function jr(e,t,r){for(var o=e.dropState,s=e.interactable,u=e.element,f=[],d=0;d<o.activeDrops.length;d++){var p=o.activeDrops[d],m=p.dropzone,y=p.element,b=p.rect;f.push(m.dropCheck(t,r,s,u,y,b)?y:null)}var E=G.indexOfDeepestElement(f);return o.activeDrops[E]||null}function An(e,t,r){var o=e.dropState,s={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return r.type==="dragstart"&&(s.activate=new tt.DropEvent(o,r,"dropactivate"),s.activate.target=null,s.activate.dropzone=null),r.type==="dragend"&&(s.deactivate=new tt.DropEvent(o,r,"dropdeactivate"),s.deactivate.target=null,s.deactivate.dropzone=null),o.rejected||(o.cur.element!==o.prev.element&&(o.prev.dropzone&&(s.leave=new tt.DropEvent(o,r,"dragleave"),r.dragLeave=s.leave.target=o.prev.element,r.prevDropzone=s.leave.dropzone=o.prev.dropzone),o.cur.dropzone&&(s.enter=new tt.DropEvent(o,r,"dragenter"),r.dragEnter=o.cur.element,r.dropzone=o.cur.dropzone)),r.type==="dragend"&&o.cur.dropzone&&(s.drop=new tt.DropEvent(o,r,"drop"),r.dropzone=o.cur.dropzone,r.relatedTarget=o.cur.element),r.type==="dragmove"&&o.cur.dropzone&&(s.move=new tt.DropEvent(o,r,"dropmove"),s.move.dragmove=r,r.dropzone=o.cur.dropzone)),s}function Tn(e,t){var r=e.dropState,o=r.activeDrops,s=r.cur,u=r.prev;t.leave&&u.dropzone.fire(t.leave),t.enter&&s.dropzone.fire(t.enter),t.move&&s.dropzone.fire(t.move),t.drop&&s.dropzone.fire(t.drop),t.deactivate&&Dr(o,t.deactivate),r.prev.dropzone=s.dropzone,r.prev.element=s.element}function Lr(e,t){var r=e.interaction,o=e.iEvent,s=e.event;if(o.type==="dragmove"||o.type==="dragend"){var u=r.dropState;t.dynamicDrop&&(u.activeDrops=In(t,r.element));var f=o,d=jr(r,f,s);u.rejected=u.rejected&&!!d&&d.dropzone===u.cur.dropzone&&d.element===u.cur.element,u.cur.dropzone=d&&d.dropzone,u.cur.element=d&&d.element,u.events=An(r,0,f)}}Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.default=void 0;var Fr={id:"actions/drop",install:function(e){var t=e.actions,r=e.interactStatic,o=e.Interactable,s=e.defaults;e.usePlugin(C.default),o.prototype.dropzone=function(u){return function(f,d){if(v.default.object(d)){if(f.options.drop.enabled=d.enabled!==!1,d.listeners){var p=(0,xt.default)(d.listeners),m=Object.keys(p).reduce(function(y,b){return y[/^(enter|leave)/.test(b)?"drag".concat(b):/^(activate|deactivate|move)/.test(b)?"drop".concat(b):b]=p[b],y},{});f.off(f.options.drop.listeners),f.on(m),f.options.drop.listeners=m}return v.default.func(d.ondrop)&&f.on("drop",d.ondrop),v.default.func(d.ondropactivate)&&f.on("dropactivate",d.ondropactivate),v.default.func(d.ondropdeactivate)&&f.on("dropdeactivate",d.ondropdeactivate),v.default.func(d.ondragenter)&&f.on("dragenter",d.ondragenter),v.default.func(d.ondragleave)&&f.on("dragleave",d.ondragleave),v.default.func(d.ondropmove)&&f.on("dropmove",d.ondropmove),/^(pointer|center)$/.test(d.overlap)?f.options.drop.overlap=d.overlap:v.default.number(d.overlap)&&(f.options.drop.overlap=Math.max(Math.min(1,d.overlap),0)),"accept"in d&&(f.options.drop.accept=d.accept),"checker"in d&&(f.options.drop.checker=d.checker),f}return v.default.bool(d)?(f.options.drop.enabled=d,f):f.options.drop}(this,u)},o.prototype.dropCheck=function(u,f,d,p,m,y){return function(b,E,P,x,A,R,T){var N=!1;if(!(T=T||b.getRect(R)))return!!b.options.drop.checker&&b.options.drop.checker(E,P,N,b,R,x,A);var W=b.options.drop.overlap;if(W==="pointer"){var H=(0,et.default)(x,A,"drag"),te=q.getPageXY(E);te.x+=H.x,te.y+=H.y;var ce=te.x>T.left&&te.x<T.right,Q=te.y>T.top&&te.y<T.bottom;N=ce&&Q}var ae=x.getRect(A);if(ae&&W==="center"){var Ge=ae.left+ae.width/2,st=ae.top+ae.height/2;N=Ge>=T.left&&Ge<=T.right&&st>=T.top&&st<=T.bottom}return ae&&v.default.number(W)&&(N=Math.max(0,Math.min(T.right,ae.right)-Math.max(T.left,ae.left))*Math.max(0,Math.min(T.bottom,ae.bottom)-Math.max(T.top,ae.top))/(ae.width*ae.height)>=W),b.options.drop.checker&&(N=b.options.drop.checker(E,P,N,b,R,x,A)),N}(this,u,f,d,p,m,y)},r.dynamicDrop=function(u){return v.default.bool(u)?(e.dynamicDrop=u,r):e.dynamicDrop},(0,z.default)(t.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),t.methodDict.drop="dropzone",e.dynamicDrop=!1,s.actions.drop=Fr.defaults},listeners:{"interactions:before-action-start":function(e){var t=e.interaction;t.prepared.name==="drag"&&(t.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(e,t){var r=e.interaction,o=(e.event,e.iEvent);if(r.prepared.name==="drag"){var s=r.dropState;s.activeDrops=null,s.events=null,s.activeDrops=In(t,r.element),s.events=An(r,0,o),s.events.activate&&(Dr(s.activeDrops,s.events.activate),t.fire("actions/drop:start",{interaction:r,dragEvent:o}))}},"interactions:action-move":Lr,"interactions:after-action-move":function(e,t){var r=e.interaction,o=e.iEvent;r.prepared.name==="drag"&&(Tn(r,r.dropState.events),t.fire("actions/drop:move",{interaction:r,dragEvent:o}),r.dropState.events={})},"interactions:action-end":function(e,t){if(e.interaction.prepared.name==="drag"){var r=e.interaction,o=e.iEvent;Lr(e,t),Tn(r,r.dropState.events),t.fire("actions/drop:end",{interaction:r,dragEvent:o})}},"interactions:stop":function(e){var t=e.interaction;if(t.prepared.name==="drag"){var r=t.dropState;r&&(r.activeDrops=null,r.events=null,r.cur.dropzone=null,r.cur.element=null,r.prev.dropzone=null,r.prev.element=null,r.rejected=!1)}}},getActiveDrops:In,getDrop:jr,getDropEvents:An,fireDropEvents:Tn,defaults:{enabled:!1,accept:null,overlap:"pointer"}},Pa=Fr;Ai.default=Pa;var Ti={};function Mn(e){var t=e.interaction,r=e.iEvent,o=e.phase;if(t.prepared.name==="gesture"){var s=t.pointers.map(function(m){return m.pointer}),u=o==="start",f=o==="end",d=t.interactable.options.deltaSource;if(r.touches=[s[0],s[1]],u)r.distance=q.touchDistance(s,d),r.box=q.touchBBox(s),r.scale=1,r.ds=0,r.angle=q.touchAngle(s,d),r.da=0,t.gesture.startDistance=r.distance,t.gesture.startAngle=r.angle;else if(f){var p=t.prevEvent;r.distance=p.distance,r.box=p.box,r.scale=p.scale,r.ds=0,r.angle=p.angle,r.da=0}else r.distance=q.touchDistance(s,d),r.box=q.touchBBox(s),r.scale=r.distance/t.gesture.startDistance,r.angle=q.touchAngle(s,d),r.ds=r.scale-t.gesture.scale,r.da=r.angle-t.gesture.angle;t.gesture.distance=r.distance,t.gesture.angle=r.angle,v.default.number(r.scale)&&r.scale!==1/0&&!isNaN(r.scale)&&(t.gesture.scale=r.scale)}}Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.default=void 0;var Dn={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(e){var t=e.actions,r=e.Interactable,o=e.defaults;r.prototype.gesturable=function(s){return v.default.object(s)?(this.options.gesture.enabled=s.enabled!==!1,this.setPerAction("gesture",s),this.setOnEvents("gesture",s),this):v.default.bool(s)?(this.options.gesture.enabled=s,this):this.options.gesture},t.map.gesture=Dn,t.methodDict.gesture="gesturable",o.actions.gesture=Dn.defaults},listeners:{"interactions:action-start":Mn,"interactions:action-move":Mn,"interactions:action-end":Mn,"interactions:new":function(e){e.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(e){if(!(e.interaction.pointers.length<2)){var t=e.interactable.options.gesture;if(t&&t.enabled)return e.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}},Ca=Dn;Ti.default=Ca;var Mi={};function Oa(e,t,r,o,s,u,f){if(!t)return!1;if(t===!0){var d=v.default.number(u.width)?u.width:u.right-u.left,p=v.default.number(u.height)?u.height:u.bottom-u.top;if(f=Math.min(f,Math.abs((e==="left"||e==="right"?d:p)/2)),d<0&&(e==="left"?e="right":e==="right"&&(e="left")),p<0&&(e==="top"?e="bottom":e==="bottom"&&(e="top")),e==="left")return r.x<(d>=0?u.left:u.right)+f;if(e==="top")return r.y<(p>=0?u.top:u.bottom)+f;if(e==="right")return r.x>(d>=0?u.right:u.left)-f;if(e==="bottom")return r.y>(p>=0?u.bottom:u.top)-f}return!!v.default.element(o)&&(v.default.element(t)?t===o:G.matchesUpTo(o,t,s))}function Rr(e){var t=e.iEvent,r=e.interaction;if(r.prepared.name==="resize"&&r.resizeAxes){var o=t;r.interactable.options.resize.square?(r.resizeAxes==="y"?o.delta.x=o.delta.y:o.delta.y=o.delta.x,o.axes="xy"):(o.axes=r.resizeAxes,r.resizeAxes==="x"?o.delta.y=0:r.resizeAxes==="y"&&(o.delta.x=0))}}Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.default=void 0;var nt={id:"actions/resize",before:["actions/drag"],install:function(e){var t=e.actions,r=e.browser,o=e.Interactable,s=e.defaults;nt.cursors=function(u){return u.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(r),nt.defaultMargin=r.supportsTouch||r.supportsPointerEvent?20:10,o.prototype.resizable=function(u){return function(f,d,p){return v.default.object(d)?(f.options.resize.enabled=d.enabled!==!1,f.setPerAction("resize",d),f.setOnEvents("resize",d),v.default.string(d.axis)&&/^x$|^y$|^xy$/.test(d.axis)?f.options.resize.axis=d.axis:d.axis===null&&(f.options.resize.axis=p.defaults.actions.resize.axis),v.default.bool(d.preserveAspectRatio)?f.options.resize.preserveAspectRatio=d.preserveAspectRatio:v.default.bool(d.square)&&(f.options.resize.square=d.square),f):v.default.bool(d)?(f.options.resize.enabled=d,f):f.options.resize}(this,u,e)},t.map.resize=nt,t.methodDict.resize="resizable",s.actions.resize=nt.defaults},listeners:{"interactions:new":function(e){e.interaction.resizeAxes="xy"},"interactions:action-start":function(e){(function(t){var r=t.iEvent,o=t.interaction;if(o.prepared.name==="resize"&&o.prepared.edges){var s=r,u=o.rect;o._rects={start:(0,z.default)({},u),corrected:(0,z.default)({},u),previous:(0,z.default)({},u),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},s.edges=o.prepared.edges,s.rect=o._rects.corrected,s.deltaRect=o._rects.delta}})(e),Rr(e)},"interactions:action-move":function(e){(function(t){var r=t.iEvent,o=t.interaction;if(o.prepared.name==="resize"&&o.prepared.edges){var s=r,u=o.interactable.options.resize.invert,f=u==="reposition"||u==="negate",d=o.rect,p=o._rects,m=p.start,y=p.corrected,b=p.delta,E=p.previous;if((0,z.default)(E,y),f){if((0,z.default)(y,d),u==="reposition"){if(y.top>y.bottom){var P=y.top;y.top=y.bottom,y.bottom=P}if(y.left>y.right){var x=y.left;y.left=y.right,y.right=x}}}else y.top=Math.min(d.top,m.bottom),y.bottom=Math.max(d.bottom,m.top),y.left=Math.min(d.left,m.right),y.right=Math.max(d.right,m.left);for(var A in y.width=y.right-y.left,y.height=y.bottom-y.top,y)b[A]=y[A]-E[A];s.edges=o.prepared.edges,s.rect=y,s.deltaRect=b}})(e),Rr(e)},"interactions:action-end":function(e){var t=e.iEvent,r=e.interaction;if(r.prepared.name==="resize"&&r.prepared.edges){var o=t;o.edges=r.prepared.edges,o.rect=r._rects.corrected,o.deltaRect=r._rects.delta}},"auto-start:check":function(e){var t=e.interaction,r=e.interactable,o=e.element,s=e.rect,u=e.buttons;if(s){var f=(0,z.default)({},t.coords.cur.page),d=r.options.resize;if(d&&d.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||(u&d.mouseButtons)!=0)){if(v.default.object(d.edges)){var p={left:!1,right:!1,top:!1,bottom:!1};for(var m in p)p[m]=Oa(m,d.edges[m],f,t._latestPointer.eventTarget,o,s,d.margin||nt.defaultMargin);p.left=p.left&&!p.right,p.top=p.top&&!p.bottom,(p.left||p.right||p.top||p.bottom)&&(e.action={name:"resize",edges:p})}else{var y=d.axis!=="y"&&f.x>s.right-nt.defaultMargin,b=d.axis!=="x"&&f.y>s.bottom-nt.defaultMargin;(y||b)&&(e.action={name:"resize",axes:(y?"x":"")+(b?"y":"")})}return!e.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(e){var t=e.edges,r=e.axis,o=e.name,s=nt.cursors,u=null;if(r)u=s[o+r];else if(t){for(var f="",d=["top","bottom","left","right"],p=0;p<d.length;p++){var m=d[p];t[m]&&(f+=m)}u=s[f]}return u},defaultMargin:null},Ia=nt;Mi.default=Ia;var Di={};Object.defineProperty(Di,"__esModule",{value:!0}),Di.default=void 0;var Aa={id:"actions",install:function(e){e.usePlugin(Ti.default),e.usePlugin(Mi.default),e.usePlugin(C.default),e.usePlugin(Ai.default)}};Di.default=Aa;var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.default=void 0;var rt,kt,zr=0,Ta={request:function(e){return rt(e)},cancel:function(e){return kt(e)},init:function(e){if(rt=e.requestAnimationFrame,kt=e.cancelAnimationFrame,!rt)for(var t=["ms","moz","webkit","o"],r=0;r<t.length;r++){var o=t[r];rt=e["".concat(o,"RequestAnimationFrame")],kt=e["".concat(o,"CancelAnimationFrame")]||e["".concat(o,"CancelRequestAnimationFrame")]}rt=rt&&rt.bind(e),kt=kt&&kt.bind(e),rt||(rt=function(s){var u=Date.now(),f=Math.max(0,16-(u-zr)),d=e.setTimeout(function(){s(u+f)},f);return zr=u+f,d},kt=function(s){return clearTimeout(s)})}};Ue.default=Ta;var vt={};Object.defineProperty(vt,"__esModule",{value:!0}),vt.getContainer=ji,vt.getScroll=ii,vt.getScrollSize=function(e){return v.default.window(e)&&(e=window.document.body),{x:e.scrollWidth,y:e.scrollHeight}},vt.getScrollSizeDelta=function(e,t){var r=e.interaction,o=e.element,s=r&&r.interactable.options[r.prepared.name].autoScroll;if(!s||!s.enabled)return t(),{x:0,y:0};var u=ji(s.container,r.interactable,o),f=ii(u);t();var d=ii(u);return{x:d.x-f.x,y:d.y-f.y}},vt.default=void 0;var V={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(e){V.isScrolling=!0,Ue.default.cancel(V.i),e.autoScroll=V,V.interaction=e,V.prevTime=V.now(),V.i=Ue.default.request(V.scroll)},stop:function(){V.isScrolling=!1,V.interaction&&(V.interaction.autoScroll=null),Ue.default.cancel(V.i)},scroll:function(){var e=V.interaction,t=e.interactable,r=e.element,o=e.prepared.name,s=t.options[o].autoScroll,u=ji(s.container,t,r),f=V.now(),d=(f-V.prevTime)/1e3,p=s.speed*d;if(p>=1){var m={x:V.x*p,y:V.y*p};if(m.x||m.y){var y=ii(u);v.default.window(u)?u.scrollBy(m.x,m.y):u&&(u.scrollLeft+=m.x,u.scrollTop+=m.y);var b=ii(u),E={x:b.x-y.x,y:b.y-y.y};(E.x||E.y)&&t.fire({type:"autoscroll",target:r,interactable:t,delta:E,interaction:e,container:u})}V.prevTime=f}V.isScrolling&&(Ue.default.cancel(V.i),V.i=Ue.default.request(V.scroll))},check:function(e,t){var r;return(r=e.options[t].autoScroll)==null?void 0:r.enabled},onInteractionMove:function(e){var t=e.interaction,r=e.pointer;if(t.interacting()&&V.check(t.interactable,t.prepared.name))if(t.simulation)V.x=V.y=0;else{var o,s,u,f,d=t.interactable,p=t.element,m=t.prepared.name,y=d.options[m].autoScroll,b=ji(y.container,d,p);if(v.default.window(b))f=r.clientX<V.margin,o=r.clientY<V.margin,s=r.clientX>b.innerWidth-V.margin,u=r.clientY>b.innerHeight-V.margin;else{var E=G.getElementClientRect(b);f=r.clientX<E.left+V.margin,o=r.clientY<E.top+V.margin,s=r.clientX>E.right-V.margin,u=r.clientY>E.bottom-V.margin}V.x=s?1:f?-1:0,V.y=u?1:o?-1:0,V.isScrolling||(V.margin=y.margin,V.speed=y.speed,V.start(t))}}};function ji(e,t,r){return(v.default.string(e)?(0,K.getStringOptionResult)(e,t,r):e)||(0,a.getWindow)(r)}function ii(e){return v.default.window(e)&&(e=window.document.body),{x:e.scrollLeft,y:e.scrollTop}}var Ma={id:"auto-scroll",install:function(e){var t=e.defaults,r=e.actions;e.autoScroll=V,V.now=function(){return e.now()},r.phaselessTypes.autoscroll=!0,t.perAction.autoScroll=V.defaults},listeners:{"interactions:new":function(e){e.interaction.autoScroll=null},"interactions:destroy":function(e){e.interaction.autoScroll=null,V.stop(),V.interaction&&(V.interaction=null)},"interactions:stop":V.stop,"interactions:action-move":function(e){return V.onInteractionMove(e)}}};vt.default=Ma;var Le={};Object.defineProperty(Le,"__esModule",{value:!0}),Le.warnOnce=function(e,t){var r=!1;return function(){return r||(a.window.console.warn(t),r=!0),e.apply(this,arguments)}},Le.copyAction=function(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e},Le.sign=void 0,Le.sign=function(e){return e>=0?1:-1};var Li={};function Da(e){return v.default.bool(e)?(this.options.styleCursor=e,this):e===null?(delete this.options.styleCursor,this):this.options.styleCursor}function ja(e){return v.default.func(e)?(this.options.actionChecker=e,this):e===null?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(Li,"__esModule",{value:!0}),Li.default=void 0;var La={id:"auto-start/interactableMethods",install:function(e){var t=e.Interactable;t.prototype.getAction=function(r,o,s,u){var f=function(d,p,m,y,b){var E=d.getRect(y),P={action:null,interactable:d,interaction:m,element:y,rect:E,buttons:p.buttons||{0:1,1:4,3:8,4:16}[p.button]};return b.fire("auto-start:check",P),P.action}(this,o,s,u,e);return this.options.actionChecker?this.options.actionChecker(r,o,f,this,u,s):f},t.prototype.ignoreFrom=(0,Le.warnOnce)(function(r){return this._backCompatOption("ignoreFrom",r)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),t.prototype.allowFrom=(0,Le.warnOnce)(function(r){return this._backCompatOption("allowFrom",r)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),t.prototype.actionChecker=ja,t.prototype.styleCursor=Da}};Li.default=La;var zt={};function Br(e,t,r,o,s){return t.testIgnoreAllow(t.options[e.name],r,o)&&t.options[e.name].enabled&&Fi(t,r,e,s)?e:null}function Fa(e,t,r,o,s,u,f){for(var d=0,p=o.length;d<p;d++){var m=o[d],y=s[d],b=m.getAction(t,r,e,y);if(b){var E=Br(b,m,y,u,f);if(E)return{action:E,interactable:m,element:y}}}return{action:null,interactable:null,element:null}}function Nr(e,t,r,o,s){var u=[],f=[],d=o;function p(y){u.push(y),f.push(d)}for(;v.default.element(d);){u=[],f=[],s.interactables.forEachMatch(d,p);var m=Fa(e,t,r,u,f,o,s);if(m.action&&!m.interactable.options[m.action.name].manualStart)return m;d=G.parentNode(d)}return{action:null,interactable:null,element:null}}function Gr(e,t,r){var o=t.action,s=t.interactable,u=t.element;o=o||{name:null},e.interactable=s,e.element=u,(0,Le.copyAction)(e.prepared,o),e.rect=s&&o.name?s.getRect(u):null,Yr(e,r),r.fire("autoStart:prepared",{interaction:e})}function Fi(e,t,r,o){var s=e.options,u=s[r.name].max,f=s[r.name].maxPerElement,d=o.autoStart.maxInteractions,p=0,m=0,y=0;if(!(u&&f&&d))return!1;for(var b=0;b<o.interactions.list.length;b++){var E=o.interactions.list[b],P=E.prepared.name;if(E.interacting()&&(++p>=d||E.interactable===e&&((m+=P===r.name?1:0)>=u||E.element===t&&(y++,P===r.name&&y>=f))))return!1}return d>0}function qr(e,t){return v.default.number(e)?(t.autoStart.maxInteractions=e,this):t.autoStart.maxInteractions}function jn(e,t,r){var o=r.autoStart.cursorElement;o&&o!==e&&(o.style.cursor=""),e.ownerDocument.documentElement.style.cursor=t,e.style.cursor=t,r.autoStart.cursorElement=t?e:null}function Yr(e,t){var r=e.interactable,o=e.element,s=e.prepared;if(e.pointerType==="mouse"&&r&&r.options.styleCursor){var u="";if(s.name){var f=r.options[s.name].cursorChecker;u=v.default.func(f)?f(s,r,o,e._interacting):t.actions.map[s.name].getCursor(s)}jn(e.element,u||"",t)}else t.autoStart.cursorElement&&jn(t.autoStart.cursorElement,"",t)}Object.defineProperty(zt,"__esModule",{value:!0}),zt.default=void 0;var Ra={id:"auto-start/base",before:["actions"],install:function(e){var t=e.interactStatic,r=e.defaults;e.usePlugin(Li.default),r.base.actionChecker=null,r.base.styleCursor=!0,(0,z.default)(r.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),t.maxInteractions=function(o){return qr(o,e)},e.autoStart={maxInteractions:1/0,withinInteractionLimit:Fi,cursorElement:null}},listeners:{"interactions:down":function(e,t){var r=e.interaction,o=e.pointer,s=e.event,u=e.eventTarget;r.interacting()||Gr(r,Nr(r,o,s,u,t),t)},"interactions:move":function(e,t){(function(r,o){var s=r.interaction,u=r.pointer,f=r.event,d=r.eventTarget;s.pointerType!=="mouse"||s.pointerIsDown||s.interacting()||Gr(s,Nr(s,u,f,d,o),o)})(e,t),function(r,o){var s=r.interaction;if(s.pointerIsDown&&!s.interacting()&&s.pointerWasMoved&&s.prepared.name){o.fire("autoStart:before-start",r);var u=s.interactable,f=s.prepared.name;f&&u&&(u.options[f].manualStart||!Fi(u,s.element,s.prepared,o)?s.stop():(s.start(s.prepared,u,s.element),Yr(s,o)))}}(e,t)},"interactions:stop":function(e,t){var r=e.interaction,o=r.interactable;o&&o.options.styleCursor&&jn(r.element,"",t)}},maxInteractions:qr,withinInteractionLimit:Fi,validateAction:Br};zt.default=Ra;var Ri={};Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.default=void 0;var za={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(e,t){var r=e.interaction,o=e.eventTarget,s=e.dx,u=e.dy;if(r.prepared.name==="drag"){var f=Math.abs(s),d=Math.abs(u),p=r.interactable.options.drag,m=p.startAxis,y=f>d?"x":f<d?"y":"xy";if(r.prepared.axis=p.lockAxis==="start"?y[0]:p.lockAxis,y!=="xy"&&m!=="xy"&&m!==y){r.prepared.name=null;for(var b=o,E=function(x){if(x!==r.interactable){var A=r.interactable.options.drag;if(!A.manualStart&&x.testIgnoreAllow(A,b,o)){var R=x.getAction(r.downPointer,r.downEvent,r,b);if(R&&R.name==="drag"&&function(T,N){if(!N)return!1;var W=N.options.drag.startAxis;return T==="xy"||W==="xy"||W===T}(y,x)&&zt.default.validateAction(R,x,b,o,t))return x}}};v.default.element(b);){var P=t.interactables.forEachMatch(b,E);if(P){r.prepared.name="drag",r.interactable=P,r.element=b;break}b=(0,G.parentNode)(b)}}}}}};Ri.default=za;var zi={};function Ln(e){var t=e.prepared&&e.prepared.name;if(!t)return null;var r=e.interactable.options;return r[t].hold||r[t].delay}Object.defineProperty(zi,"__esModule",{value:!0}),zi.default=void 0;var Ba={id:"auto-start/hold",install:function(e){var t=e.defaults;e.usePlugin(zt.default),t.perAction.hold=0,t.perAction.delay=0},listeners:{"interactions:new":function(e){e.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(e){var t=e.interaction,r=Ln(t);r>0&&(t.autoStartHoldTimer=setTimeout(function(){t.start(t.prepared,t.interactable,t.element)},r))},"interactions:move":function(e){var t=e.interaction,r=e.duplicate;t.autoStartHoldTimer&&t.pointerWasMoved&&!r&&(clearTimeout(t.autoStartHoldTimer),t.autoStartHoldTimer=null)},"autoStart:before-start":function(e){var t=e.interaction;Ln(t)>0&&(t.prepared.name=null)}},getHoldDuration:Ln};zi.default=Ba;var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.default=void 0;var Na={id:"auto-start",install:function(e){e.usePlugin(zt.default),e.usePlugin(zi.default),e.usePlugin(Ri.default)}};Bi.default=Na;var Bt={};function Ga(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):v.default.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault}function qa(e){var t=e.interaction,r=e.event;t.interactable&&t.interactable.checkAndPreventDefault(r)}function Ur(e){var t=e.Interactable;t.prototype.preventDefault=Ga,t.prototype.checkAndPreventDefault=function(r){return function(o,s,u){var f=o.options.preventDefault;if(f!=="never")if(f!=="always"){if(s.events.supportsPassive&&/^touch(start|move)$/.test(u.type)){var d=(0,a.getWindow)(u.target).document,p=s.getDocOptions(d);if(!p||!p.events||p.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(u.type)||v.default.element(u.target)&&(0,G.matchesSelector)(u.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||u.preventDefault()}else u.preventDefault()}(this,e,r)},e.interactions.docEvents.push({type:"dragstart",listener:function(r){for(var o=0;o<e.interactions.list.length;o++){var s=e.interactions.list[o];if(s.element&&(s.element===r.target||(0,G.nodeContains)(s.element,r.target)))return void s.interactable.checkAndPreventDefault(r)}}})}Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.install=Ur,Bt.default=void 0;var Ya={id:"core/interactablePreventDefault",install:Ur,listeners:["down","move","up","cancel"].reduce(function(e,t){return e["interactions:".concat(t)]=qa,e},{})};Bt.default=Ya;var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.default=void 0,Fn.default={};var ni,Rn={};Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.default=void 0,function(e){e.touchAction="touchAction",e.boxSizing="boxSizing",e.noListeners="noListeners"}(ni||(ni={})),ni.touchAction,ni.boxSizing,ni.noListeners;var Ua={id:"dev-tools",install:function(){}};Rn.default=Ua;var Et={};Object.defineProperty(Et,"__esModule",{value:!0}),Et.default=function e(t){var r={};for(var o in t){var s=t[o];v.default.plainObject(s)?r[o]=e(s):v.default.array(s)?r[o]=le.from(s):r[o]=s}return r};var St={};function Wr(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,o){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(r)){var s=[],u=!0,f=!1,d=void 0;try{for(var p,m=r[Symbol.iterator]();!(u=(p=m.next()).done)&&(s.push(p.value),!o||s.length!==o);u=!0);}catch(y){f=!0,d=y}finally{try{u||m.return==null||m.return()}finally{if(f)throw d}}return s}}(e,t)||function(r,o){if(r){if(typeof r=="string")return Xr(r,o);var s=Object.prototype.toString.call(r).slice(8,-1);return s==="Object"&&r.constructor&&(s=r.constructor.name),s==="Map"||s==="Set"?Array.from(r):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Xr(r,o):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xr(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function Wa(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(St,"__esModule",{value:!0}),St.getRectOffset=Vr,St.default=void 0;var Xa=function(){function e(o){(function(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),Pt(this,"states",[]),Pt(this,"startOffset",{left:0,right:0,top:0,bottom:0}),Pt(this,"startDelta",void 0),Pt(this,"result",void 0),Pt(this,"endResult",void 0),Pt(this,"edges",void 0),Pt(this,"interaction",void 0),this.interaction=o,this.result=Ni()}var t,r;return t=e,(r=[{key:"start",value:function(o,s){var u=o.phase,f=this.interaction,d=function(m){var y=m.interactable.options[m.prepared.name],b=y.modifiers;return b&&b.length?b:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(E){var P=y[E];return P&&P.enabled&&{options:P,methods:P._methods}}).filter(function(E){return!!E})}(f);this.prepareStates(d),this.edges=(0,z.default)({},f.edges),this.startOffset=Vr(f.rect,s),this.startDelta={x:0,y:0};var p=this.fillArg({phase:u,pageCoords:s,preEnd:!1});return this.result=Ni(),this.startAll(p),this.result=this.setAll(p)}},{key:"fillArg",value:function(o){var s=this.interaction;return o.interaction=s,o.interactable=s.interactable,o.element=s.element,o.rect=o.rect||s.rect,o.edges=this.edges,o.startOffset=this.startOffset,o}},{key:"startAll",value:function(o){for(var s=0;s<this.states.length;s++){var u=this.states[s];u.methods.start&&(o.state=u,u.methods.start(o))}}},{key:"setAll",value:function(o){var s=o.phase,u=o.preEnd,f=o.skipModifiers,d=o.rect;o.coords=(0,z.default)({},o.pageCoords),o.rect=(0,z.default)({},d);for(var p=f?this.states.slice(f):this.states,m=Ni(o.coords,o.rect),y=0;y<p.length;y++){var b,E=p[y],P=E.options,x=(0,z.default)({},o.coords),A=null;(b=E.methods)!=null&&b.set&&this.shouldDo(P,u,s)&&(o.state=E,A=E.methods.set(o),K.addEdges(this.interaction.edges,o.rect,{x:o.coords.x-x.x,y:o.coords.y-x.y})),m.eventProps.push(A)}m.delta.x=o.coords.x-o.pageCoords.x,m.delta.y=o.coords.y-o.pageCoords.y,m.rectDelta.left=o.rect.left-d.left,m.rectDelta.right=o.rect.right-d.right,m.rectDelta.top=o.rect.top-d.top,m.rectDelta.bottom=o.rect.bottom-d.bottom;var R=this.result.coords,T=this.result.rect;if(R&&T){var N=m.rect.left!==T.left||m.rect.right!==T.right||m.rect.top!==T.top||m.rect.bottom!==T.bottom;m.changed=N||R.x!==m.coords.x||R.y!==m.coords.y}return m}},{key:"applyToInteraction",value:function(o){var s=this.interaction,u=o.phase,f=s.coords.cur,d=s.coords.start,p=this.result,m=this.startDelta,y=p.delta;u==="start"&&(0,z.default)(this.startDelta,p.delta);for(var b=0;b<[[d,m],[f,y]].length;b++){var E=Wr([[d,m],[f,y]][b],2),P=E[0],x=E[1];P.page.x+=x.x,P.page.y+=x.y,P.client.x+=x.x,P.client.y+=x.y}var A=this.result.rectDelta,R=o.rect||s.rect;R.left+=A.left,R.right+=A.right,R.top+=A.top,R.bottom+=A.bottom,R.width=R.right-R.left,R.height=R.bottom-R.top}},{key:"setAndApply",value:function(o){var s=this.interaction,u=o.phase,f=o.preEnd,d=o.skipModifiers,p=this.setAll(this.fillArg({preEnd:f,phase:u,pageCoords:o.modifiedCoords||s.coords.cur.page}));if(this.result=p,!p.changed&&(!d||d<this.states.length)&&s.interacting())return!1;if(o.modifiedCoords){var m=s.coords.cur.page,y={x:o.modifiedCoords.x-m.x,y:o.modifiedCoords.y-m.y};p.coords.x+=y.x,p.coords.y+=y.y,p.delta.x+=y.x,p.delta.y+=y.y}this.applyToInteraction(o)}},{key:"beforeEnd",value:function(o){var s=o.interaction,u=o.event,f=this.states;if(f&&f.length){for(var d=!1,p=0;p<f.length;p++){var m=f[p];o.state=m;var y=m.options,b=m.methods,E=b.beforeEnd&&b.beforeEnd(o);if(E)return this.endResult=E,!1;d=d||!d&&this.shouldDo(y,!0,o.phase,!0)}d&&s.move({event:u,preEnd:!0})}}},{key:"stop",value:function(o){var s=o.interaction;if(this.states&&this.states.length){var u=(0,z.default)({states:this.states,interactable:s.interactable,element:s.element,rect:null},o);this.fillArg(u);for(var f=0;f<this.states.length;f++){var d=this.states[f];u.state=d,d.methods.stop&&d.methods.stop(u)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(o){this.states=[];for(var s=0;s<o.length;s++){var u=o[s],f=u.options,d=u.methods,p=u.name;this.states.push({options:f,methods:d,index:s,name:p})}return this.states}},{key:"restoreInteractionCoords",value:function(o){var s=o.interaction,u=s.coords,f=s.rect,d=s.modification;if(d.result){for(var p=d.startDelta,m=d.result,y=m.delta,b=m.rectDelta,E=[[u.start,p],[u.cur,y]],P=0;P<E.length;P++){var x=Wr(E[P],2),A=x[0],R=x[1];A.page.x-=R.x,A.page.y-=R.y,A.client.x-=R.x,A.client.y-=R.y}f.left-=b.left,f.right-=b.right,f.top-=b.top,f.bottom-=b.bottom}}},{key:"shouldDo",value:function(o,s,u,f){return!(!o||o.enabled===!1||f&&!o.endOnly||o.endOnly&&!s||u==="start"&&!o.setStart)}},{key:"copyFrom",value:function(o){this.startOffset=o.startOffset,this.startDelta=o.startDelta,this.edges=o.edges,this.states=o.states.map(function(s){return(0,Et.default)(s)}),this.result=Ni((0,z.default)({},o.result.coords),(0,z.default)({},o.result.rect))}},{key:"destroy",value:function(){for(var o in this)this[o]=null}}])&&Wa(t.prototype,r),e}();function Ni(e,t){return{rect:t,coords:e,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Vr(e,t){return e?{left:t.x-e.left,top:t.y-e.top,right:e.right-t.x,bottom:e.bottom-t.y}:{left:0,top:0,right:0,bottom:0}}St.default=Xa;var _e={};function Gi(e){var t=e.iEvent,r=e.interaction.modification.result;r&&(t.modifiers=r.eventProps)}Object.defineProperty(_e,"__esModule",{value:!0}),_e.makeModifier=function(e,t){var r=e.defaults,o={start:e.start,set:e.set,beforeEnd:e.beforeEnd,stop:e.stop},s=function(u){var f=u||{};for(var d in f.enabled=f.enabled!==!1,r)d in f||(f[d]=r[d]);var p={options:f,methods:o,name:t,enable:function(){return f.enabled=!0,p},disable:function(){return f.enabled=!1,p}};return p};return t&&typeof t=="string"&&(s._defaults=r,s._methods=o),s},_e.addEventModifiers=Gi,_e.default=void 0;var Va={id:"modifiers/base",before:["actions"],install:function(e){e.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(e){var t=e.interaction;t.modification=new St.default(t)},"interactions:before-action-start":function(e){var t=e.interaction.modification;t.start(e,e.interaction.coords.start.page),e.interaction.edges=t.edges,t.applyToInteraction(e)},"interactions:before-action-move":function(e){return e.interaction.modification.setAndApply(e)},"interactions:before-action-end":function(e){return e.interaction.modification.beforeEnd(e)},"interactions:action-start":Gi,"interactions:action-move":Gi,"interactions:action-end":Gi,"interactions:after-action-start":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-move":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:stop":function(e){return e.interaction.modification.stop(e)}}};_e.default=Va;var ri={};Object.defineProperty(ri,"__esModule",{value:!0}),ri.defaults=void 0,ri.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var oi={};function Hr(e){return(Hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Ha(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Zr(e,t){return(Zr=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r})(e,t)}function Za(e,t){return!t||Hr(t)!=="object"&&typeof t!="function"?re(e):t}function re(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zn(e){return(zn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(oi,"__esModule",{value:!0}),oi.InteractEvent=void 0;var Jr=function(e){(function(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),p&&Zr(d,p)})(f,e);var t,r,o,s,u=(o=f,s=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var d,p=zn(o);if(s){var m=zn(this).constructor;d=Reflect.construct(p,arguments,m)}else d=p.apply(this,arguments);return Za(this,d)});function f(d,p,m,y,b,E,P){var x;(function(ce,Q){if(!(ce instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,f),oe(re(x=u.call(this,d)),"target",void 0),oe(re(x),"currentTarget",void 0),oe(re(x),"relatedTarget",null),oe(re(x),"screenX",void 0),oe(re(x),"screenY",void 0),oe(re(x),"button",void 0),oe(re(x),"buttons",void 0),oe(re(x),"ctrlKey",void 0),oe(re(x),"shiftKey",void 0),oe(re(x),"altKey",void 0),oe(re(x),"metaKey",void 0),oe(re(x),"page",void 0),oe(re(x),"client",void 0),oe(re(x),"delta",void 0),oe(re(x),"rect",void 0),oe(re(x),"x0",void 0),oe(re(x),"y0",void 0),oe(re(x),"t0",void 0),oe(re(x),"dt",void 0),oe(re(x),"duration",void 0),oe(re(x),"clientX0",void 0),oe(re(x),"clientY0",void 0),oe(re(x),"velocity",void 0),oe(re(x),"speed",void 0),oe(re(x),"swipe",void 0),oe(re(x),"timeStamp",void 0),oe(re(x),"axes",void 0),oe(re(x),"preEnd",void 0),b=b||d.element;var A=d.interactable,R=(A&&A.options||ri.defaults).deltaSource,T=(0,et.default)(A,b,m),N=y==="start",W=y==="end",H=N?re(x):d.prevEvent,te=N?d.coords.start:W?{page:H.page,client:H.client,timeStamp:d.coords.cur.timeStamp}:d.coords.cur;return x.page=(0,z.default)({},te.page),x.client=(0,z.default)({},te.client),x.rect=(0,z.default)({},d.rect),x.timeStamp=te.timeStamp,W||(x.page.x-=T.x,x.page.y-=T.y,x.client.x-=T.x,x.client.y-=T.y),x.ctrlKey=p.ctrlKey,x.altKey=p.altKey,x.shiftKey=p.shiftKey,x.metaKey=p.metaKey,x.button=p.button,x.buttons=p.buttons,x.target=b,x.currentTarget=b,x.preEnd=E,x.type=P||m+(y||""),x.interactable=A,x.t0=N?d.pointers[d.pointers.length-1].downTime:H.t0,x.x0=d.coords.start.page.x-T.x,x.y0=d.coords.start.page.y-T.y,x.clientX0=d.coords.start.client.x-T.x,x.clientY0=d.coords.start.client.y-T.y,x.delta=N||W?{x:0,y:0}:{x:x[R].x-H[R].x,y:x[R].y-H[R].y},x.dt=d.coords.delta.timeStamp,x.duration=x.timeStamp-x.t0,x.velocity=(0,z.default)({},d.coords.velocity[R]),x.speed=(0,Ze.default)(x.velocity.x,x.velocity.y),x.swipe=W||y==="inertiastart"?x.getSwipe():null,x}return t=f,(r=[{key:"getSwipe",value:function(){var d=this._interaction;if(d.prevEvent.speed<600||this.timeStamp-d.prevEvent.timeStamp>150)return null;var p=180*Math.atan2(d.prevEvent.velocityY,d.prevEvent.velocityX)/Math.PI;p<0&&(p+=360);var m=112.5<=p&&p<247.5,y=202.5<=p&&p<337.5;return{up:y,down:!y&&22.5<=p&&p<157.5,left:m,right:!m&&(292.5<=p||p<67.5),angle:p,speed:d.prevEvent.speed,velocity:{x:d.prevEvent.velocityX,y:d.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&Ha(t.prototype,r),f}(Rt.BaseEvent);oi.InteractEvent=Jr,Object.defineProperties(Jr.prototype,{pageX:{get:function(){return this.page.x},set:function(e){this.page.x=e}},pageY:{get:function(){return this.page.y},set:function(e){this.page.y=e}},clientX:{get:function(){return this.client.x},set:function(e){this.client.x=e}},clientY:{get:function(){return this.client.y},set:function(e){this.client.y=e}},dx:{get:function(){return this.delta.x},set:function(e){this.delta.x=e}},dy:{get:function(){return this.delta.y},set:function(e){this.delta.y=e}},velocityX:{get:function(){return this.velocity.x},set:function(e){this.velocity.x=e}},velocityY:{get:function(){return this.velocity.y},set:function(e){this.velocity.y=e}}});var ai={};function si(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(ai,"__esModule",{value:!0}),ai.PointerInfo=void 0,ai.PointerInfo=function e(t,r,o,s,u){(function(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")})(this,e),si(this,"id",void 0),si(this,"pointer",void 0),si(this,"event",void 0),si(this,"downTime",void 0),si(this,"downTarget",void 0),this.id=t,this.pointer=r,this.event=o,this.downTime=s,this.downTarget=u};var qi,Yi,Ae={};function Ja(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function he(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(Ae,"__esModule",{value:!0}),Object.defineProperty(Ae,"PointerInfo",{enumerable:!0,get:function(){return ai.PointerInfo}}),Ae.default=Ae.Interaction=Ae._ProxyMethods=Ae._ProxyValues=void 0,Ae._ProxyValues=qi,function(e){e.interactable="",e.element="",e.prepared="",e.pointerIsDown="",e.pointerWasMoved="",e._proxy=""}(qi||(Ae._ProxyValues=qi={})),Ae._ProxyMethods=Yi,function(e){e.start="",e.move="",e.end="",e.stop="",e.interacting=""}(Yi||(Ae._ProxyMethods=Yi={}));var Qa=0,Qr=function(){function e(o){var s=this,u=o.pointerType,f=o.scopeFire;(function(E,P){if(!(E instanceof P))throw new TypeError("Cannot call a class as a function")})(this,e),he(this,"interactable",null),he(this,"element",null),he(this,"rect",void 0),he(this,"_rects",void 0),he(this,"edges",void 0),he(this,"_scopeFire",void 0),he(this,"prepared",{name:null,axis:null,edges:null}),he(this,"pointerType",void 0),he(this,"pointers",[]),he(this,"downEvent",null),he(this,"downPointer",{}),he(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),he(this,"prevEvent",null),he(this,"pointerIsDown",!1),he(this,"pointerWasMoved",!1),he(this,"_interacting",!1),he(this,"_ending",!1),he(this,"_stopped",!0),he(this,"_proxy",null),he(this,"simulation",null),he(this,"doMove",(0,Le.warnOnce)(function(E){this.move(E)},"The interaction.doMove() method has been renamed to interaction.move()")),he(this,"coords",{start:q.newCoords(),prev:q.newCoords(),cur:q.newCoords(),delta:q.newCoords(),velocity:q.newCoords()}),he(this,"_id",Qa++),this._scopeFire=f,this.pointerType=u;var d=this;this._proxy={};var p=function(E){Object.defineProperty(s._proxy,E,{get:function(){return d[E]}})};for(var m in qi)p(m);var y=function(E){Object.defineProperty(s._proxy,E,{value:function(){return d[E].apply(d,arguments)}})};for(var b in Yi)y(b);this._scopeFire("interactions:new",{interaction:this})}var t,r;return t=e,(r=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(o,s,u){var f=this.updatePointer(o,s,u,!0),d=this.pointers[f];this._scopeFire("interactions:down",{pointer:o,event:s,eventTarget:u,pointerIndex:f,pointerInfo:d,type:"down",interaction:this})}},{key:"start",value:function(o,s,u){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(o.name==="gesture"?2:1)||!s.options[o.name].enabled)&&((0,Le.copyAction)(this.prepared,o),this.interactable=s,this.element=u,this.rect=s.getRect(u),this.edges=this.prepared.edges?(0,z.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(o,s,u){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(o,s,u,!1);var f,d,p=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(f=this.coords.cur.client.x-this.coords.start.client.x,d=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=(0,Ze.default)(f,d)>this.pointerMoveTolerance);var m=this.getPointerIndex(o),y={pointer:o,pointerIndex:m,pointerInfo:this.pointers[m],event:s,type:"move",eventTarget:u,dx:f,dy:d,duplicate:p,interaction:this};p||q.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",y),p||this.simulation||(this.interacting()&&(y.type=null,this.move(y)),this.pointerWasMoved&&q.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(o){o&&o.event||q.setZeroCoords(this.coords.delta),(o=(0,z.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},o||{})).phase="move",this._doPhase(o)}},{key:"pointerUp",value:function(o,s,u,f){var d=this.getPointerIndex(o);d===-1&&(d=this.updatePointer(o,s,u,!1));var p=/cancel$/i.test(s.type)?"cancel":"up";this._scopeFire("interactions:".concat(p),{pointer:o,pointerIndex:d,pointerInfo:this.pointers[d],event:s,eventTarget:u,type:p,curEventTarget:f,interaction:this}),this.simulation||this.end(s),this.removePointer(o,s)}},{key:"documentBlur",value:function(o){this.end(o),this._scopeFire("interactions:blur",{event:o,type:"blur",interaction:this})}},{key:"end",value:function(o){var s;this._ending=!0,o=o||this._latestPointer.event,this.interacting()&&(s=this._doPhase({event:o,interaction:this,phase:"end"})),this._ending=!1,s===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(o){var s=q.getPointerId(o);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:le.findIndex(this.pointers,function(u){return u.id===s})}},{key:"getPointerInfo",value:function(o){return this.pointers[this.getPointerIndex(o)]}},{key:"updatePointer",value:function(o,s,u,f){var d=q.getPointerId(o),p=this.getPointerIndex(o),m=this.pointers[p];return f=f!==!1&&(f||/(down|start)$/i.test(s.type)),m?m.pointer=o:(m=new ai.PointerInfo(d,o,s,null,null),p=this.pointers.length,this.pointers.push(m)),q.setCoords(this.coords.cur,this.pointers.map(function(y){return y.pointer}),this._now()),q.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),f&&(this.pointerIsDown=!0,m.downTime=this.coords.cur.timeStamp,m.downTarget=u,q.pointerExtend(this.downPointer,o),this.interacting()||(q.copyCoords(this.coords.start,this.coords.cur),q.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=s,this.pointerWasMoved=!1)),this._updateLatestPointer(o,s,u),this._scopeFire("interactions:update-pointer",{pointer:o,event:s,eventTarget:u,down:f,pointerInfo:m,pointerIndex:p,interaction:this}),p}},{key:"removePointer",value:function(o,s){var u=this.getPointerIndex(o);if(u!==-1){var f=this.pointers[u];this._scopeFire("interactions:remove-pointer",{pointer:o,event:s,eventTarget:null,pointerIndex:u,pointerInfo:f,interaction:this}),this.pointers.splice(u,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(o,s,u){this._latestPointer.pointer=o,this._latestPointer.event=s,this._latestPointer.eventTarget=u}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(o,s,u,f){return new oi.InteractEvent(this,o,this.prepared.name,s,this.element,u,f)}},{key:"_fireEvent",value:function(o){this.interactable.fire(o),(!this.prevEvent||o.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=o)}},{key:"_doPhase",value:function(o){var s=o.event,u=o.phase,f=o.preEnd,d=o.type,p=this.rect;if(p&&u==="move"&&(K.addEdges(this.edges,p,this.coords.delta[this.interactable.options.deltaSource]),p.width=p.right-p.left,p.height=p.bottom-p.top),this._scopeFire("interactions:before-action-".concat(u),o)===!1)return!1;var m=o.iEvent=this._createPreparedEvent(s,u,f,d);return this._scopeFire("interactions:action-".concat(u),o),u==="start"&&(this.prevEvent=m),this._fireEvent(m),this._scopeFire("interactions:after-action-".concat(u),o),!0}},{key:"_now",value:function(){return Date.now()}}])&&Ja(t.prototype,r),e}();Ae.Interaction=Qr;var Ka=Qr;Ae.default=Ka;var Ct={};function Kr(e){e.pointerIsDown&&(Nn(e.coords.cur,e.offset.total),e.offset.pending.x=0,e.offset.pending.y=0)}function $r(e){Bn(e.interaction)}function Bn(e){if(!function(r){return!(!r.offset.pending.x&&!r.offset.pending.y)}(e))return!1;var t=e.offset.pending;return Nn(e.coords.cur,t),Nn(e.coords.delta,t),K.addEdges(e.edges,e.rect,t),t.x=0,t.y=0,!0}function $a(e){var t=e.x,r=e.y;this.offset.pending.x+=t,this.offset.pending.y+=r,this.offset.total.x+=t,this.offset.total.y+=r}function Nn(e,t){var r=e.page,o=e.client,s=t.x,u=t.y;r.x+=s,r.y+=u,o.x+=s,o.y+=u}Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.addTotal=Kr,Ct.applyPending=Bn,Ct.default=void 0,Ae._ProxyMethods.offsetBy="";var es={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(e){e.Interaction.prototype.offsetBy=$a},listeners:{"interactions:new":function(e){e.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(e){return Kr(e.interaction)},"interactions:before-action-start":$r,"interactions:before-action-move":$r,"interactions:before-action-end":function(e){var t=e.interaction;if(Bn(t))return t.move({offset:!0}),t.end(),!1},"interactions:stop":function(e){var t=e.interaction;t.offset.total.x=0,t.offset.total.y=0,t.offset.pending.x=0,t.offset.pending.y=0}}};Ct.default=es;var Nt={};function ts(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.default=Nt.InertiaState=void 0;var eo=function(){function e(o){(function(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),be(this,"active",!1),be(this,"isModified",!1),be(this,"smoothEnd",!1),be(this,"allowResume",!1),be(this,"modification",void 0),be(this,"modifierCount",0),be(this,"modifierArg",void 0),be(this,"startCoords",void 0),be(this,"t0",0),be(this,"v0",0),be(this,"te",0),be(this,"targetOffset",void 0),be(this,"modifiedOffset",void 0),be(this,"currentOffset",void 0),be(this,"lambda_v0",0),be(this,"one_ve_v0",0),be(this,"timeout",void 0),be(this,"interaction",void 0),this.interaction=o}var t,r;return t=e,(r=[{key:"start",value:function(o){var s=this.interaction,u=Ui(s);if(!u||!u.enabled)return!1;var f=s.coords.velocity.client,d=(0,Ze.default)(f.x,f.y),p=this.modification||(this.modification=new St.default(s));if(p.copyFrom(s.modification),this.t0=s._now(),this.allowResume=u.allowResume,this.v0=d,this.currentOffset={x:0,y:0},this.startCoords=s.coords.cur.page,this.modifierArg=p.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-s.coords.cur.timeStamp<50&&d>u.minSpeed&&d>u.endSpeed)this.startInertia();else{if(p.result=p.setAll(this.modifierArg),!p.result.changed)return!1;this.startSmoothEnd()}return s.modification.result.rect=null,s.offsetBy(this.targetOffset),s._doPhase({interaction:s,event:o,phase:"inertiastart"}),s.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),s.modification.result.rect=null,this.active=!0,s.simulation=this,!0}},{key:"startInertia",value:function(){var o=this,s=this.interaction.coords.velocity.client,u=Ui(this.interaction),f=u.resistance,d=-Math.log(u.endSpeed/this.v0)/f;this.targetOffset={x:(s.x-d)/f,y:(s.y-d)/f},this.te=d,this.lambda_v0=f/this.v0,this.one_ve_v0=1-u.endSpeed/this.v0;var p=this.modification,m=this.modifierArg;m.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},p.result=p.setAll(m),p.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+p.result.delta.x,y:this.targetOffset.y+p.result.delta.y}),this.onNextFrame(function(){return o.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var o=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return o.smoothEndTick()})}},{key:"onNextFrame",value:function(o){var s=this;this.timeout=Ue.default.request(function(){s.active&&o()})}},{key:"inertiaTick",value:function(){var o,s,u,f,d,p=this,m=this.interaction,y=Ui(m).resistance,b=(m._now()-this.t0)/1e3;if(b<this.te){var E,P=1-(Math.exp(-y*b)-this.lambda_v0)/this.one_ve_v0;this.isModified?(o=this.targetOffset.x,s=this.targetOffset.y,u=this.modifiedOffset.x,f=this.modifiedOffset.y,E={x:to(d=P,0,o,u),y:to(d,0,s,f)}):E={x:this.targetOffset.x*P,y:this.targetOffset.y*P};var x={x:E.x-this.currentOffset.x,y:E.y-this.currentOffset.y};this.currentOffset.x+=x.x,this.currentOffset.y+=x.y,m.offsetBy(x),m.move(),this.onNextFrame(function(){return p.inertiaTick()})}else m.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var o=this,s=this.interaction,u=s._now()-this.t0,f=Ui(s).smoothEndDuration;if(u<f){var d={x:io(u,0,this.targetOffset.x,f),y:io(u,0,this.targetOffset.y,f)},p={x:d.x-this.currentOffset.x,y:d.y-this.currentOffset.y};this.currentOffset.x+=p.x,this.currentOffset.y+=p.y,s.offsetBy(p),s.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return o.smoothEndTick()})}else s.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(o){var s=o.pointer,u=o.event,f=o.eventTarget,d=this.interaction;d.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),d.updatePointer(s,u,f,!0),d._doPhase({interaction:d,event:u,phase:"resume"}),(0,q.copyCoords)(d.coords.prev,d.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Ue.default.cancel(this.timeout)}}])&&ts(t.prototype,r),e}();function Ui(e){var t=e.interactable,r=e.prepared;return t&&t.options&&r.name&&t.options[r.name].inertia}function to(e,t,r,o){var s=1-e;return s*s*t+2*s*e*r+e*e*o}function io(e,t,r,o){return-r*(e/=o)*(e-2)+t}Nt.InertiaState=eo;var is={id:"inertia",before:["modifiers","actions"],install:function(e){var t=e.defaults;e.usePlugin(Ct.default),e.usePlugin(_e.default),e.actions.phases.inertiastart=!0,e.actions.phases.resume=!0,t.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(e){var t=e.interaction;t.inertia=new eo(t)},"interactions:before-action-end":function(e){var t=e.interaction,r=e.event;return(!t._interacting||t.simulation||!t.inertia.start(r))&&null},"interactions:down":function(e){var t=e.interaction,r=e.eventTarget,o=t.inertia;if(o.active)for(var s=r;v.default.element(s);){if(s===t.element){o.resume(e);break}s=G.parentNode(s)}},"interactions:stop":function(e){var t=e.interaction.inertia;t.active&&t.stop()},"interactions:before-action-resume":function(e){var t=e.interaction.modification;t.stop(e),t.start(e,e.interaction.coords.cur.page),t.applyToInteraction(e)},"interactions:before-action-inertiastart":function(e){return e.interaction.modification.setAndApply(e)},"interactions:action-resume":_e.addEventModifiers,"interactions:action-inertiastart":_e.addEventModifiers,"interactions:after-action-inertiastart":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-resume":function(e){return e.interaction.modification.restoreInteractionCoords(e)}}};Nt.default=is;var li={};function ns(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ci(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function no(e,t){for(var r=0;r<t.length;r++){var o=t[r];if(e.immediatePropagationStopped)break;o(e)}}Object.defineProperty(li,"__esModule",{value:!0}),li.Eventable=void 0;var rs=function(){function e(o){(function(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),ci(this,"options",void 0),ci(this,"types",{}),ci(this,"propagationStopped",!1),ci(this,"immediatePropagationStopped",!1),ci(this,"global",void 0),this.options=(0,z.default)({},o||{})}var t,r;return t=e,(r=[{key:"fire",value:function(o){var s,u=this.global;(s=this.types[o.type])&&no(o,s),!o.propagationStopped&&u&&(s=u[o.type])&&no(o,s)}},{key:"on",value:function(o,s){var u=(0,xt.default)(o,s);for(o in u)this.types[o]=le.merge(this.types[o]||[],u[o])}},{key:"off",value:function(o,s){var u=(0,xt.default)(o,s);for(o in u){var f=this.types[o];if(f&&f.length)for(var d=0;d<u[o].length;d++){var p=u[o][d],m=f.indexOf(p);m!==-1&&f.splice(m,1)}}}},{key:"getRect",value:function(o){return null}}])&&ns(t.prototype,r),e}();li.Eventable=rs;var ui={};Object.defineProperty(ui,"__esModule",{value:!0}),ui.default=function(e,t){if(t.phaselessTypes[e])return!0;for(var r in t.map)if(e.indexOf(r)===0&&e.substr(r.length)in t.phases)return!0;return!1};var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.createInteractStatic=function(e){var t=function r(o,s){var u=e.interactables.get(o,s);return u||((u=e.interactables.new(o,s)).events.global=r.globalEvents),u};return t.getPointerAverage=q.pointerAverage,t.getTouchBBox=q.touchBBox,t.getTouchDistance=q.touchDistance,t.getTouchAngle=q.touchAngle,t.getElementRect=G.getElementRect,t.getElementClientRect=G.getElementClientRect,t.matchesSelector=G.matchesSelector,t.closest=G.closest,t.globalEvents={},t.version="1.10.11",t.scope=e,t.use=function(r,o){return this.scope.usePlugin(r,o),this},t.isSet=function(r,o){return!!this.scope.interactables.get(r,o&&o.context)},t.on=(0,Le.warnOnce)(function(r,o,s){if(v.default.string(r)&&r.search(" ")!==-1&&(r=r.trim().split(/ +/)),v.default.array(r)){for(var u=0;u<r.length;u++){var f=r[u];this.on(f,o,s)}return this}if(v.default.object(r)){for(var d in r)this.on(d,r[d],o);return this}return(0,ui.default)(r,this.scope.actions)?this.globalEvents[r]?this.globalEvents[r].push(o):this.globalEvents[r]=[o]:this.scope.events.add(this.scope.document,r,o,{options:s}),this},"The interact.on() method is being deprecated"),t.off=(0,Le.warnOnce)(function(r,o,s){if(v.default.string(r)&&r.search(" ")!==-1&&(r=r.trim().split(/ +/)),v.default.array(r)){for(var u=0;u<r.length;u++){var f=r[u];this.off(f,o,s)}return this}if(v.default.object(r)){for(var d in r)this.off(d,r[d],o);return this}var p;return(0,ui.default)(r,this.scope.actions)?r in this.globalEvents&&(p=this.globalEvents[r].indexOf(o))!==-1&&this.globalEvents[r].splice(p,1):this.scope.events.remove(this.scope.document,r,o,s),this},"The interact.off() method is being deprecated"),t.debug=function(){return this.scope},t.supportsTouch=function(){return J.default.supportsTouch},t.supportsPointerEvent=function(){return J.default.supportsPointerEvent},t.stop=function(){for(var r=0;r<this.scope.interactions.list.length;r++)this.scope.interactions.list[r].stop();return this},t.pointerMoveTolerance=function(r){return v.default.number(r)?(this.scope.interactions.pointerMoveTolerance=r,this):this.scope.interactions.pointerMoveTolerance},t.addDocument=function(r,o){this.scope.addDocument(r,o)},t.removeDocument=function(r){this.scope.removeDocument(r)},t};var Wi={};function os(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.Interactable=void 0;var as=function(){function e(o,s,u,f){(function(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")})(this,e),ot(this,"options",void 0),ot(this,"_actions",void 0),ot(this,"target",void 0),ot(this,"events",new li.Eventable),ot(this,"_context",void 0),ot(this,"_win",void 0),ot(this,"_doc",void 0),ot(this,"_scopeEvents",void 0),ot(this,"_rectChecker",void 0),this._actions=s.actions,this.target=o,this._context=s.context||u,this._win=(0,a.getWindow)((0,G.trySelector)(o)?this._context:o),this._doc=this._win.document,this._scopeEvents=f,this.set(s)}var t,r;return t=e,(r=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(o,s){return v.default.func(s.onstart)&&this.on("".concat(o,"start"),s.onstart),v.default.func(s.onmove)&&this.on("".concat(o,"move"),s.onmove),v.default.func(s.onend)&&this.on("".concat(o,"end"),s.onend),v.default.func(s.oninertiastart)&&this.on("".concat(o,"inertiastart"),s.oninertiastart),this}},{key:"updatePerActionListeners",value:function(o,s,u){(v.default.array(s)||v.default.object(s))&&this.off(o,s),(v.default.array(u)||v.default.object(u))&&this.on(o,u)}},{key:"setPerAction",value:function(o,s){var u=this._defaults;for(var f in s){var d=f,p=this.options[o],m=s[d];d==="listeners"&&this.updatePerActionListeners(o,p.listeners,m),v.default.array(m)?p[d]=le.from(m):v.default.plainObject(m)?(p[d]=(0,z.default)(p[d]||{},(0,Et.default)(m)),v.default.object(u.perAction[d])&&"enabled"in u.perAction[d]&&(p[d].enabled=m.enabled!==!1)):v.default.bool(m)&&v.default.object(u.perAction[d])?p[d].enabled=m:p[d]=m}}},{key:"getRect",value:function(o){return o=o||(v.default.element(this.target)?this.target:null),v.default.string(this.target)&&(o=o||this._context.querySelector(this.target)),(0,G.getElementRect)(o)}},{key:"rectChecker",value:function(o){var s=this;return v.default.func(o)?(this._rectChecker=o,this.getRect=function(u){var f=(0,z.default)({},s._rectChecker(u));return"width"in f||(f.width=f.right-f.left,f.height=f.bottom-f.top),f},this):o===null?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(o,s){if((0,G.trySelector)(s)||v.default.object(s)){for(var u in this.options[o]=s,this._actions.map)this.options[u][o]=s;return this}return this.options[o]}},{key:"origin",value:function(o){return this._backCompatOption("origin",o)}},{key:"deltaSource",value:function(o){return o==="page"||o==="client"?(this.options.deltaSource=o,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(o){return this._context===o.ownerDocument||(0,G.nodeContains)(this._context,o)}},{key:"testIgnoreAllow",value:function(o,s,u){return!this.testIgnore(o.ignoreFrom,s,u)&&this.testAllow(o.allowFrom,s,u)}},{key:"testAllow",value:function(o,s,u){return!o||!!v.default.element(u)&&(v.default.string(o)?(0,G.matchesUpTo)(u,o,s):!!v.default.element(o)&&(0,G.nodeContains)(o,u))}},{key:"testIgnore",value:function(o,s,u){return!(!o||!v.default.element(u))&&(v.default.string(o)?(0,G.matchesUpTo)(u,o,s):!!v.default.element(o)&&(0,G.nodeContains)(o,u))}},{key:"fire",value:function(o){return this.events.fire(o),this}},{key:"_onOff",value:function(o,s,u,f){v.default.object(s)&&!v.default.array(s)&&(f=u,u=null);var d=o==="on"?"add":"remove",p=(0,xt.default)(s,u);for(var m in p){m==="wheel"&&(m=J.default.wheelEvent);for(var y=0;y<p[m].length;y++){var b=p[m][y];(0,ui.default)(m,this._actions)?this.events[o](m,b):v.default.string(this.target)?this._scopeEvents["".concat(d,"Delegate")](this.target,this._context,m,b,f):this._scopeEvents[d](this.target,m,b,f)}}return this}},{key:"on",value:function(o,s,u){return this._onOff("on",o,s,u)}},{key:"off",value:function(o,s,u){return this._onOff("off",o,s,u)}},{key:"set",value:function(o){var s=this._defaults;for(var u in v.default.object(o)||(o={}),this.options=(0,Et.default)(s.base),this._actions.methodDict){var f=u,d=this._actions.methodDict[f];this.options[f]={},this.setPerAction(f,(0,z.default)((0,z.default)({},s.perAction),s.actions[f])),this[d](o[f])}for(var p in o)v.default.func(this[p])&&this[p](o[p]);return this}},{key:"unset",value:function(){if(v.default.string(this.target))for(var o in this._scopeEvents.delegatedEvents)for(var s=this._scopeEvents.delegatedEvents[o],u=s.length-1;u>=0;u--){var f=s[u],d=f.selector,p=f.context,m=f.listeners;d===this.target&&p===this._context&&s.splice(u,1);for(var y=m.length-1;y>=0;y--)this._scopeEvents.removeDelegate(this.target,this._context,o,m[y][0],m[y][1])}else this._scopeEvents.remove(this.target,"all")}}])&&os(t.prototype,r),e}();Wi.Interactable=as;var Xi={};function ss(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.InteractableSet=void 0;var ls=function(){function e(o){var s=this;(function(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")})(this,e),qn(this,"list",[]),qn(this,"selectorMap",{}),qn(this,"scope",void 0),this.scope=o,o.addListeners({"interactable:unset":function(u){var f=u.interactable,d=f.target,p=f._context,m=v.default.string(d)?s.selectorMap[d]:d[s.scope.id],y=le.findIndex(m,function(b){return b.context===p});m[y]&&(m[y].context=null,m[y].interactable=null),m.splice(y,1)}})}var t,r;return t=e,(r=[{key:"new",value:function(o,s){s=(0,z.default)(s||{},{actions:this.scope.actions});var u=new this.scope.Interactable(o,s,this.scope.document,this.scope.events),f={context:u._context,interactable:u};return this.scope.addDocument(u._doc),this.list.push(u),v.default.string(o)?(this.selectorMap[o]||(this.selectorMap[o]=[]),this.selectorMap[o].push(f)):(u.target[this.scope.id]||Object.defineProperty(o,this.scope.id,{value:[],configurable:!0}),o[this.scope.id].push(f)),this.scope.fire("interactable:new",{target:o,options:s,interactable:u,win:this.scope._win}),u}},{key:"get",value:function(o,s){var u=s&&s.context||this.scope.document,f=v.default.string(o),d=f?this.selectorMap[o]:o[this.scope.id];if(!d)return null;var p=le.find(d,function(m){return m.context===u&&(f||m.interactable.inContext(o))});return p&&p.interactable}},{key:"forEachMatch",value:function(o,s){for(var u=0;u<this.list.length;u++){var f=this.list[u],d=void 0;if((v.default.string(f.target)?v.default.element(o)&&G.matchesSelector(o,f.target):o===f.target)&&f.inContext(o)&&(d=s(f)),d!==void 0)return d}}}])&&ss(t.prototype,r),e}();Xi.InteractableSet=ls;var Vi={};function cs(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Yn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Un(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,o){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(r)){var s=[],u=!0,f=!1,d=void 0;try{for(var p,m=r[Symbol.iterator]();!(u=(p=m.next()).done)&&(s.push(p.value),!o||s.length!==o);u=!0);}catch(y){f=!0,d=y}finally{try{u||m.return==null||m.return()}finally{if(f)throw d}}return s}}(e,t)||function(r,o){if(r){if(typeof r=="string")return ro(r,o);var s=Object.prototype.toString.call(r).slice(8,-1);return s==="Object"&&r.constructor&&(s=r.constructor.name),s==="Map"||s==="Set"?Array.from(r):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?ro(r,o):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ro(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.default=void 0;var us=function(){function e(o){(function(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),Yn(this,"currentTarget",void 0),Yn(this,"originalEvent",void 0),Yn(this,"type",void 0),this.originalEvent=o,(0,ei.default)(this,o)}var t,r;return t=e,(r=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&cs(t.prototype,r),e}();function di(e){if(!v.default.object(e))return{capture:!!e,passive:!1};var t=(0,z.default)({},e);return t.capture=!!e.capture,t.passive=!!e.passive,t}var ds={id:"events",install:function(e){var t,r=[],o={},s=[],u={add:f,remove:d,addDelegate:function(y,b,E,P,x){var A=di(x);if(!o[E]){o[E]=[];for(var R=0;R<s.length;R++){var T=s[R];f(T,E,p),f(T,E,m,!0)}}var N=o[E],W=le.find(N,function(H){return H.selector===y&&H.context===b});W||(W={selector:y,context:b,listeners:[]},N.push(W)),W.listeners.push([P,A])},removeDelegate:function(y,b,E,P,x){var A,R=di(x),T=o[E],N=!1;if(T)for(A=T.length-1;A>=0;A--){var W=T[A];if(W.selector===y&&W.context===b){for(var H=W.listeners,te=H.length-1;te>=0;te--){var ce=Un(H[te],2),Q=ce[0],ae=ce[1],Ge=ae.capture,st=ae.passive;if(Q===P&&Ge===R.capture&&st===R.passive){H.splice(te,1),H.length||(T.splice(A,1),d(b,E,p),d(b,E,m,!0)),N=!0;break}}if(N)break}}},delegateListener:p,delegateUseCapture:m,delegatedEvents:o,documents:s,targets:r,supportsOptions:!1,supportsPassive:!1};function f(y,b,E,P){var x=di(P),A=le.find(r,function(R){return R.eventTarget===y});A||(A={eventTarget:y,events:{}},r.push(A)),A.events[b]||(A.events[b]=[]),y.addEventListener&&!le.contains(A.events[b],E)&&(y.addEventListener(b,E,u.supportsOptions?x:x.capture),A.events[b].push(E))}function d(y,b,E,P){var x=di(P),A=le.findIndex(r,function(te){return te.eventTarget===y}),R=r[A];if(R&&R.events)if(b!=="all"){var T=!1,N=R.events[b];if(N){if(E==="all"){for(var W=N.length-1;W>=0;W--)d(y,b,N[W],x);return}for(var H=0;H<N.length;H++)if(N[H]===E){y.removeEventListener(b,E,u.supportsOptions?x:x.capture),N.splice(H,1),N.length===0&&(delete R.events[b],T=!0);break}}T&&!Object.keys(R.events).length&&r.splice(A,1)}else for(b in R.events)R.events.hasOwnProperty(b)&&d(y,b,"all")}function p(y,b){for(var E=di(b),P=new us(y),x=o[y.type],A=Un(q.getEventTargets(y),1)[0],R=A;v.default.element(R);){for(var T=0;T<x.length;T++){var N=x[T],W=N.selector,H=N.context;if(G.matchesSelector(R,W)&&G.nodeContains(H,A)&&G.nodeContains(H,R)){var te=N.listeners;P.currentTarget=R;for(var ce=0;ce<te.length;ce++){var Q=Un(te[ce],2),ae=Q[0],Ge=Q[1],st=Ge.capture,nr=Ge.passive;st===E.capture&&nr===E.passive&&ae(P)}}}R=G.parentNode(R)}}function m(y){return p(y,!0)}return(t=e.document)==null||t.createElement("div").addEventListener("test",null,{get capture(){return u.supportsOptions=!0},get passive(){return u.supportsPassive=!0}}),e.events=u,u}};Vi.default=ds;var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.default=void 0;var Zi={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(e){for(var t=0;t<Zi.methodOrder.length;t++){var r;r=Zi.methodOrder[t];var o=Zi[r](e);if(o)return o}return null},simulationResume:function(e){var t=e.pointerType,r=e.eventType,o=e.eventTarget,s=e.scope;if(!/down|start/i.test(r))return null;for(var u=0;u<s.interactions.list.length;u++){var f=s.interactions.list[u],d=o;if(f.simulation&&f.simulation.allowResume&&f.pointerType===t)for(;d;){if(d===f.element)return f;d=G.parentNode(d)}}return null},mouseOrPen:function(e){var t,r=e.pointerId,o=e.pointerType,s=e.eventType,u=e.scope;if(o!=="mouse"&&o!=="pen")return null;for(var f=0;f<u.interactions.list.length;f++){var d=u.interactions.list[f];if(d.pointerType===o){if(d.simulation&&!oo(d,r))continue;if(d.interacting())return d;t||(t=d)}}if(t)return t;for(var p=0;p<u.interactions.list.length;p++){var m=u.interactions.list[p];if(!(m.pointerType!==o||/down/i.test(s)&&m.simulation))return m}return null},hasPointer:function(e){for(var t=e.pointerId,r=e.scope,o=0;o<r.interactions.list.length;o++){var s=r.interactions.list[o];if(oo(s,t))return s}return null},idle:function(e){for(var t=e.pointerType,r=e.scope,o=0;o<r.interactions.list.length;o++){var s=r.interactions.list[o];if(s.pointers.length===1){var u=s.interactable;if(u&&(!u.options.gesture||!u.options.gesture.enabled))continue}else if(s.pointers.length>=2)continue;if(!s.interacting()&&t===s.pointerType)return s}return null}};function oo(e,t){return e.pointers.some(function(r){return r.id===t})}var hs=Zi;Hi.default=hs;var Ji={};function ao(e){return(ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function so(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,o){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(r)){var s=[],u=!0,f=!1,d=void 0;try{for(var p,m=r[Symbol.iterator]();!(u=(p=m.next()).done)&&(s.push(p.value),!o||s.length!==o);u=!0);}catch(y){f=!0,d=y}finally{try{u||m.return==null||m.return()}finally{if(f)throw d}}return s}}(e,t)||function(r,o){if(r){if(typeof r=="string")return lo(r,o);var s=Object.prototype.toString.call(r).slice(8,-1);return s==="Object"&&r.constructor&&(s=r.constructor.name),s==="Map"||s==="Set"?Array.from(r):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?lo(r,o):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function lo(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function fs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ps(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function co(e,t){return(co=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r})(e,t)}function vs(e,t){return!t||ao(t)!=="object"&&typeof t!="function"?function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e):t}function Wn(e){return(Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.default=void 0;var Xn=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function uo(e,t){return function(r){var o=t.interactions.list,s=q.getPointerType(r),u=so(q.getEventTargets(r),2),f=u[0],d=u[1],p=[];if(/^touch/.test(r.type)){t.prevTouchTime=t.now();for(var m=0;m<r.changedTouches.length;m++){var y=r.changedTouches[m],b={pointer:y,pointerId:q.getPointerId(y),pointerType:s,eventType:r.type,eventTarget:f,curEventTarget:d,scope:t},E=ho(b);p.push([b.pointer,b.eventTarget,b.curEventTarget,E])}}else{var P=!1;if(!J.default.supportsPointerEvent&&/mouse/.test(r.type)){for(var x=0;x<o.length&&!P;x++)P=o[x].pointerType!=="mouse"&&o[x].pointerIsDown;P=P||t.now()-t.prevTouchTime<500||r.timeStamp===0}if(!P){var A={pointer:r,pointerId:q.getPointerId(r),pointerType:s,eventType:r.type,curEventTarget:d,eventTarget:f,scope:t},R=ho(A);p.push([A.pointer,A.eventTarget,A.curEventTarget,R])}}for(var T=0;T<p.length;T++){var N=so(p[T],4),W=N[0],H=N[1],te=N[2];N[3][e](W,r,H,te)}}}function ho(e){var t=e.pointerType,r=e.scope,o={interaction:Hi.default.search(e),searchDetails:e};return r.fire("interactions:find",o),o.interaction||r.interactions.new({pointerType:t})}function Vn(e,t){var r=e.doc,o=e.scope,s=e.options,u=o.interactions.docEvents,f=o.events,d=f[t];for(var p in o.browser.isIOS&&!s.events&&(s.events={passive:!1}),f.delegatedEvents)d(r,p,f.delegateListener),d(r,p,f.delegateUseCapture,!0);for(var m=s&&s.events,y=0;y<u.length;y++){var b=u[y];d(r,b.type,b.listener,m)}}var gs={id:"core/interactions",install:function(e){for(var t={},r=0;r<Xn.length;r++){var o=Xn[r];t[o]=uo(o,e)}var s,u=J.default.pEventTypes;function f(){for(var d=0;d<e.interactions.list.length;d++){var p=e.interactions.list[d];if(p.pointerIsDown&&p.pointerType==="touch"&&!p._interacting)for(var m=function(){var b=p.pointers[y];e.documents.some(function(E){var P=E.doc;return(0,G.nodeContains)(P,b.downTarget)})||p.removePointer(b.pointer,b.event)},y=0;y<p.pointers.length;y++)m()}}(s=O.default.PointerEvent?[{type:u.down,listener:f},{type:u.down,listener:t.pointerDown},{type:u.move,listener:t.pointerMove},{type:u.up,listener:t.pointerUp},{type:u.cancel,listener:t.pointerUp}]:[{type:"mousedown",listener:t.pointerDown},{type:"mousemove",listener:t.pointerMove},{type:"mouseup",listener:t.pointerUp},{type:"touchstart",listener:f},{type:"touchstart",listener:t.pointerDown},{type:"touchmove",listener:t.pointerMove},{type:"touchend",listener:t.pointerUp},{type:"touchcancel",listener:t.pointerUp}]).push({type:"blur",listener:function(d){for(var p=0;p<e.interactions.list.length;p++)e.interactions.list[p].documentBlur(d)}}),e.prevTouchTime=0,e.Interaction=function(d){(function(x,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(A&&A.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),A&&co(x,A)})(P,d);var p,m,y,b,E=(y=P,b=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var x,A=Wn(y);if(b){var R=Wn(this).constructor;x=Reflect.construct(A,arguments,R)}else x=A.apply(this,arguments);return vs(this,x)});function P(){return fs(this,P),E.apply(this,arguments)}return p=P,(m=[{key:"pointerMoveTolerance",get:function(){return e.interactions.pointerMoveTolerance},set:function(x){e.interactions.pointerMoveTolerance=x}},{key:"_now",value:function(){return e.now()}}])&&ps(p.prototype,m),P}(Ae.default),e.interactions={list:[],new:function(d){d.scopeFire=function(m,y){return e.fire(m,y)};var p=new e.Interaction(d);return e.interactions.list.push(p),p},listeners:t,docEvents:s,pointerMoveTolerance:1},e.usePlugin(Bt.default)},listeners:{"scope:add-document":function(e){return Vn(e,"add")},"scope:remove-document":function(e){return Vn(e,"remove")},"interactable:unset":function(e,t){for(var r=e.interactable,o=t.interactions.list.length-1;o>=0;o--){var s=t.interactions.list[o];s.interactable===r&&(s.stop(),t.fire("interactions:destroy",{interaction:s}),s.destroy(),t.interactions.list.length>2&&t.interactions.list.splice(o,1))}}},onDocSignal:Vn,doOnInteractions:uo,methodNames:Xn};Ji.default=gs;var hi={};function fo(e){return(fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Hn(e,t,r){return(Hn=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(o,s,u){var f=function(p,m){for(;!Object.prototype.hasOwnProperty.call(p,m)&&(p=Gt(p))!==null;);return p}(o,s);if(f){var d=Object.getOwnPropertyDescriptor(f,s);return d.get?d.get.call(u):d.value}})(e,t,r||e)}function po(e,t){return(po=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r})(e,t)}function ms(e,t){return!t||fo(t)!=="object"&&typeof t!="function"?function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e):t}function Gt(e){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function vo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function go(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function mo(e,t,r){return t&&go(e.prototype,t),r&&go(e,r),e}function we(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(hi,"__esModule",{value:!0}),hi.initScope=yo,hi.Scope=void 0;var ys=function(){function e(){var t=this;vo(this,e),we(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),we(this,"isInitialized",!1),we(this,"listenerMaps",[]),we(this,"browser",J.default),we(this,"defaults",(0,Et.default)(ri.defaults)),we(this,"Eventable",li.Eventable),we(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),we(this,"interactStatic",(0,Gn.createInteractStatic)(this)),we(this,"InteractEvent",oi.InteractEvent),we(this,"Interactable",void 0),we(this,"interactables",new Xi.InteractableSet(this)),we(this,"_win",void 0),we(this,"document",void 0),we(this,"window",void 0),we(this,"documents",[]),we(this,"_plugins",{list:[],map:{}}),we(this,"onWindowUnload",function(o){return t.removeDocument(o.target)});var r=this;this.Interactable=function(o){(function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&po(p,m)})(d,o);var s,u,f=(s=d,u=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var p,m=Gt(s);if(u){var y=Gt(this).constructor;p=Reflect.construct(m,arguments,y)}else p=m.apply(this,arguments);return ms(this,p)});function d(){return vo(this,d),f.apply(this,arguments)}return mo(d,[{key:"_defaults",get:function(){return r.defaults}},{key:"set",value:function(p){return Hn(Gt(d.prototype),"set",this).call(this,p),r.fire("interactable:set",{options:p,interactable:this}),this}},{key:"unset",value:function(){Hn(Gt(d.prototype),"unset",this).call(this),r.interactables.list.splice(r.interactables.list.indexOf(this),1),r.fire("interactable:unset",{interactable:this})}}]),d}(Wi.Interactable)}return mo(e,[{key:"addListeners",value:function(t,r){this.listenerMaps.push({id:r,map:t})}},{key:"fire",value:function(t,r){for(var o=0;o<this.listenerMaps.length;o++){var s=this.listenerMaps[o].map[t];if(s&&s(r,this,t)===!1)return!1}}},{key:"init",value:function(t){return this.isInitialized?this:yo(this,t)}},{key:"pluginIsInstalled",value:function(t){return this._plugins.map[t.id]||this._plugins.list.indexOf(t)!==-1}},{key:"usePlugin",value:function(t,r){if(!this.isInitialized)return this;if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,r),t.listeners&&t.before){for(var o=0,s=this.listenerMaps.length,u=t.before.reduce(function(d,p){return d[p]=!0,d[bo(p)]=!0,d},{});o<s;o++){var f=this.listenerMaps[o].id;if(u[f]||u[bo(f)])break}this.listenerMaps.splice(o,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this}},{key:"addDocument",value:function(t,r){if(this.getDocIndex(t)!==-1)return!1;var o=a.getWindow(t);r=r?(0,z.default)({},r):{},this.documents.push({doc:t,options:r}),this.events.documents.push(t),t!==this.document&&this.events.add(o,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:o,scope:this,options:r})}},{key:"removeDocument",value:function(t){var r=this.getDocIndex(t),o=a.getWindow(t),s=this.documents[r].options;this.events.remove(o,"unload",this.onWindowUnload),this.documents.splice(r,1),this.events.documents.splice(r,1),this.fire("scope:remove-document",{doc:t,window:o,scope:this,options:s})}},{key:"getDocIndex",value:function(t){for(var r=0;r<this.documents.length;r++)if(this.documents[r].doc===t)return r;return-1}},{key:"getDocOptions",value:function(t){var r=this.getDocIndex(t);return r===-1?null:this.documents[r].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),e}();function yo(e,t){return e.isInitialized=!0,v.default.window(t)&&a.init(t),O.default.init(t),J.default.init(t),Ue.default.init(t),e.window=t,e.document=t.document,e.usePlugin(Ji.default),e.usePlugin(Vi.default),e}function bo(e){return e&&e.replace(/\/.*$/,"")}hi.Scope=ys;var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.default=void 0;var _o=new hi.Scope,bs=_o.interactStatic;Ee.default=bs;var _s=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:void 0;_o.init(_s);var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.default=void 0,Qi.default=function(){};var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.default=void 0,Ki.default=function(){};var $i={};function wo(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,o){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(r)){var s=[],u=!0,f=!1,d=void 0;try{for(var p,m=r[Symbol.iterator]();!(u=(p=m.next()).done)&&(s.push(p.value),!o||s.length!==o);u=!0);}catch(y){f=!0,d=y}finally{try{u||m.return==null||m.return()}finally{if(f)throw d}}return s}}(e,t)||function(r,o){if(r){if(typeof r=="string")return xo(r,o);var s=Object.prototype.toString.call(r).slice(8,-1);return s==="Object"&&r.constructor&&(s=r.constructor.name),s==="Map"||s==="Set"?Array.from(r):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?xo(r,o):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function xo(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}Object.defineProperty($i,"__esModule",{value:!0}),$i.default=void 0,$i.default=function(e){var t=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(o){var s=wo(o,2),u=s[0],f=s[1];return u in e||f in e}),r=function(o,s){for(var u=e.range,f=e.limits,d=f===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:f,p=e.offset,m=p===void 0?{x:0,y:0}:p,y={range:u,grid:e,x:null,y:null},b=0;b<t.length;b++){var E=wo(t[b],2),P=E[0],x=E[1],A=Math.round((o-m.x)/e[P]),R=Math.round((s-m.y)/e[x]);y[P]=Math.max(d.left,Math.min(d.right,A*e[P]+m.x)),y[x]=Math.max(d.top,Math.min(d.bottom,R*e[x]+m.y))}return y};return r.grid=e,r.coordFields=t,r};var fi={};Object.defineProperty(fi,"__esModule",{value:!0}),Object.defineProperty(fi,"edgeTarget",{enumerable:!0,get:function(){return Qi.default}}),Object.defineProperty(fi,"elements",{enumerable:!0,get:function(){return Ki.default}}),Object.defineProperty(fi,"grid",{enumerable:!0,get:function(){return $i.default}});var en={};Object.defineProperty(en,"__esModule",{value:!0}),en.default=void 0;var ws={id:"snappers",install:function(e){var t=e.interactStatic;t.snappers=(0,z.default)(t.snappers||{},fi),t.createSnapGrid=t.snappers.grid}};en.default=ws;var qt={};function ko(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,o)}return r}function Zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ko(Object(r),!0).forEach(function(o){xs(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ko(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function xs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(qt,"__esModule",{value:!0}),qt.aspectRatio=qt.default=void 0;var Eo={start:function(e){var t=e.state,r=e.rect,o=e.edges,s=e.pageCoords,u=t.options.ratio,f=t.options,d=f.equalDelta,p=f.modifiers;u==="preserve"&&(u=r.width/r.height),t.startCoords=(0,z.default)({},s),t.startRect=(0,z.default)({},r),t.ratio=u,t.equalDelta=d;var m=t.linkedEdges={top:o.top||o.left&&!o.bottom,left:o.left||o.top&&!o.right,bottom:o.bottom||o.right&&!o.top,right:o.right||o.bottom&&!o.left};if(t.xIsPrimaryAxis=!(!o.left&&!o.right),t.equalDelta)t.edgeSign=(m.left?1:-1)*(m.top?1:-1);else{var y=t.xIsPrimaryAxis?m.top:m.left;t.edgeSign=y?-1:1}if((0,z.default)(e.edges,m),p&&p.length){var b=new St.default(e.interaction);b.copyFrom(e.interaction.modification),b.prepareStates(p),t.subModification=b,b.startAll(Zn({},e))}},set:function(e){var t=e.state,r=e.rect,o=e.coords,s=(0,z.default)({},o),u=t.equalDelta?ks:Es;if(u(t,t.xIsPrimaryAxis,o,r),!t.subModification)return null;var f=(0,z.default)({},r);(0,K.addEdges)(t.linkedEdges,f,{x:o.x-s.x,y:o.y-s.y});var d=t.subModification.setAll(Zn(Zn({},e),{},{rect:f,edges:t.linkedEdges,pageCoords:o,prevCoords:o,prevRect:f})),p=d.delta;return d.changed&&(u(t,Math.abs(p.x)>Math.abs(p.y),d.coords,d.rect),(0,z.default)(o,d.coords)),d.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function ks(e,t,r){var o=e.startCoords,s=e.edgeSign;t?r.y=o.y+(r.x-o.x)*s:r.x=o.x+(r.y-o.y)*s}function Es(e,t,r,o){var s=e.startRect,u=e.startCoords,f=e.ratio,d=e.edgeSign;if(t){var p=o.width/f;r.y=u.y+(p-s.height)*d}else{var m=o.height*f;r.x=u.x+(m-s.width)*d}}qt.aspectRatio=Eo;var Ss=(0,_e.makeModifier)(Eo,"aspectRatio");qt.default=Ss;var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.default=void 0;var So=function(){};So._defaults={};var Ps=So;Ot.default=Ps;var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0}),Object.defineProperty(Jn,"default",{enumerable:!0,get:function(){return Ot.default}});var Ce={};function Qn(e,t,r){return v.default.func(e)?K.resolveRectLike(e,t.interactable,t.element,[r.x,r.y,t]):K.resolveRectLike(e,t.interactable,t.element)}Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.getRestrictionRect=Qn,Ce.restrict=Ce.default=void 0;var Po={start:function(e){var t=e.rect,r=e.startOffset,o=e.state,s=e.interaction,u=e.pageCoords,f=o.options,d=f.elementRect,p=(0,z.default)({left:0,top:0,right:0,bottom:0},f.offset||{});if(t&&d){var m=Qn(f.restriction,s,u);if(m){var y=m.right-m.left-t.width,b=m.bottom-m.top-t.height;y<0&&(p.left+=y,p.right+=y),b<0&&(p.top+=b,p.bottom+=b)}p.left+=r.left-t.width*d.left,p.top+=r.top-t.height*d.top,p.right+=r.right-t.width*(1-d.right),p.bottom+=r.bottom-t.height*(1-d.bottom)}o.offset=p},set:function(e){var t=e.coords,r=e.interaction,o=e.state,s=o.options,u=o.offset,f=Qn(s.restriction,r,t);if(f){var d=K.xywhToTlbr(f);t.x=Math.max(Math.min(d.right-u.right,t.x),d.left+u.left),t.y=Math.max(Math.min(d.bottom-u.bottom,t.y),d.top+u.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};Ce.restrict=Po;var Cs=(0,_e.makeModifier)(Po,"restrict");Ce.default=Cs;var Je={};Object.defineProperty(Je,"__esModule",{value:!0}),Je.restrictEdges=Je.default=void 0;var Co={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Oo={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Io(e,t){for(var r=["top","left","bottom","right"],o=0;o<r.length;o++){var s=r[o];s in e||(e[s]=t[s])}return e}var Ao={noInner:Co,noOuter:Oo,start:function(e){var t,r=e.interaction,o=e.startOffset,s=e.state,u=s.options;if(u){var f=(0,Ce.getRestrictionRect)(u.offset,r,r.coords.start.page);t=K.rectToXY(f)}t=t||{x:0,y:0},s.offset={top:t.y+o.top,left:t.x+o.left,bottom:t.y-o.bottom,right:t.x-o.right}},set:function(e){var t=e.coords,r=e.edges,o=e.interaction,s=e.state,u=s.offset,f=s.options;if(r){var d=(0,z.default)({},t),p=(0,Ce.getRestrictionRect)(f.inner,o,d)||{},m=(0,Ce.getRestrictionRect)(f.outer,o,d)||{};Io(p,Co),Io(m,Oo),r.top?t.y=Math.min(Math.max(m.top+u.top,d.y),p.top+u.top):r.bottom&&(t.y=Math.max(Math.min(m.bottom+u.bottom,d.y),p.bottom+u.bottom)),r.left?t.x=Math.min(Math.max(m.left+u.left,d.x),p.left+u.left):r.right&&(t.x=Math.max(Math.min(m.right+u.right,d.x),p.right+u.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};Je.restrictEdges=Ao;var Os=(0,_e.makeModifier)(Ao,"restrictEdges");Je.default=Os;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.restrictRect=Yt.default=void 0;var Is=(0,z.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(e){}},Ce.restrict.defaults),To={start:Ce.restrict.start,set:Ce.restrict.set,defaults:Is};Yt.restrictRect=To;var As=(0,_e.makeModifier)(To,"restrictRect");Yt.default=As;var Ut={};Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.restrictSize=Ut.default=void 0;var Ts={width:-1/0,height:-1/0},Ms={width:1/0,height:1/0},Mo={start:function(e){return Je.restrictEdges.start(e)},set:function(e){var t=e.interaction,r=e.state,o=e.rect,s=e.edges,u=r.options;if(s){var f=K.tlbrToXywh((0,Ce.getRestrictionRect)(u.min,t,e.coords))||Ts,d=K.tlbrToXywh((0,Ce.getRestrictionRect)(u.max,t,e.coords))||Ms;r.options={endOnly:u.endOnly,inner:(0,z.default)({},Je.restrictEdges.noInner),outer:(0,z.default)({},Je.restrictEdges.noOuter)},s.top?(r.options.inner.top=o.bottom-f.height,r.options.outer.top=o.bottom-d.height):s.bottom&&(r.options.inner.bottom=o.top+f.height,r.options.outer.bottom=o.top+d.height),s.left?(r.options.inner.left=o.right-f.width,r.options.outer.left=o.right-d.width):s.right&&(r.options.inner.right=o.left+f.width,r.options.outer.right=o.left+d.width),Je.restrictEdges.set(e),r.options=u}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};Ut.restrictSize=Mo;var Ds=(0,_e.makeModifier)(Mo,"restrictSize");Ut.default=Ds;var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0}),Object.defineProperty(Kn,"default",{enumerable:!0,get:function(){return Ot.default}});var gt={};Object.defineProperty(gt,"__esModule",{value:!0}),gt.snap=gt.default=void 0;var Do={start:function(e){var t,r=e.interaction,o=e.interactable,s=e.element,u=e.rect,f=e.state,d=e.startOffset,p=f.options,m=p.offsetWithOrigin?function(E){var P=E.interaction.element;return(0,K.rectToXY)((0,K.resolveRectLike)(E.state.options.origin,null,null,[P]))||(0,et.default)(E.interactable,P,E.interaction.prepared.name)}(e):{x:0,y:0};if(p.offset==="startCoords")t={x:r.coords.start.page.x,y:r.coords.start.page.y};else{var y=(0,K.resolveRectLike)(p.offset,o,s,[r]);(t=(0,K.rectToXY)(y)||{x:0,y:0}).x+=m.x,t.y+=m.y}var b=p.relativePoints;f.offsets=u&&b&&b.length?b.map(function(E,P){return{index:P,relativePoint:E,x:d.left-u.width*E.x+t.x,y:d.top-u.height*E.y+t.y}}):[{index:0,relativePoint:null,x:t.x,y:t.y}]},set:function(e){var t=e.interaction,r=e.coords,o=e.state,s=o.options,u=o.offsets,f=(0,et.default)(t.interactable,t.element,t.prepared.name),d=(0,z.default)({},r),p=[];s.offsetWithOrigin||(d.x-=f.x,d.y-=f.y);for(var m=0;m<u.length;m++)for(var y=u[m],b=d.x-y.x,E=d.y-y.y,P=0,x=s.targets.length;P<x;P++){var A,R=s.targets[P];(A=v.default.func(R)?R(b,E,t._proxy,y,P):R)&&p.push({x:(v.default.number(A.x)?A.x:b)+y.x,y:(v.default.number(A.y)?A.y:E)+y.y,range:v.default.number(A.range)?A.range:s.range,source:R,index:P,offset:y})}for(var T={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},N=0;N<p.length;N++){var W=p[N],H=W.range,te=W.x-d.x,ce=W.y-d.y,Q=(0,Ze.default)(te,ce),ae=Q<=H;H===1/0&&T.inRange&&T.range!==1/0&&(ae=!1),T.target&&!(ae?T.inRange&&H!==1/0?Q/H<T.distance/T.range:H===1/0&&T.range!==1/0||Q<T.distance:!T.inRange&&Q<T.distance)||(T.target=W,T.distance=Q,T.range=H,T.inRange=ae,T.delta.x=te,T.delta.y=ce)}return T.inRange&&(r.x=T.target.x,r.y=T.target.y),o.closest=T,T},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};gt.snap=Do;var js=(0,_e.makeModifier)(Do,"snap");gt.default=js;var at={};function jo(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}Object.defineProperty(at,"__esModule",{value:!0}),at.snapSize=at.default=void 0;var Lo={start:function(e){var t=e.state,r=e.edges,o=t.options;if(!r)return null;e.state={options:{targets:null,relativePoints:[{x:r.left?0:1,y:r.top?0:1}],offset:o.offset||"self",origin:{x:0,y:0},range:o.range}},t.targetFields=t.targetFields||[["width","height"],["x","y"]],gt.snap.start(e),t.offsets=e.state.offsets,e.state=t},set:function(e){var t,r,o=e.interaction,s=e.state,u=e.coords,f=s.options,d=s.offsets,p={x:u.x-d[0].x,y:u.y-d[0].y};s.options=(0,z.default)({},f),s.options.targets=[];for(var m=0;m<(f.targets||[]).length;m++){var y=(f.targets||[])[m],b=void 0;if(b=v.default.func(y)?y(p.x,p.y,o):y){for(var E=0;E<s.targetFields.length;E++){var P=(t=s.targetFields[E],r=2,function(T){if(Array.isArray(T))return T}(t)||function(T,N){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(T)){var W=[],H=!0,te=!1,ce=void 0;try{for(var Q,ae=T[Symbol.iterator]();!(H=(Q=ae.next()).done)&&(W.push(Q.value),!N||W.length!==N);H=!0);}catch(Ge){te=!0,ce=Ge}finally{try{H||ae.return==null||ae.return()}finally{if(te)throw ce}}return W}}(t,r)||function(T,N){if(T){if(typeof T=="string")return jo(T,N);var W=Object.prototype.toString.call(T).slice(8,-1);return W==="Object"&&T.constructor&&(W=T.constructor.name),W==="Map"||W==="Set"?Array.from(T):W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W)?jo(T,N):void 0}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),x=P[0],A=P[1];if(x in b||A in b){b.x=b[x],b.y=b[A];break}}s.options.targets.push(b)}}var R=gt.snap.set(e);return s.options=f,R},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};at.snapSize=Lo;var Ls=(0,_e.makeModifier)(Lo,"snapSize");at.default=Ls;var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.snapEdges=Wt.default=void 0;var Fo={start:function(e){var t=e.edges;return t?(e.state.targetFields=e.state.targetFields||[[t.left?"left":"right",t.top?"top":"bottom"]],at.snapSize.start(e)):null},set:at.snapSize.set,defaults:(0,z.default)((0,Et.default)(at.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};Wt.snapEdges=Fo;var Fs=(0,_e.makeModifier)(Fo,"snapEdges");Wt.default=Fs;var $n={};Object.defineProperty($n,"__esModule",{value:!0}),Object.defineProperty($n,"default",{enumerable:!0,get:function(){return Ot.default}});var er={};Object.defineProperty(er,"__esModule",{value:!0}),Object.defineProperty(er,"default",{enumerable:!0,get:function(){return Ot.default}});var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.default=void 0;var Rs={aspectRatio:qt.default,restrictEdges:Je.default,restrict:Ce.default,restrictRect:Yt.default,restrictSize:Ut.default,snapEdges:Wt.default,snap:gt.default,snapSize:at.default,spring:$n.default,avoid:Jn.default,transform:er.default,rubberband:Kn.default};Xt.default=Rs;var tn={};Object.defineProperty(tn,"__esModule",{value:!0}),tn.default=void 0;var zs={id:"modifiers",install:function(e){var t=e.interactStatic;for(var r in e.usePlugin(_e.default),e.usePlugin(en.default),t.modifiers=Xt.default,Xt.default){var o=Xt.default[r],s=o._defaults,u=o._methods;s._methods=u,e.defaults.perAction[r]=s}}};tn.default=zs;var It={};function Ro(e){return(Ro=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Bs(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function zo(e,t){return(zo=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r})(e,t)}function Ns(e,t){return!t||Ro(t)!=="object"&&typeof t!="function"?Te(e):t}function Te(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tr(e){return(tr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function We(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(It,"__esModule",{value:!0}),It.PointerEvent=It.default=void 0;var Gs=function(e){(function(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),p&&zo(d,p)})(f,e);var t,r,o,s,u=(o=f,s=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var d,p=tr(o);if(s){var m=tr(this).constructor;d=Reflect.construct(p,arguments,m)}else d=p.apply(this,arguments);return Ns(this,d)});function f(d,p,m,y,b,E){var P;if(function(R,T){if(!(R instanceof T))throw new TypeError("Cannot call a class as a function")}(this,f),We(Te(P=u.call(this,b)),"type",void 0),We(Te(P),"originalEvent",void 0),We(Te(P),"pointerId",void 0),We(Te(P),"pointerType",void 0),We(Te(P),"double",void 0),We(Te(P),"pageX",void 0),We(Te(P),"pageY",void 0),We(Te(P),"clientX",void 0),We(Te(P),"clientY",void 0),We(Te(P),"dt",void 0),We(Te(P),"eventable",void 0),q.pointerExtend(Te(P),m),m!==p&&q.pointerExtend(Te(P),p),P.timeStamp=E,P.originalEvent=m,P.type=d,P.pointerId=q.getPointerId(p),P.pointerType=q.getPointerType(p),P.target=y,P.currentTarget=null,d==="tap"){var x=b.getPointerIndex(p);P.dt=P.timeStamp-b.pointers[x].downTime;var A=P.timeStamp-b.tapTime;P.double=!!(b.prevTap&&b.prevTap.type!=="doubletap"&&b.prevTap.target===P.target&&A<500)}else d==="doubletap"&&(P.dt=p.timeStamp-b.tapTime);return P}return t=f,(r=[{key:"_subtractOrigin",value:function(d){var p=d.x,m=d.y;return this.pageX-=p,this.pageY-=m,this.clientX-=p,this.clientY-=m,this}},{key:"_addOrigin",value:function(d){var p=d.x,m=d.y;return this.pageX+=p,this.pageY+=m,this.clientX+=p,this.clientY+=m,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&Bs(t.prototype,r),f}(Rt.BaseEvent);It.PointerEvent=It.default=Gs;var pi={};Object.defineProperty(pi,"__esModule",{value:!0}),pi.default=void 0;var nn={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(e){e.pointerEvents=nn,e.defaults.actions.pointerEvents=nn.defaults,(0,z.default)(e.actions.phaselessTypes,nn.types)},listeners:{"interactions:new":function(e){var t=e.interaction;t.prevTap=null,t.tapTime=0},"interactions:update-pointer":function(e){var t=e.down,r=e.pointerInfo;!t&&r.hold||(r.hold={duration:1/0,timeout:null})},"interactions:move":function(e,t){var r=e.interaction,o=e.pointer,s=e.event,u=e.eventTarget;e.duplicate||r.pointerIsDown&&!r.pointerWasMoved||(r.pointerIsDown&&ir(e),mt({interaction:r,pointer:o,event:s,eventTarget:u,type:"move"},t))},"interactions:down":function(e,t){(function(r,o){for(var s=r.interaction,u=r.pointer,f=r.event,d=r.eventTarget,p=r.pointerIndex,m=s.pointers[p].hold,y=G.getPath(d),b={interaction:s,pointer:u,event:f,eventTarget:d,type:"hold",targets:[],path:y,node:null},E=0;E<y.length;E++){var P=y[E];b.node=P,o.fire("pointerEvents:collect-targets",b)}if(b.targets.length){for(var x=1/0,A=0;A<b.targets.length;A++){var R=b.targets[A].eventable.options.holdDuration;R<x&&(x=R)}m.duration=x,m.timeout=setTimeout(function(){mt({interaction:s,eventTarget:d,pointer:u,event:f,type:"hold"},o)},x)}})(e,t),mt(e,t)},"interactions:up":function(e,t){ir(e),mt(e,t),function(r,o){var s=r.interaction,u=r.pointer,f=r.event,d=r.eventTarget;s.pointerWasMoved||mt({interaction:s,eventTarget:d,pointer:u,event:f,type:"tap"},o)}(e,t)},"interactions:cancel":function(e,t){ir(e),mt(e,t)}},PointerEvent:It.PointerEvent,fire:mt,collectEventTargets:Bo,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function mt(e,t){var r=e.interaction,o=e.pointer,s=e.event,u=e.eventTarget,f=e.type,d=e.targets,p=d===void 0?Bo(e,t):d,m=new It.PointerEvent(f,o,s,u,r,t.now());t.fire("pointerEvents:new",{pointerEvent:m});for(var y={interaction:r,pointer:o,event:s,eventTarget:u,targets:p,type:f,pointerEvent:m},b=0;b<p.length;b++){var E=p[b];for(var P in E.props||{})m[P]=E.props[P];var x=(0,et.default)(E.eventable,E.node);if(m._subtractOrigin(x),m.eventable=E.eventable,m.currentTarget=E.node,E.eventable.fire(m),m._addOrigin(x),m.immediatePropagationStopped||m.propagationStopped&&b+1<p.length&&p[b+1].node!==m.currentTarget)break}if(t.fire("pointerEvents:fired",y),f==="tap"){var A=m.double?mt({interaction:r,pointer:o,event:s,eventTarget:u,type:"doubletap"},t):m;r.prevTap=A,r.tapTime=A.timeStamp}return m}function Bo(e,t){var r=e.interaction,o=e.pointer,s=e.event,u=e.eventTarget,f=e.type,d=r.getPointerIndex(o),p=r.pointers[d];if(f==="tap"&&(r.pointerWasMoved||!p||p.downTarget!==u))return[];for(var m=G.getPath(u),y={interaction:r,pointer:o,event:s,eventTarget:u,type:f,path:m,targets:[],node:null},b=0;b<m.length;b++){var E=m[b];y.node=E,t.fire("pointerEvents:collect-targets",y)}return f==="hold"&&(y.targets=y.targets.filter(function(P){var x;return P.eventable.options.holdDuration===((x=r.pointers[d])==null?void 0:x.hold.duration)})),y.targets}function ir(e){var t=e.interaction,r=e.pointerIndex,o=t.pointers[r].hold;o&&o.timeout&&(clearTimeout(o.timeout),o.timeout=null)}var qs=nn;pi.default=qs;var rn={};function Ys(e){var t=e.interaction;t.holdIntervalHandle&&(clearInterval(t.holdIntervalHandle),t.holdIntervalHandle=null)}Object.defineProperty(rn,"__esModule",{value:!0}),rn.default=void 0;var Us={id:"pointer-events/holdRepeat",install:function(e){e.usePlugin(pi.default);var t=e.pointerEvents;t.defaults.holdRepeatInterval=0,t.types.holdrepeat=e.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(e,t){return e["pointerEvents:".concat(t)]=Ys,e},{"pointerEvents:new":function(e){var t=e.pointerEvent;t.type==="hold"&&(t.count=(t.count||0)+1)},"pointerEvents:fired":function(e,t){var r=e.interaction,o=e.pointerEvent,s=e.eventTarget,u=e.targets;if(o.type==="hold"&&u.length){var f=u[0].eventable.options.holdRepeatInterval;f<=0||(r.holdIntervalHandle=setTimeout(function(){t.pointerEvents.fire({interaction:r,eventTarget:s,type:"hold",pointer:o,event:o},t)},f))}}})};rn.default=Us;var on={};function Ws(e){return(0,z.default)(this.events.options,e),this}Object.defineProperty(on,"__esModule",{value:!0}),on.default=void 0;var Xs={id:"pointer-events/interactableTargets",install:function(e){var t=e.Interactable;t.prototype.pointerEvents=Ws;var r=t.prototype._backCompatOption;t.prototype._backCompatOption=function(o,s){var u=r.call(this,o,s);return u===this&&(this.events.options[o]=s),u}},listeners:{"pointerEvents:collect-targets":function(e,t){var r=e.targets,o=e.node,s=e.type,u=e.eventTarget;t.interactables.forEachMatch(o,function(f){var d=f.events,p=d.options;d.types[s]&&d.types[s].length&&f.testIgnoreAllow(p,o,u)&&r.push({node:o,eventable:d,props:{interactable:f}})})},"interactable:new":function(e){var t=e.interactable;t.events.getRect=function(r){return t.getRect(r)}},"interactable:set":function(e,t){var r=e.interactable,o=e.options;(0,z.default)(r.events.options,t.pointerEvents.defaults),(0,z.default)(r.events.options,o.pointerEvents||{})}}};on.default=Xs;var an={};Object.defineProperty(an,"__esModule",{value:!0}),an.default=void 0;var Vs={id:"pointer-events",install:function(e){e.usePlugin(pi),e.usePlugin(rn.default),e.usePlugin(on.default)}};an.default=Vs;var vi={};function No(e){var t=e.Interactable;e.actions.phases.reflow=!0,t.prototype.reflow=function(r){return function(o,s,u){for(var f=v.default.string(o.target)?le.from(o._context.querySelectorAll(o.target)):[o.target],d=u.window.Promise,p=d?[]:null,m=function(){var b=f[y],E=o.getRect(b);if(!E)return"break";var P=le.find(u.interactions.list,function(N){return N.interacting()&&N.interactable===o&&N.element===b&&N.prepared.name===s.name}),x=void 0;if(P)P.move(),p&&(x=P._reflowPromise||new d(function(N){P._reflowResolve=N}));else{var A=(0,K.tlbrToXywh)(E),R={page:{x:A.x,y:A.y},client:{x:A.x,y:A.y},timeStamp:u.now()},T=q.coordsToEvent(R);x=function(N,W,H,te,ce){var Q=N.interactions.new({pointerType:"reflow"}),ae={interaction:Q,event:ce,pointer:ce,eventTarget:H,phase:"reflow"};Q.interactable=W,Q.element=H,Q.prevEvent=ce,Q.updatePointer(ce,ce,H,!0),q.setZeroCoords(Q.coords.delta),(0,Le.copyAction)(Q.prepared,te),Q._doPhase(ae);var Ge=N.window.Promise,st=Ge?new Ge(function(nr){Q._reflowResolve=nr}):void 0;return Q._reflowPromise=st,Q.start(te,W,H),Q._interacting?(Q.move(ae),Q.end(ce)):(Q.stop(),Q._reflowResolve()),Q.removePointer(ce,ce),st}(u,o,b,s,T)}p&&p.push(x)},y=0;y<f.length&&m()!=="break";y++);return p&&d.all(p).then(function(){return o})}(this,r,e)}}Object.defineProperty(vi,"__esModule",{value:!0}),vi.install=No,vi.default=void 0;var Hs={id:"reflow",install:No,listeners:{"interactions:stop":function(e,t){var r=e.interaction;r.pointerType==="reflow"&&(r._reflowResolve&&r._reflowResolve(),le.remove(t.interactions.list,r))}}};vi.default=Hs;var Ne={exports:{}};function Go(e){return(Go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(Ne.exports,"__esModule",{value:!0}),Ne.exports.default=void 0,Ee.default.use(Bt.default),Ee.default.use(Ct.default),Ee.default.use(an.default),Ee.default.use(Nt.default),Ee.default.use(tn.default),Ee.default.use(Bi.default),Ee.default.use(Di.default),Ee.default.use(vt.default),Ee.default.use(vi.default);var Zs=Ee.default;if(Ne.exports.default=Zs,Go(Ne)==="object"&&Ne)try{Ne.exports=Ee.default}catch{}Ee.default.default=Ee.default,Ne=Ne.exports;var At={exports:{}};function qo(e){return(qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(At.exports,"__esModule",{value:!0}),At.exports.default=void 0;var Js=Ne.default;if(At.exports.default=Js,qo(At)==="object"&&At)try{At.exports=Ne.default}catch{}return Ne.default.default=Ne.default,At.exports})})(oa);var yl=ml(oa.exports);class bl{constructor(i){D(this,"_clickObservers",new yt);D(this,"_rightClickObservers",new yt);D(this,"_dragObservers",new yt);D(this,"_pointerMoveObservers",new yt);D(this,"_unclickObservers",new yt);D(this,"_rightUnclickObservers",new yt);D(this,"_pointerOutObservers",new yt);D(this,"_zoomObservers",new yt);D(this,"_evtCache",[]);D(this,"_oldPos",null);D(this,"_initPos",null);D(this,"_buttonDown",null);D(this,"_inGesture",!1);yl(i).gesturable({onmove:n=>{if(n.scale!==1){const a={x:n.client.x,y:n.client.y};this._zoomObservers.notify({pos:a,factor:n.scale})}n.stopPropagation()},onstart:n=>{this._inGesture=!0},onend:n=>{this._inGesture=!1}}),i.addEventListener("pointerdown",n=>{this._inGesture||this._handleTouch(n)}),document.addEventListener("pointermove",n=>{this._inGesture||this._handleDrag(n)}),document.addEventListener("pointerup",n=>{this._initPos?this._unclickObservers.notify({button:n.button,initPos:this._initPos,newPos:{x:n.clientX,y:n.clientY}}):n.button===2&&this._rightUnclickObservers.notify({x:n.clientX,y:n.clientY}),this._handleOut(n)}),document.addEventListener("pointercancel",n=>{this._handleOut(n)}),i.addEventListener("wheel",n=>{const a={x:n.clientX,y:n.clientY},l=-Math.sign(n.deltaY);this._zoomObservers.notify({pos:a,dir:l})}),i.addEventListener("contextmenu",n=>n.preventDefault())}_handleTouch(i){if(this._evtCache.push(i),this._evtCache.length===1){const n={x:i.clientX,y:i.clientY};this._buttonDown=i.button,this._oldPos=n,i.button===2?this._rightClickObservers.notify(n):i.button===0&&(this._initPos=n,this._clickObservers.notify(n))}}_handleDrag(i){const n={x:i.clientX,y:i.clientY};this._buttonDown===null?this._pointerMoveObservers.notify({oldPos:this._oldPos||{x:-1,y:-1},newPos:n}):this._buttonDown!==null&&this._oldPos&&(this._dragObservers.notify({oldPos:this._oldPos,newPos:n,button:this._buttonDown,initPos:this._initPos||{x:0,y:0}}),this._oldPos=n)}_handleOut(i){const n={x:i.clientX,y:i.clientY};this._buttonDown=null,this._pointerOutObservers.notify(n),this._evtCache=this._evtCache.filter(a=>a.pointerId!==i.pointerId),this._initPos=null}addObserver(i,n){switch(i){case"click":return this._clickObservers.subscribe(n);case"rightClick":return this._rightClickObservers.subscribe(n);case"drag":return this._dragObservers.subscribe(n);case"pointerMove":return this._pointerMoveObservers.subscribe(n);case"unclick":return this._unclickObservers.subscribe(n);case"rightUnClick":return this._rightUnclickObservers.subscribe(n);case"pointerOut":return this._pointerOutObservers.subscribe(n);case"zoom":return this._zoomObservers.subscribe(n);default:return-1}}removeObserver(i,n){switch(i){case"click":return this._clickObservers.unsubscribe(n);case"rightClick":return this._rightClickObservers.unsubscribe(n);case"drag":return this._dragObservers.unsubscribe(n);case"pointerMove":return this._pointerMoveObservers.unsubscribe(n);case"unclick":return this._unclickObservers.unsubscribe(n);case"rightUnClick":return this._rightUnclickObservers.unsubscribe(n);case"pointerOut":return this._pointerOutObservers.unsubscribe(n);case"zoom":return this._zoomObservers.unsubscribe(n);default:return null}}}class Ye{constructor(i,n,a){D(this,"_sketch");D(this,"_frames");D(this,"_cursor");this._sketch=i,this._frames=n,this._cursor=a}get drawing(){return this._frames.currentDrawing()}init(){}click(i){}rightClick(i){var n;(n=this.drawing)==null||n.erase(this._sketch.gridCoordinate(i),this._sketch.size),this._sketch.updatePreview(),this._cursor.actif=!1,this._cursor.clear(),this._sketch.dispatchUpdate()}drag(i){}move(i){}out(i){}zoom(i){this._sketch.camera.zoom(this._sketch.gridCoordinate(i.pos),i.dir,i.factor)}unClick(i){this._sketch.historyPush(),this._sketch.dispatchUpdate()}rightUnClick(i){this._sketch.historyPush(),this._sketch.dispatchUpdate()}exit(){}}class _l extends Ye{click(i){var a;const n=this._sketch.gridCoordinate(i);n.x>=0&&n.y>=0&&n.x<this._sketch.width&&n.y<this._sketch.height&&((a=this.drawing)==null||a.bucket(n,this._sketch.color),this._sketch.updatePreview())}}class wl extends Ye{drag(i){this._sketch.camera.drag(i.oldPos,i.newPos)}unClick(i){}}class xl extends Ye{click(i){var n;(n=this.drawing)==null||n.erase(this._sketch.gridCoordinate(i),this._sketch.size),this._sketch.updatePreview()}drag({newPos:i}){var n;(n=this.drawing)==null||n.erase(this._sketch.gridCoordinate(i),this._sketch.size),this._sketch.updatePreview()}}class kl extends Ye{drag({initPos:i,newPos:n}){this._cursor.actif=!0,this._cursor.clear(),this._cursor.line(this._sketch.gridCoordinate(i),this._sketch.gridCoordinate(n),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}unClick({initPos:i,newPos:n}){var a;(a=this.drawing)==null||a.line(this._sketch.gridCoordinate(i),this._sketch.gridCoordinate(n),this._sketch.size,this._sketch.color),this._sketch.updatePreview(),this._sketch.dispatchUpdate(),this._sketch.historyPush()}move(i){this._cursor.actif=!0,this._cursor.clear(),this._cursor.paint(this._sketch.gridCoordinate(i.newPos),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}}class El extends Ye{click(i){var n;(n=this.drawing)==null||n.paint(this._sketch.gridCoordinate(i),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}drag({oldPos:i,newPos:n}){var a;(a=this.drawing)==null||a.line(this._sketch.gridCoordinate(i),this._sketch.gridCoordinate(n),this._sketch.size,this._sketch.color),this._sketch.updatePreview(),this._cursor.actif=!1}move(i){this._cursor.actif=!0,this._cursor.clear(),this._cursor.paint(this._sketch.gridCoordinate(i.newPos),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}}class Sl extends Ye{click(i){this._sketch.camera.zoom(this._sketch.gridCoordinate(i),-1)}unClick(i){}}class Pl extends Ye{click(i){this._sketch.camera.zoom(this._sketch.gridCoordinate(i))}unClick(i){}}class Cl extends Ye{drag({initPos:i,newPos:n}){this._cursor.actif=!0,this._cursor.clear();const a=this._sketch.gridCoordinate(i),l=this._sketch.gridCoordinate(n);this._cursor.rect(a,l.x-a.x,l.y-a.y,this._sketch.size,this._sketch.color),this._sketch.updatePreview()}unClick({initPos:i,newPos:n}){var h;const a=this._sketch.gridCoordinate(i),l=this._sketch.gridCoordinate(n);(h=this.drawing)==null||h.rect(a,l.x-a.x,l.y-a.y,this._sketch.size,this._sketch.color),this._sketch.updatePreview(),this._sketch.dispatchUpdate(),this._sketch.historyPush()}move(i){this._cursor.actif=!0,this._cursor.clear(),this._cursor.paint(this._sketch.gridCoordinate(i.newPos),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}}class Ol extends Ye{drag({initPos:i,newPos:n}){this._cursor.actif=!0,this._cursor.clear(),this._ellipse(i,n,this._cursor)}unClick({initPos:i,newPos:n}){this.drawing&&(this._ellipse(i,n,this.drawing),this._sketch.dispatchUpdate(),this._sketch.historyPush())}move(i){this._cursor.actif=!0,this._cursor.clear(),this._cursor.paint(this._sketch.gridCoordinate(i.newPos),this._sketch.size,this._sketch.color),this._sketch.updatePreview()}_ellipse(i,n,a){const l=this._sketch.gridCoordinate(i),h=this._sketch.gridCoordinate(n),g=Math.abs(h.x-l.x),v=Math.abs(h.y-l.y),_=Math.sign(h.x-l.x),w=Math.sign(h.y-l.y),k={x:Math.floor(l.x+g/2*_),y:Math.floor(l.y+v/2*w)};a.ellipse(k,g,v,this._sketch.size,this._sketch.color),this._sketch.updatePreview()}}class Il extends Ye{constructor(){super(...arguments);D(this,"_img",null)}click(n){var a;this._img=((a=this.drawing)==null?void 0:a.getImgData())||null}drag({initPos:n,newPos:a}){var _;const l=this._sketch.gridCoordinate(n),h=this._sketch.gridCoordinate(a),g=h.x-l.x,v=h.y-l.y;this._img&&((_=this.drawing)==null||_.putDatas(this._img,g,v),this._sketch.updatePreview())}}class Al extends Ye{constructor(){super(...arguments);D(this,"_bgColor","#000000AA")}drag({initPos:n,newPos:a}){this._cursor.actif=!0,this._cursor.clear();const l=this._sketch.gridCoordinate({x:Math.min(n.x,a.x),y:Math.min(n.y,a.y)}),h=this._sketch.gridCoordinate({x:Math.max(n.x,a.x),y:Math.max(n.y,a.y)});this._cursor.fillRect({x:0,y:0},l.x,this._cursor.height,this._bgColor),this._cursor.fillRect({x:l.x,y:0},this._cursor.width,l.y,this._bgColor),this._cursor.fillRect({x:l.x,y:h.y},this._cursor.width-l.x,this._cursor.height-h.y,this._bgColor),this._cursor.fillRect({x:h.x,y:l.y},this._cursor.width-h.x,h.y-l.y,this._bgColor),this._sketch.updatePreview()}unClick({initPos:n,newPos:a}){var k,S;const l=this._sketch.gridCoordinate({x:Math.min(n.x,a.x),y:Math.min(n.y,a.y)}),h=this._sketch.gridCoordinate({x:Math.max(n.x,a.x),y:Math.max(n.y,a.y)}),g=Math.max(l.x,0),v=Math.max(l.y,0),_=Math.min(h.x-g,((k=this.drawing)==null?void 0:k.width)||0-g),w=Math.min(h.y-v,((S=this.drawing)==null?void 0:S.height)||0-v);this._cursor.clear(),_>0&&w>0&&this._sketch.crop(g,v,_,w),this._sketch.dispatchUpdate(),this._sketch.historyPush()}}class Tl extends Ye{click(i){this._sketch.dispatchEvent(new CustomEvent("inactif-click"))}unClick(i){}}class Ml{constructor(i,n,a){D(this,"_eventsManager");D(this,"_tools");D(this,"_currentTool");D(this,"_sketch");D(this,"_cursor");this._sketch=i,this._cursor=a,this._tools={paint:new El(i,n,a),erase:new xl(i,n,a),line:new kl(i,n,a),rect:new Cl(i,n,a),circle:new Ol(i,n,a),bucket:new _l(i,n,a),crop:new Al(i,n,a),zoom:new Pl(i,n,a),unzoom:new Sl(i,n,a),drag:new Il(i,n,a),handle:new wl(i,n,a),inactif:new Tl(i,n,a)},this._currentTool=this._tools.paint,this._eventsManager=new bl(i),this._addEvents()}set tool(i){this._tools[i]&&(this._currentTool.exit(),this._currentTool=this._tools[i],this._currentTool.init())}get currentTool(){return this._sketch.actif?this._currentTool:this._tools.inactif}_addEvents(){this._eventsManager.addObserver("click",i=>{this.currentTool.click(i)}),this._eventsManager.addObserver("rightClick",i=>{this.currentTool.rightClick(i)}),this._eventsManager.addObserver("unclick",i=>{this.currentTool.unClick(i)}),this._eventsManager.addObserver("rightUnClick",i=>{this.currentTool.rightUnClick(i)}),this._eventsManager.addObserver("drag",i=>{const{button:n,oldPos:a,newPos:l}=i;switch(n){case 1:this._sketch.camera.drag(a,l);break;case 2:this.currentTool.rightClick(l);break;default:this.currentTool.drag(i);break}}),this._eventsManager.addObserver("pointerMove",i=>{this.currentTool.move(i)}),this._eventsManager.addObserver("pointerOut",()=>{this._cursor.actif=!1,this._sketch.updatePreview()}),this._eventsManager.addObserver("zoom",i=>{this.currentTool.zoom(i)})}}class or{constructor(i,n,a){D(this,"layers",[]);D(this,"layerIndex",1);D(this,"_sketch");D(this,"id");this._sketch=i,this.id=n,a?a.layers.forEach(l=>{const h=new gi(this._sketch.width,this._sketch.height,l.drawing.canvas);this.layers.push({id:l.id,drawing:h})}):this.layers=[{id:1,drawing:new gi(this._sketch.width,this._sketch.height)}]}get preview(){const i=document.createElement("canvas");i.width=this._sketch.width,i.height=this._sketch.height;const n=i.getContext("2d");for(let a=this.layers.length-1;a>=0;a--){const l=this.layers[a];l.drawing.actif&&n.drawImage(l.drawing.canvas,0,0)}return i}get actif(){var i,n;return(n=(i=this.layers.find(a=>a.id===this.layerIndex))==null?void 0:i.drawing.actif)!=null?n:!1}getDatas(){const i=this.layers.map(a=>{const l=a.id,h=document.createElement("canvas");h.width=this._sketch.width,h.height=this._sketch.height,h.getContext("2d").drawImage(a.drawing.canvas,0,0);const v=a.drawing.actif;return{id:l,drawing:h,actif:v}});return{id:this.id,layers:i,layerIndex:this.layerIndex}}loadDatas(i){this.layerIndex=i.layerIndex,this.id=i.id,this.layers=i.layers.map(n=>{const a=n.id,l=n.drawing,h=new gi(l.width,l.height,l);return h.actif=n.actif,{id:a,drawing:h}})}newLayer(i,n){const a={id:i,drawing:new gi(this._sketch.width,this._sketch.height)};return this.layers.splice(n,0,a),this._sketch.historyPush(),a}selectLayer(i){this.layerIndex=i}removeLayer(i){this.layers=this.layers.filter(n=>n.id!==i),this._sketch.dispatchUpdate(),this._sketch.updatePreview(),this._sketch.historyPush()}sortLayers(i){const n=[];i.forEach(a=>{const l=this.layers.find(h=>h.id===a);l&&n.push(l)}),this.layers=n,this._sketch.dispatchUpdate()}setLayerVisible(i,n){const a=this.layers.find(l=>l.id===i);a&&(a.drawing.actif=n),this._sketch.updatePreview(),this._sketch.dispatchUpdate()}mergeLayer(i,n){const a=this.layers.find(h=>h.id===i),l=this.layers.find(h=>h.id===n);a&&l&&(l==null||l.drawing.drawImg(a==null?void 0:a.drawing.canvas),this.removeLayer(i),this.layerIndex=n)}currentLayer(){var i;return(i=this.layers.find(n=>n.id===this.layerIndex))==null?void 0:i.drawing}clear(){this.layers.forEach(i=>i.drawing.clear())}resize(i,n,a=-1,l=-1){this.layers.forEach(h=>{h.drawing.resize(i,n,a,l)})}crop(i,n,a,l){this.layers.forEach(h=>h.drawing.crop(i,n,a,l))}}class Dl{constructor(i){D(this,"frames",[]);D(this,"frameIndex",1);D(this,"_sketch");this._sketch=i}get actif(){var i,n;return(n=(i=this.currentFrame)==null?void 0:i.actif)!=null?n:!1}get currentFrame(){return this.frames.find(i=>i.id===this.frameIndex)}newFrame(i){const n=new or(this._sketch,i);return this.frames.push(n),this._sketch.historyPush(),n}selectFrame(i){this.frameIndex=i}nextFrame(){let i=this.frames.findIndex(n=>n.id===this.frameIndex);i=(i+1)%this.frames.length,this.selectFrame(this.frames[i].id)}removeFrame(i){this.frames=this.frames.filter(n=>n.id!==i),this._sketch.historyPush()}sortFrames(i){const n=[];i.forEach(a=>{const l=this.frames.find(h=>h.id===a);l&&n.push(l)}),this.frames=n}duplicate(i,n){const a=this.frames.find(l=>l.id===i);if(a){const l=new or(this._sketch,n,a);l.selectLayer(a.layerIndex),this.frames.push(l)}this._sketch.dispatchUpdate(),this._sketch.historyPush()}currentDrawing(){var i;return(i=this.currentFrame)==null?void 0:i.currentLayer()}loadDatas(i){this.frameIndex=i.selectedFrame,this.frames=i.frames.map(n=>{const a=new or(this._sketch,n.id);return a.loadDatas(n),a})}get previousFrame(){var n;const i=this.frames.findIndex(a=>a.id===this.frameIndex);return(n=this.frames[i-1])!=null?n:null}clear(){var i;(i=this.currentFrame)==null||i.clear()}resize(i,n,a=-1,l=-1){this.frames.forEach(h=>h.resize(i,n,a,l))}crop(i,n,a,l){this.frames.forEach(h=>h.crop(i,n,a,l))}}class jl{constructor(i,n){D(this,"_datas",[]);D(this,"_animation");D(this,"_sketch");D(this,"_cursor",0);this._sketch=i,this._animation=n}push(){this._cursor<this._datas.length-1&&(this._datas=this._datas.slice(0,this._cursor+1)),this._datas.push(this._sketch.getDatas()),this._cursor=this._datas.length-1}undo(){this._cursor=Math.max(0,this._cursor-1),this._loadDatas()}redo(){this._cursor=Math.min(this._cursor+1,this._datas.length-1),this._loadDatas()}_loadDatas(){const i=this._datas[this._cursor];this._sketch.resize(i.width,i.height,0,0),this._animation.loadDatas(i)}}var aa={exports:{}};(function(c,i){(function(n){c.exports=n()})(function(){return function n(a,l,h){function g(w,k){if(!l[w]){if(!a[w]){var S=typeof sn=="function"&&sn;if(!k&&S)return S(w,!0);if(v)return v(w,!0);var C=new Error("Cannot find module '"+w+"'");throw C.code="MODULE_NOT_FOUND",C}var M=l[w]={exports:{}};a[w][0].call(M.exports,function(B){var F=a[w][1][B];return g(F||B)},M,M.exports,n,a,l,h)}return l[w].exports}for(var v=typeof sn=="function"&&sn,_=0;_<h.length;_++)g(h[_]);return g}({1:[function(n,a,l){function h(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}a.exports=h,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._maxListeners=void 0,h.defaultMaxListeners=10,h.prototype.setMaxListeners=function(k){if(!v(k)||k<0||isNaN(k))throw TypeError("n must be a positive number");return this._maxListeners=k,this},h.prototype.emit=function(k){var S,C,M,B,F,I;if(this._events||(this._events={}),k==="error"&&(!this._events.error||_(this._events.error)&&!this._events.error.length)){if(S=arguments[1],S instanceof Error)throw S;var O=new Error('Uncaught, unspecified "error" event. ('+S+")");throw O.context=S,O}if(C=this._events[k],w(C))return!1;if(g(C))switch(arguments.length){case 1:C.call(this);break;case 2:C.call(this,arguments[1]);break;case 3:C.call(this,arguments[1],arguments[2]);break;default:B=Array.prototype.slice.call(arguments,1),C.apply(this,B)}else if(_(C))for(B=Array.prototype.slice.call(arguments,1),I=C.slice(),M=I.length,F=0;F<M;F++)I[F].apply(this,B);return!0},h.prototype.addListener=function(k,S){var C;if(!g(S))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",k,g(S.listener)?S.listener:S),this._events[k]?_(this._events[k])?this._events[k].push(S):this._events[k]=[this._events[k],S]:this._events[k]=S,_(this._events[k])&&!this._events[k].warned&&(w(this._maxListeners)?C=h.defaultMaxListeners:C=this._maxListeners,C&&C>0&&this._events[k].length>C&&(this._events[k].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[k].length),typeof console.trace=="function"&&console.trace())),this},h.prototype.on=h.prototype.addListener,h.prototype.once=function(k,S){if(!g(S))throw TypeError("listener must be a function");var C=!1;function M(){this.removeListener(k,M),C||(C=!0,S.apply(this,arguments))}return M.listener=S,this.on(k,M),this},h.prototype.removeListener=function(k,S){var C,M,B,F;if(!g(S))throw TypeError("listener must be a function");if(!this._events||!this._events[k])return this;if(C=this._events[k],B=C.length,M=-1,C===S||g(C.listener)&&C.listener===S)delete this._events[k],this._events.removeListener&&this.emit("removeListener",k,S);else if(_(C)){for(F=B;F-- >0;)if(C[F]===S||C[F].listener&&C[F].listener===S){M=F;break}if(M<0)return this;C.length===1?(C.length=0,delete this._events[k]):C.splice(M,1),this._events.removeListener&&this.emit("removeListener",k,S)}return this},h.prototype.removeAllListeners=function(k){var S,C;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[k]&&delete this._events[k],this;if(arguments.length===0){for(S in this._events)S!=="removeListener"&&this.removeAllListeners(S);return this.removeAllListeners("removeListener"),this._events={},this}if(C=this._events[k],g(C))this.removeListener(k,C);else if(C)for(;C.length;)this.removeListener(k,C[C.length-1]);return delete this._events[k],this},h.prototype.listeners=function(k){var S;return!this._events||!this._events[k]?S=[]:g(this._events[k])?S=[this._events[k]]:S=this._events[k].slice(),S},h.prototype.listenerCount=function(k){if(this._events){var S=this._events[k];if(g(S))return 1;if(S)return S.length}return 0},h.listenerCount=function(k,S){return k.listenerCount(S)};function g(k){return typeof k=="function"}function v(k){return typeof k=="number"}function _(k){return typeof k=="object"&&k!==null}function w(k){return k===void 0}},{}],2:[function(n,a,l){var h,g,v,_,w;w=navigator.userAgent.toLowerCase(),_=navigator.platform.toLowerCase(),h=w.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],v=h[1]==="ie"&&document.documentMode,g={name:h[1]==="version"?h[3]:h[1],version:v||parseFloat(h[1]==="opera"&&h[4]?h[4]:h[2]),platform:{name:w.match(/ip(?:ad|od|hone)/)?"ios":(w.match(/(?:webos|android)/)||_.match(/mac|win|linux/)||["other"])[0]}},g[g.name]=!0,g[g.name+parseInt(g.version,10)]=!0,g.platform[g.platform.name]=!0,a.exports=g},{}],3:[function(n,a,l){var h,g,v,_=function(C,M){for(var B in M)w.call(M,B)&&(C[B]=M[B]);function F(){this.constructor=C}return F.prototype=M.prototype,C.prototype=new F,C.__super__=M.prototype,C},w={}.hasOwnProperty,k=[].indexOf||function(C){for(var M=0,B=this.length;M<B;M++)if(M in this&&this[M]===C)return M;return-1},S=[].slice;h=n("events").EventEmitter,v=n("./browser.coffee"),g=function(C){var M,B;_(F,C),M={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},B={delay:500,copy:!1};function F(I){var O,L,Y;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(I);for(L in M)Y=M[L],(O=this.options)[L]==null&&(O[L]=Y)}return F.prototype.setOption=function(I,O){if(this.options[I]=O,this._canvas!=null&&(I==="width"||I==="height"))return this._canvas[I]=O},F.prototype.setOptions=function(I){var O,L,Y;L=[];for(O in I)!w.call(I,O)||(Y=I[O],L.push(this.setOption(O,Y)));return L},F.prototype.addFrame=function(I,O){var L,Y;O==null&&(O={}),L={},L.transparent=this.options.transparent;for(Y in B)L[Y]=O[Y]||B[Y];if(this.options.width==null&&this.setOption("width",I.width),this.options.height==null&&this.setOption("height",I.height),typeof ImageData!="undefined"&&ImageData!==null&&I instanceof ImageData)L.data=I.data;else if(typeof CanvasRenderingContext2D!="undefined"&&CanvasRenderingContext2D!==null&&I instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext!="undefined"&&WebGLRenderingContext!==null&&I instanceof WebGLRenderingContext)O.copy?L.data=this.getContextData(I):L.context=I;else if(I.childNodes!=null)O.copy?L.data=this.getImageData(I):L.image=I;else throw new Error("Invalid image");return this.frames.push(L)},F.prototype.render=function(){var I,O,L;if(this.running)throw new Error("Already running");if(this.options.width==null||this.options.height==null)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var Y,ne,J;for(J=[],Y=0,ne=this.frames.length;0<=ne?Y<ne:Y>ne;0<=ne?++Y:--Y)J.push(null);return J}.call(this),O=this.spawnWorkers(),this.options.globalPalette===!0)this.renderNextFrame();else for(I=0,L=O;0<=L?I<L:I>L;0<=L?++I:--I)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},F.prototype.abort=function(){for(var I;I=this.activeWorkers.shift(),I!=null;)this.log("killing active worker"),I.terminate();return this.running=!1,this.emit("abort")},F.prototype.spawnWorkers=function(){var I,O,L;return I=Math.min(this.options.workers,this.frames.length),function(){L=[];for(var Y=O=this.freeWorkers.length;O<=I?Y<I:Y>I;O<=I?Y++:Y--)L.push(Y);return L}.apply(this).forEach(function(Y){return function(ne){var J;return Y.log("spawning worker "+ne),J=new Worker(Y.options.workerScript),J.onmessage=function(ee){return Y.activeWorkers.splice(Y.activeWorkers.indexOf(J),1),Y.freeWorkers.push(J),Y.frameFinished(ee.data)},Y.freeWorkers.push(J)}}(this)),I},F.prototype.frameFinished=function(I){var O,L;if(this.log("frame "+I.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[I.index]=I,this.options.globalPalette===!0&&(this.options.globalPalette=I.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(O=1,L=this.freeWorkers.length;1<=L?O<L:O>L;1<=L?++O:--O)this.renderNextFrame();return k.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},F.prototype.finishRendering=function(){var I,O,L,Y,ne,J,ee,ye,G,ue,Pe,ge,je,ke,Ie,z;for(ye=0,ke=this.imageParts,ne=0,G=ke.length;ne<G;ne++)O=ke[ne],ye+=(O.data.length-1)*O.pageSize+O.cursor;for(ye+=O.pageSize-O.cursor,this.log("rendering finished - filesize "+Math.round(ye/1e3)+"kb"),I=new Uint8Array(ye),ge=0,Ie=this.imageParts,J=0,ue=Ie.length;J<ue;J++)for(O=Ie[J],z=O.data,L=ee=0,Pe=z.length;ee<Pe;L=++ee)je=z[L],I.set(je,ge),L===O.data.length-1?ge+=O.cursor:ge+=O.pageSize;return Y=new Blob([I],{type:"image/gif"}),this.emit("finished",Y,I)},F.prototype.renderNextFrame=function(){var I,O,L;if(this.freeWorkers.length===0)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return I=this.frames[this.nextFrame++],L=this.freeWorkers.shift(),O=this.getTask(I),this.log("starting frame "+(O.index+1)+" of "+this.frames.length),this.activeWorkers.push(L),L.postMessage(O)},F.prototype.getContextData=function(I){return I.getImageData(0,0,this.options.width,this.options.height).data},F.prototype.getImageData=function(I){var O;return this._canvas==null&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),O=this._canvas.getContext("2d"),O.setFill=this.options.background,O.fillRect(0,0,this.options.width,this.options.height),O.drawImage(I,0,0),this.getContextData(O)},F.prototype.getTask=function(I){var O,L;if(O=this.frames.indexOf(I),L={index:O,last:O===this.frames.length-1,delay:I.delay,transparent:I.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:v.name==="chrome"},I.data!=null)L.data=I.data;else if(I.context!=null)L.data=this.getContextData(I.context);else if(I.image!=null)L.data=this.getImageData(I.image);else throw new Error("Invalid frame");return L},F.prototype.log=function(){var I;if(I=1<=arguments.length?S.call(arguments,0):[],!!this.options.debug)return console.log.apply(console,I)},F}(h),a.exports=g},{"./browser.coffee":2,events:1}]},{},[3])(3)})})(aa);var Ll=aa.exports;const Fl=`// gif.worker.js 0.2.0 - https://github.com/jnordberg/gif.js
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var NeuQuant=require("./TypedNeuQuant.js");var LZWEncoder=require("./LZWEncoder.js");function ByteArray(){this.page=-1;this.pages=[];this.newPage()}ByteArray.pageSize=4096;ByteArray.charMap={};for(var i=0;i<256;i++)ByteArray.charMap[i]=String.fromCharCode(i);ByteArray.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(ByteArray.pageSize);this.cursor=0};ByteArray.prototype.getData=function(){var rv="";for(var p=0;p<this.pages.length;p++){for(var i=0;i<ByteArray.pageSize;i++){rv+=ByteArray.charMap[this.pages[p][i]]}}return rv};ByteArray.prototype.writeByte=function(val){if(this.cursor>=ByteArray.pageSize)this.newPage();this.pages[this.page][this.cursor++]=val};ByteArray.prototype.writeUTFBytes=function(string){for(var l=string.length,i=0;i<l;i++)this.writeByte(string.charCodeAt(i))};ByteArray.prototype.writeBytes=function(array,offset,length){for(var l=length||array.length,i=offset||0;i<l;i++)this.writeByte(array[i])};function GIFEncoder(width,height){this.width=~~width;this.height=~~height;this.transparent=null;this.transIndex=0;this.repeat=-1;this.delay=0;this.image=null;this.pixels=null;this.indexedPixels=null;this.colorDepth=null;this.colorTab=null;this.neuQuant=null;this.usedEntry=new Array;this.palSize=7;this.dispose=-1;this.firstFrame=true;this.sample=10;this.dither=false;this.globalPalette=false;this.out=new ByteArray}GIFEncoder.prototype.setDelay=function(milliseconds){this.delay=Math.round(milliseconds/10)};GIFEncoder.prototype.setFrameRate=function(fps){this.delay=Math.round(100/fps)};GIFEncoder.prototype.setDispose=function(disposalCode){if(disposalCode>=0)this.dispose=disposalCode};GIFEncoder.prototype.setRepeat=function(repeat){this.repeat=repeat};GIFEncoder.prototype.setTransparent=function(color){this.transparent=color};GIFEncoder.prototype.addFrame=function(imageData){this.image=imageData;this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null;this.getImagePixels();this.analyzePixels();if(this.globalPalette===true)this.globalPalette=this.colorTab;if(this.firstFrame){this.writeLSD();this.writePalette();if(this.repeat>=0){this.writeNetscapeExt()}}this.writeGraphicCtrlExt();this.writeImageDesc();if(!this.firstFrame&&!this.globalPalette)this.writePalette();this.writePixels();this.firstFrame=false};GIFEncoder.prototype.finish=function(){this.out.writeByte(59)};GIFEncoder.prototype.setQuality=function(quality){if(quality<1)quality=1;this.sample=quality};GIFEncoder.prototype.setDither=function(dither){if(dither===true)dither="FloydSteinberg";this.dither=dither};GIFEncoder.prototype.setGlobalPalette=function(palette){this.globalPalette=palette};GIFEncoder.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};GIFEncoder.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};GIFEncoder.prototype.analyzePixels=function(){if(!this.colorTab){this.neuQuant=new NeuQuant(this.pixels,this.sample);this.neuQuant.buildColormap();this.colorTab=this.neuQuant.getColormap()}if(this.dither){this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null)}else{this.indexPixels()}this.pixels=null;this.colorDepth=8;this.palSize=7;if(this.transparent!==null){this.transIndex=this.findClosest(this.transparent,true)}};GIFEncoder.prototype.indexPixels=function(imgq){var nPix=this.pixels.length/3;this.indexedPixels=new Uint8Array(nPix);var k=0;for(var j=0;j<nPix;j++){var index=this.findClosestRGB(this.pixels[k++]&255,this.pixels[k++]&255,this.pixels[k++]&255);this.usedEntry[index]=true;this.indexedPixels[j]=index}};GIFEncoder.prototype.ditherPixels=function(kernel,serpentine){var kernels={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[2/8,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!kernel||!kernels[kernel]){throw"Unknown dithering kernel: "+kernel}var ds=kernels[kernel];var index=0,height=this.height,width=this.width,data=this.pixels;var direction=serpentine?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var y=0;y<height;y++){if(serpentine)direction=direction*-1;for(var x=direction==1?0:width-1,xend=direction==1?width:0;x!==xend;x+=direction){index=y*width+x;var idx=index*3;var r1=data[idx];var g1=data[idx+1];var b1=data[idx+2];idx=this.findClosestRGB(r1,g1,b1);this.usedEntry[idx]=true;this.indexedPixels[index]=idx;idx*=3;var r2=this.colorTab[idx];var g2=this.colorTab[idx+1];var b2=this.colorTab[idx+2];var er=r1-r2;var eg=g1-g2;var eb=b1-b2;for(var i=direction==1?0:ds.length-1,end=direction==1?ds.length:0;i!==end;i+=direction){var x1=ds[i][1];var y1=ds[i][2];if(x1+x>=0&&x1+x<width&&y1+y>=0&&y1+y<height){var d=ds[i][0];idx=index+x1+y1*width;idx*=3;data[idx]=Math.max(0,Math.min(255,data[idx]+er*d));data[idx+1]=Math.max(0,Math.min(255,data[idx+1]+eg*d));data[idx+2]=Math.max(0,Math.min(255,data[idx+2]+eb*d))}}}}};GIFEncoder.prototype.findClosest=function(c,used){return this.findClosestRGB((c&16711680)>>16,(c&65280)>>8,c&255,used)};GIFEncoder.prototype.findClosestRGB=function(r,g,b,used){if(this.colorTab===null)return-1;if(this.neuQuant&&!used){return this.neuQuant.lookupRGB(r,g,b)}var c=b|g<<8|r<<16;var minpos=0;var dmin=256*256*256;var len=this.colorTab.length;for(var i=0,index=0;i<len;index++){var dr=r-(this.colorTab[i++]&255);var dg=g-(this.colorTab[i++]&255);var db=b-(this.colorTab[i++]&255);var d=dr*dr+dg*dg+db*db;if((!used||this.usedEntry[index])&&d<dmin){dmin=d;minpos=index}}return minpos};GIFEncoder.prototype.getImagePixels=function(){var w=this.width;var h=this.height;this.pixels=new Uint8Array(w*h*3);var data=this.image;var srcPos=0;var count=0;for(var i=0;i<h;i++){for(var j=0;j<w;j++){this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];srcPos++}}};GIFEncoder.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33);this.out.writeByte(249);this.out.writeByte(4);var transp,disp;if(this.transparent===null){transp=0;disp=0}else{transp=1;disp=2}if(this.dispose>=0){disp=dispose&7}disp<<=2;this.out.writeByte(0|disp|0|transp);this.writeShort(this.delay);this.out.writeByte(this.transIndex);this.out.writeByte(0)};GIFEncoder.prototype.writeImageDesc=function(){this.out.writeByte(44);this.writeShort(0);this.writeShort(0);this.writeShort(this.width);this.writeShort(this.height);if(this.firstFrame||this.globalPalette){this.out.writeByte(0)}else{this.out.writeByte(128|0|0|0|this.palSize)}};GIFEncoder.prototype.writeLSD=function(){this.writeShort(this.width);this.writeShort(this.height);this.out.writeByte(128|112|0|this.palSize);this.out.writeByte(0);this.out.writeByte(0)};GIFEncoder.prototype.writeNetscapeExt=function(){this.out.writeByte(33);this.out.writeByte(255);this.out.writeByte(11);this.out.writeUTFBytes("NETSCAPE2.0");this.out.writeByte(3);this.out.writeByte(1);this.writeShort(this.repeat);this.out.writeByte(0)};GIFEncoder.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);var n=3*256-this.colorTab.length;for(var i=0;i<n;i++)this.out.writeByte(0)};GIFEncoder.prototype.writeShort=function(pValue){this.out.writeByte(pValue&255);this.out.writeByte(pValue>>8&255)};GIFEncoder.prototype.writePixels=function(){var enc=new LZWEncoder(this.width,this.height,this.indexedPixels,this.colorDepth);enc.encode(this.out)};GIFEncoder.prototype.stream=function(){return this.out};module.exports=GIFEncoder},{"./LZWEncoder.js":2,"./TypedNeuQuant.js":3}],2:[function(require,module,exports){var EOF=-1;var BITS=12;var HSIZE=5003;var masks=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function LZWEncoder(width,height,pixels,colorDepth){var initCodeSize=Math.max(2,colorDepth);var accum=new Uint8Array(256);var htab=new Int32Array(HSIZE);var codetab=new Int32Array(HSIZE);var cur_accum,cur_bits=0;var a_count;var free_ent=0;var maxcode;var clear_flg=false;var g_init_bits,ClearCode,EOFCode;function char_out(c,outs){accum[a_count++]=c;if(a_count>=254)flush_char(outs)}function cl_block(outs){cl_hash(HSIZE);free_ent=ClearCode+2;clear_flg=true;output(ClearCode,outs)}function cl_hash(hsize){for(var i=0;i<hsize;++i)htab[i]=-1}function compress(init_bits,outs){var fcode,c,i,ent,disp,hsize_reg,hshift;g_init_bits=init_bits;clear_flg=false;n_bits=g_init_bits;maxcode=MAXCODE(n_bits);ClearCode=1<<init_bits-1;EOFCode=ClearCode+1;free_ent=ClearCode+2;a_count=0;ent=nextPixel();hshift=0;for(fcode=HSIZE;fcode<65536;fcode*=2)++hshift;hshift=8-hshift;hsize_reg=HSIZE;cl_hash(hsize_reg);output(ClearCode,outs);outer_loop:while((c=nextPixel())!=EOF){fcode=(c<<BITS)+ent;i=c<<hshift^ent;if(htab[i]===fcode){ent=codetab[i];continue}else if(htab[i]>=0){disp=hsize_reg-i;if(i===0)disp=1;do{if((i-=disp)<0)i+=hsize_reg;if(htab[i]===fcode){ent=codetab[i];continue outer_loop}}while(htab[i]>=0)}output(ent,outs);ent=c;if(free_ent<1<<BITS){codetab[i]=free_ent++;htab[i]=fcode}else{cl_block(outs)}}output(ent,outs);output(EOFCode,outs)}function encode(outs){outs.writeByte(initCodeSize);remaining=width*height;curPixel=0;compress(initCodeSize+1,outs);outs.writeByte(0)}function flush_char(outs){if(a_count>0){outs.writeByte(a_count);outs.writeBytes(accum,0,a_count);a_count=0}}function MAXCODE(n_bits){return(1<<n_bits)-1}function nextPixel(){if(remaining===0)return EOF;--remaining;var pix=pixels[curPixel++];return pix&255}function output(code,outs){cur_accum&=masks[cur_bits];if(cur_bits>0)cur_accum|=code<<cur_bits;else cur_accum=code;cur_bits+=n_bits;while(cur_bits>=8){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}if(free_ent>maxcode||clear_flg){if(clear_flg){maxcode=MAXCODE(n_bits=g_init_bits);clear_flg=false}else{++n_bits;if(n_bits==BITS)maxcode=1<<BITS;else maxcode=MAXCODE(n_bits)}}if(code==EOFCode){while(cur_bits>0){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}flush_char(outs)}}this.encode=encode}module.exports=LZWEncoder},{}],3:[function(require,module,exports){var ncycles=100;var netsize=256;var maxnetpos=netsize-1;var netbiasshift=4;var intbiasshift=16;var intbias=1<<intbiasshift;var gammashift=10;var gamma=1<<gammashift;var betashift=10;var beta=intbias>>betashift;var betagamma=intbias<<gammashift-betashift;var initrad=netsize>>3;var radiusbiasshift=6;var radiusbias=1<<radiusbiasshift;var initradius=initrad*radiusbias;var radiusdec=30;var alphabiasshift=10;var initalpha=1<<alphabiasshift;var alphadec;var radbiasshift=8;var radbias=1<<radbiasshift;var alpharadbshift=alphabiasshift+radbiasshift;var alpharadbias=1<<alpharadbshift;var prime1=499;var prime2=491;var prime3=487;var prime4=503;var minpicturebytes=3*prime4;function NeuQuant(pixels,samplefac){var network;var netindex;var bias;var freq;var radpower;function init(){network=[];netindex=new Int32Array(256);bias=new Int32Array(netsize);freq=new Int32Array(netsize);radpower=new Int32Array(netsize>>3);var i,v;for(i=0;i<netsize;i++){v=(i<<netbiasshift+8)/netsize;network[i]=new Float64Array([v,v,v,0]);freq[i]=intbias/netsize;bias[i]=0}}function unbiasnet(){for(var i=0;i<netsize;i++){network[i][0]>>=netbiasshift;network[i][1]>>=netbiasshift;network[i][2]>>=netbiasshift;network[i][3]=i}}function altersingle(alpha,i,b,g,r){network[i][0]-=alpha*(network[i][0]-b)/initalpha;network[i][1]-=alpha*(network[i][1]-g)/initalpha;network[i][2]-=alpha*(network[i][2]-r)/initalpha}function alterneigh(radius,i,b,g,r){var lo=Math.abs(i-radius);var hi=Math.min(i+radius,netsize);var j=i+1;var k=i-1;var m=1;var p,a;while(j<hi||k>lo){a=radpower[m++];if(j<hi){p=network[j++];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}if(k>lo){p=network[k--];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}}}function contest(b,g,r){var bestd=~(1<<31);var bestbiasd=bestd;var bestpos=-1;var bestbiaspos=bestpos;var i,n,dist,biasdist,betafreq;for(i=0;i<netsize;i++){n=network[i];dist=Math.abs(n[0]-b)+Math.abs(n[1]-g)+Math.abs(n[2]-r);if(dist<bestd){bestd=dist;bestpos=i}biasdist=dist-(bias[i]>>intbiasshift-netbiasshift);if(biasdist<bestbiasd){bestbiasd=biasdist;bestbiaspos=i}betafreq=freq[i]>>betashift;freq[i]-=betafreq;bias[i]+=betafreq<<gammashift}freq[bestpos]+=beta;bias[bestpos]-=betagamma;return bestbiaspos}function inxbuild(){var i,j,p,q,smallpos,smallval,previouscol=0,startpos=0;for(i=0;i<netsize;i++){p=network[i];smallpos=i;smallval=p[1];for(j=i+1;j<netsize;j++){q=network[j];if(q[1]<smallval){smallpos=j;smallval=q[1]}}q=network[smallpos];if(i!=smallpos){j=q[0];q[0]=p[0];p[0]=j;j=q[1];q[1]=p[1];p[1]=j;j=q[2];q[2]=p[2];p[2]=j;j=q[3];q[3]=p[3];p[3]=j}if(smallval!=previouscol){netindex[previouscol]=startpos+i>>1;for(j=previouscol+1;j<smallval;j++)netindex[j]=i;previouscol=smallval;startpos=i}}netindex[previouscol]=startpos+maxnetpos>>1;for(j=previouscol+1;j<256;j++)netindex[j]=maxnetpos}function inxsearch(b,g,r){var a,p,dist;var bestd=1e3;var best=-1;var i=netindex[g];var j=i-1;while(i<netsize||j>=0){if(i<netsize){p=network[i];dist=p[1]-g;if(dist>=bestd)i=netsize;else{i++;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}if(j>=0){p=network[j];dist=g-p[1];if(dist>=bestd)j=-1;else{j--;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}}return best}function learn(){var i;var lengthcount=pixels.length;var alphadec=30+(samplefac-1)/3;var samplepixels=lengthcount/(3*samplefac);var delta=~~(samplepixels/ncycles);var alpha=initalpha;var radius=initradius;var rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(i=0;i<rad;i++)radpower[i]=alpha*((rad*rad-i*i)*radbias/(rad*rad));var step;if(lengthcount<minpicturebytes){samplefac=1;step=3}else if(lengthcount%prime1!==0){step=3*prime1}else if(lengthcount%prime2!==0){step=3*prime2}else if(lengthcount%prime3!==0){step=3*prime3}else{step=3*prime4}var b,g,r,j;var pix=0;i=0;while(i<samplepixels){b=(pixels[pix]&255)<<netbiasshift;g=(pixels[pix+1]&255)<<netbiasshift;r=(pixels[pix+2]&255)<<netbiasshift;j=contest(b,g,r);altersingle(alpha,j,b,g,r);if(rad!==0)alterneigh(rad,j,b,g,r);pix+=step;if(pix>=lengthcount)pix-=lengthcount;i++;if(delta===0)delta=1;if(i%delta===0){alpha-=alpha/alphadec;radius-=radius/radiusdec;rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(j=0;j<rad;j++)radpower[j]=alpha*((rad*rad-j*j)*radbias/(rad*rad))}}}function buildColormap(){init();learn();unbiasnet();inxbuild()}this.buildColormap=buildColormap;function getColormap(){var map=[];var index=[];for(var i=0;i<netsize;i++)index[network[i][3]]=i;var k=0;for(var l=0;l<netsize;l++){var j=index[l];map[k++]=network[j][0];map[k++]=network[j][1];map[k++]=network[j][2]}return map}this.getColormap=getColormap;this.lookupRGB=inxsearch}module.exports=NeuQuant},{}],4:[function(require,module,exports){var GIFEncoder,renderFrame;GIFEncoder=require("./GIFEncoder.js");renderFrame=function(frame){var encoder,page,stream,transfer;encoder=new GIFEncoder(frame.width,frame.height);if(frame.index===0){encoder.writeHeader()}else{encoder.firstFrame=false}encoder.setTransparent(frame.transparent);encoder.setRepeat(frame.repeat);encoder.setDelay(frame.delay);encoder.setQuality(frame.quality);encoder.setDither(frame.dither);encoder.setGlobalPalette(frame.globalPalette);encoder.addFrame(frame.data);if(frame.last){encoder.finish()}if(frame.globalPalette===true){frame.globalPalette=encoder.getGlobalPalette()}stream=encoder.stream();frame.data=stream.pages;frame.cursor=stream.cursor;frame.pageSize=stream.constructor.pageSize;if(frame.canTransfer){transfer=function(){var i,len,ref,results;ref=frame.data;results=[];for(i=0,len=ref.length;i<len;i++){page=ref[i];results.push(page.buffer)}return results}();return self.postMessage(frame,transfer)}else{return self.postMessage(frame)}};self.onmessage=function(event){return renderFrame(event.data)}},{"./GIFEncoder.js":1}]},{},[4]);
//# sourceMappingURL=gif.worker.js.map`,Rl=new Blob([Fl],{type:"application/javascript"}),zl=URL.createObjectURL(Rl);function Bl(c,i,n,a=1){const l=new Ll({workers:4,workerScript:zl,dither:"FloydSteinberg"});l.on("finished",function(h){const g=URL.createObjectURL(h),v=document.createElement("a");v.download=c+".gif",v.href=g,v.click()}),Nl(l,i,n,a),l.render()}function Nl(c,i,n,a=1){const l=1e3/n,h=document.createElement("canvas");h.style.setProperty("-webkit-optimize-contrast","pixelated"),h.style.setProperty("-ms-interpolation-mode","nearest-neighbor"),h.style.setProperty("image-rendering","crisp-edges"),h.style.setProperty("image-rendering","pixelated"),h.width=i[0].width*a,h.height=i[0].height*a;const g=h.getContext("2d");g.imageSmoothingEnabled=!1,g.fillStyle="#ffff",i.forEach(v=>{g.fillRect(0,0,h.width,h.height),g.drawImage(v,0,0,h.width,h.height),c.addFrame(h,{copy:!0,delay:l})})}function Gl(c,i,n,a,l){const h=i[0].width*n,g=i[0].height*n,v=ql(h,g,a,l),_=v.getContext("2d");_.imageSmoothingEnabled=!1,Yl(i,a,_,h,g),Ul(c,v)}function ql(c,i,n,a){const l=document.createElement("canvas");return l.style.setProperty("-webkit-optimize-contrast","pixelated"),l.style.setProperty("-ms-interpolation-mode","nearest-neighbor"),l.style.setProperty("image-rendering","crisp-edges"),l.style.setProperty("image-rendering","pixelated"),l.width=c*n,l.height=i*a,l}function Yl(c,i,n,a,l){for(let h=0;h<c.length;h++){const g=Math.floor(h/i),v=g===0?h:h%i;n.drawImage(c[h],v*a,g*l,a,l)}}function Ul(c,i){const n=document.createElement("a");n.download=c+".png",n.href=i.toDataURL("image/png"),n.click()}function Wl(c,i){const n=Xl(i);Vl(c,JSON.stringify(n))}function Xl(c){const i=c.width,n=c.height,a=c.frames.map(l=>l.layers.map(g=>g.drawing.toDataURL()));return{width:i,height:n,frames:a}}function Vl(c,i){const n="data:application/json;charset=utf-8,"+encodeURIComponent(i),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",c),a.click()}function Hl(c,i){const n=JSON.parse(c);i.resize(n.width,n.height,0,0),i.animation.frames=[];const a=[];for(let l=0;l<n.frames.length;l++){const h=i.animation.newFrame(l+1);h.layers=[];const g=n.frames[l];g.forEach((v,_)=>{const w=h.newLayer(g.length-_,_),k=new Promise(S=>{const C=new Image;C.onload=()=>{w.drawing.drawImg(C),S(C)},C.src=v});a.push(k)}),h.selectLayer(1)}Promise.all(a).then(()=>{i.dispatchLoadFile(),i.updatePreview(),i.historyPush()})}class Zl extends HTMLElement{constructor(){super();D(this,"_canvas");D(this,"_ctx");D(this,"animation");D(this,"_cursor");D(this,"_background");D(this,"camera");D(this,"size",1);D(this,"color","#000000");D(this,"_tools");D(this,"_history");D(this,"onion",!1);D(this,"_animationFrame",null);D(this,"_nextFrame",null);D(this,"playing",!1);D(this,"_savedFrame",null);D(this,"fps",5);this._canvas=this._createCanvas(),this._ctx=this._canvas.getContext("2d"),this.animation=new Dl(this),this._cursor=new gi(this.width,this.height),this._background=new gl(this.width,this.height),this.camera=new fl(this,this._canvas),this._tools=new Ml(this,this.animation,this._cursor),this._history=new jl(this,this.animation)}connectedCallback(){this.camera.fitSketch(),this.updatePreview()}_createCanvas(){const n=this.attachShadow({mode:"open"}),a=document.createElement("canvas");a.width=8,a.height=8;const l=document.createElement("style");return l.textContent=`
        canvas{
			-webkit-optimize-contrast: pixelated;
			-ms-interpolation-mode: nearest-neighbor;
			image-rendering: crisp-edges;  
			image-rendering: pixelated;    
			background-color: #ffff;
			cursor:crosshair;
			pointer-events:none;
        }
        `,n.appendChild(a),n.appendChild(l),a}get width(){return this._canvas.width}get height(){return this._canvas.height}set tool(n){this._tools.tool=n}get actif(){return this.animation.actif&&!this.playing}static get observedAttributes(){return["width","height"]}crop(n,a,l,h){this._canvas.width=l,this._canvas.height=h,this.animation.crop(n,a,l,h),this._cursor.resize(l,h),this._background.resize(l,h),this._background.clear(),this.camera.fitSketch(),this.updatePreview(),this.dispatchUpdate()}resize(n,a,l,h){this._canvas.width=n,this._canvas.height=a,this.animation.resize(n,a,l,h),this._cursor.resize(n,a),this._background.resize(n,a),this._background.clear(),this.camera.fitSketch(),this.updatePreview(),this.dispatchUpdate()}attributeChangedCallback(n,a,l){if(!l||isNaN(Number(l)))return;const h=Number(l);switch(n){case"width":h>=1&&(this._canvas.width=h,this.animation.resize(h,this._canvas.height),this._cursor.resize(h,this._canvas.height),this._background.resize(h,this._canvas.height),this._background.clear(),this.camera.fitSketch(),this.updatePreview());break;case"height":this._canvas.height=h,this.animation.resize(this._canvas.width,h),this._cursor.resize(this._canvas.width,h),this._background.resize(this._canvas.width,h),this._background.clear(),this.camera.fitSketch(),this.updatePreview();break;default:return}}updatePreview(){var a;const n=(a=this.animation.previousFrame)==null?void 0:a.preview;this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._ctx.drawImage(this._background.canvas,0,0),this._ctx.globalAlpha=.4,this.onion&&n&&!this.playing&&this._ctx.drawImage(n,0,0),this._ctx.globalAlpha=1,this.animation.currentFrame&&this._ctx.drawImage(this.animation.currentFrame.preview,0,0),this._ctx.drawImage(this._cursor.canvas,0,0)}clear(){this._background.clear(),this.animation.clear(),this._cursor.clear(),this.updatePreview(),this.dispatchUpdate(),this.historyPush()}historyPush(){this._history.push()}undo(){this._history.undo(),this.updatePreview()}redo(){this._history.redo(),this.updatePreview()}gridCoordinate({x:n,y:a}){const{left:l,top:h}=this._canvas.getBoundingClientRect(),g=(n-l)/this.camera.zoomValue,v=(a-h)/this.camera.zoomValue;return{x:Math.floor(g),y:Math.floor(v)}}dispatchUpdate(){this.dispatchEvent(new CustomEvent("update"))}dispatchLoadFile(){this.dispatchEvent(new CustomEvent("load"))}stop(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._savedFrame&&this.animation.selectFrame(this._savedFrame),this.updatePreview()),this.playing=!1}play(){var n,a;this._nextFrame=window.performance.now(),this._savedFrame=(a=(n=this.animation.currentFrame)==null?void 0:n.id)!=null?a:1,this._loop(),this.playing=!0}download(n,a,l,h,g){const v=this.animation.frames.map(_=>_.preview);switch(a){case"gif":Bl(n,v,this.fps,l);break;case"png":Gl(n,v,l,h,g);break;case"json":Wl(n,this.getDatas());break}}loadJson(n){Hl(n,this)}getDatas(){const n=this.width,a=this.height,l=this.animation.frameIndex,h=this.animation.frames.map(g=>g.getDatas());return{width:n,height:a,selectedFrame:l,frames:h}}_loop(){var a;this._animationFrame=requestAnimationFrame(()=>this._loop());const n=window.performance.now();this._nextFrame=(a=this._nextFrame)!=null?a:n,!(n<this._nextFrame)&&(this.animation.nextFrame(),this.updatePreview(),this._nextFrame+=1e3/this.fps,this.updatePreview())}}class Jl{static init(i,n){document.querySelectorAll(i).forEach(l=>{l.addEventListener("click",h=>{n.tool=l.value})})}}class Ql{static init(i,n){const a=document.querySelector(i),l=a==null?void 0:a.querySelector("input"),h=a==null?void 0:a.querySelector("label");l==null||l.addEventListener("input",g=>{const v=l==null?void 0:l.valueAsNumber;h&&(h.innerHTML=`size : <i>${v} px</i>`),n.size=v})}}const Kl={resize:{fr:"Redimensionner"},width:{fr:"Largeur"},height:{fr:"Hauteur"},px:{fr:"px"},"Edition impossible":{fr:"Edition impossible"},inactiveClick:{fr:"Pour pouvoir utiliser cette fonctionnalit\xE9 le calque doit \xEAtre actif et l'animation doit \xEAtre stopp\xE9e.",en:"To use this feature the layer must be active and the animation must be stopped."},pencil:{fr:"Crayon"},eraser:{fr:"Gomme"},line:{fr:"Ligne"},rect:{fr:"Rectangle"},circle:{fr:"Cercle"},bucket:{fr:"Pot de peinture"},drag:{fr:"D\xE9placer"},crop:{fr:"Recadrer"},zoom:{fr:"Zoom"},unzoom:{fr:"D\xE9zoom"},handle:{fr:"Glisser"},"Set size to 1px":{fr:"D\xE9finir la taille \xE0 1px"},"Set size to 2px":{fr:"D\xE9finir la taille \xE0 2px"},"Set size to 3px":{fr:"D\xE9finir la taille \xE0 3px"},"Set size to 4px":{fr:"D\xE9finir la taille \xE0 4px"},"Choose a color":{fr:"Choisir une couleur"},"fit to screen size":{fr:"Ajuster \xE0 l'\xE9cran"},undo:{fr:"Annuler"},redo:{fr:"R\xE9tablir"},clear:{fr:"Effacer"},open:{fr:"Ouvrir"},save:{fr:"Enregistrer"},download:{fr:"T\xE9l\xE9charger"},Layers:{fr:"Calques"},Layer:{fr:"Calque"},"add layer":{fr:"Ajouter un calque"},"remove layer":{fr:"Supprimer un calque"},"merge layer":{fr:"Fusionner les calques"},"add frame":{fr:"Nouvelle image"},"remove frame":{fr:"Supprimer l'image"},"If you leave before saving, your changes will be lost.":{fr:"Si vous quittez avant d'enregistrer, vos modifications seront perdues."},"Onion skin":{fr:"Pelure d'oignon"},Play:{fr:"Lire l'animation"},"File Name":{fr:"Nom du fichier"},Scale:{fr:"\xC9chelle"},Columns:{fr:"Colonnes"},Rows:{fr:"Rang\xE9es"}},$l=window.location.search,ec=new URLSearchParams($l),Wo=ec.get("lang");function Pi(c){var n;const i=Kl[c];return Wo&&(n=i==null?void 0:i[Wo])!=null?n:null}class sa{static init(){document.querySelectorAll("[tooltip-text]").forEach(n=>{const a=n.getAttribute("tooltip-text");if(a){const l=Pi(a);l&&n.setAttribute("tooltip-text",l)}})}}function tc(c,i){for(var n=0;n<i.length;n++){var a=i[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(c,a.key,a)}}function ln(c){return function(i){if(Array.isArray(i))return ar(i)}(c)||function(i){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(i))return Array.from(i)}(c)||function(i,n){if(!!i){if(typeof i=="string")return ar(i,n);var a=Object.prototype.toString.call(i).slice(8,-1);if(a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set")return Array.from(i);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ar(i,n)}}(c)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ar(c,i){(i==null||i>c.length)&&(i=c.length);for(var n=0,a=new Array(i);n<i;n++)a[n]=c[n];return a}var Xo,sr,Tt,lr,Vo,He=(Xo=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],sr=function(){function c(a){var l=a.targetModal,h=a.triggers,g=h===void 0?[]:h,v=a.onShow,_=v===void 0?function(){}:v,w=a.onClose,k=w===void 0?function(){}:w,S=a.openTrigger,C=S===void 0?"data-micromodal-trigger":S,M=a.closeTrigger,B=M===void 0?"data-micromodal-close":M,F=a.openClass,I=F===void 0?"is-open":F,O=a.disableScroll,L=O!==void 0&&O,Y=a.disableFocus,ne=Y!==void 0&&Y,J=a.awaitCloseAnimation,ee=J!==void 0&&J,ye=a.awaitOpenAnimation,G=ye!==void 0&&ye,ue=a.debugMode,Pe=ue!==void 0&&ue;(function(ge,je){if(!(ge instanceof je))throw new TypeError("Cannot call a class as a function")})(this,c),this.modal=document.getElementById(l),this.config={debugMode:Pe,disableScroll:L,openTrigger:C,closeTrigger:B,openClass:I,onShow:_,onClose:k,awaitCloseAnimation:ee,awaitOpenAnimation:G,disableFocus:ne},g.length>0&&this.registerTriggers.apply(this,ln(g)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var i,n;return i=c,(n=[{key:"registerTriggers",value:function(){for(var a=this,l=arguments.length,h=new Array(l),g=0;g<l;g++)h[g]=arguments[g];h.filter(Boolean).forEach(function(v){v.addEventListener("click",function(_){return a.showModal(_)})})}},{key:"showModal",value:function(){var a=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){var h=function g(){a.modal.removeEventListener("animationend",g,!1),a.setFocusToFirstNode()};this.modal.addEventListener("animationend",h,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,l)}},{key:"closeModal",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,l=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,a),this.config.awaitCloseAnimation){var h=this.config.openClass;this.modal.addEventListener("animationend",function g(){l.classList.remove(h),l.removeEventListener("animationend",g,!1)},!1)}else l.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(a){this.modal=document.getElementById(a),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(a){if(this.config.disableScroll){var l=document.querySelector("body");switch(a){case"enable":Object.assign(l.style,{overflow:""});break;case"disable":Object.assign(l.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(a){(a.target.hasAttribute(this.config.closeTrigger)||a.target.parentNode.hasAttribute(this.config.closeTrigger))&&(a.preventDefault(),a.stopPropagation(),this.closeModal(a))}},{key:"onKeydown",value:function(a){a.keyCode===27&&this.closeModal(a),a.keyCode===9&&this.retainFocus(a)}},{key:"getFocusableNodes",value:function(){var a=this.modal.querySelectorAll(Xo);return Array.apply(void 0,ln(a))}},{key:"setFocusToFirstNode",value:function(){var a=this;if(!this.config.disableFocus){var l=this.getFocusableNodes();if(l.length!==0){var h=l.filter(function(g){return!g.hasAttribute(a.config.closeTrigger)});h.length>0&&h[0].focus(),h.length===0&&l[0].focus()}}}},{key:"retainFocus",value:function(a){var l=this.getFocusableNodes();if(l.length!==0)if(l=l.filter(function(g){return g.offsetParent!==null}),this.modal.contains(document.activeElement)){var h=l.indexOf(document.activeElement);a.shiftKey&&h===0&&(l[l.length-1].focus(),a.preventDefault()),!a.shiftKey&&l.length>0&&h===l.length-1&&(l[0].focus(),a.preventDefault())}else l[0].focus()}}])&&tc(i.prototype,n),c}(),Tt=null,lr=function(c){if(!document.getElementById(c))return console.warn("MicroModal: \u2757Seems like you have missed %c'".concat(c,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(c,'"></div>')),!1},Vo=function(c,i){if(function(a){a.length<=0&&(console.warn("MicroModal: \u2757Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(c),!i)return!0;for(var n in i)lr(n);return!0},{init:function(c){var i=Object.assign({},{openTrigger:"data-micromodal-trigger"},c),n=ln(document.querySelectorAll("[".concat(i.openTrigger,"]"))),a=function(g,v){var _=[];return g.forEach(function(w){var k=w.attributes[v].value;_[k]===void 0&&(_[k]=[]),_[k].push(w)}),_}(n,i.openTrigger);if(i.debugMode!==!0||Vo(n,a)!==!1)for(var l in a){var h=a[l];i.targetModal=l,i.triggers=ln(h),Tt=new sr(i)}},show:function(c,i){var n=i||{};n.targetModal=c,n.debugMode===!0&&lr(c)===!1||(Tt&&Tt.removeEventListeners(),(Tt=new sr(n)).showModal())},close:function(c){c?Tt.closeModalById(c):Tt.closeModal()}});typeof window!="undefined"&&(window.MicroModal=He);/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ho(c,i){var n=Object.keys(c);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(c);i&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(c,l).enumerable})),n.push.apply(n,a)}return n}function $e(c){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?Ho(Object(n),!0).forEach(function(a){ic(c,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(n)):Ho(Object(n)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(n,a))})}return c}function fn(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fn=function(i){return typeof i}:fn=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},fn(c)}function ic(c,i,n){return i in c?Object.defineProperty(c,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):c[i]=n,c}function ct(){return ct=Object.assign||function(c){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(c[a]=n[a])}return c},ct.apply(this,arguments)}function nc(c,i){if(c==null)return{};var n={},a=Object.keys(c),l,h;for(h=0;h<a.length;h++)l=a[h],!(i.indexOf(l)>=0)&&(n[l]=c[l]);return n}function rc(c,i){if(c==null)return{};var n=nc(c,i),a,l;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(c);for(l=0;l<h.length;l++)a=h[l],!(i.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(c,a)||(n[a]=c[a]))}return n}var oc="1.15.0";function lt(c){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(c)}var ut=lt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ci=lt(/Edge/i),Zo=lt(/firefox/i),wi=lt(/safari/i)&&!lt(/chrome/i)&&!lt(/android/i),la=lt(/iP(ad|od|hone)/i),ca=lt(/chrome/i)&&lt(/android/i),ua={capture:!1,passive:!1};function ie(c,i,n){c.addEventListener(i,n,!ut&&ua)}function $(c,i,n){c.removeEventListener(i,n,!ut&&ua)}function yn(c,i){if(!!i){if(i[0]===">"&&(i=i.substring(1)),c)try{if(c.matches)return c.matches(i);if(c.msMatchesSelector)return c.msMatchesSelector(i);if(c.webkitMatchesSelector)return c.webkitMatchesSelector(i)}catch{return!1}return!1}}function ac(c){return c.host&&c!==document&&c.host.nodeType?c.host:c.parentNode}function Qe(c,i,n,a){if(c){n=n||document;do{if(i!=null&&(i[0]===">"?c.parentNode===n&&yn(c,i):yn(c,i))||a&&c===n)return c;if(c===n)break}while(c=ac(c))}return null}var Jo=/\s+/g;function Fe(c,i,n){if(c&&i)if(c.classList)c.classList[n?"add":"remove"](i);else{var a=(" "+c.className+" ").replace(Jo," ").replace(" "+i+" "," ");c.className=(a+(n?" "+i:"")).replace(Jo," ")}}function X(c,i,n){var a=c&&c.style;if(a){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(c,""):c.currentStyle&&(n=c.currentStyle),i===void 0?n:n[i];!(i in a)&&i.indexOf("webkit")===-1&&(i="-webkit-"+i),a[i]=n+(typeof n=="string"?"":"px")}}function Qt(c,i){var n="";if(typeof c=="string")n=c;else do{var a=X(c,"transform");a&&a!=="none"&&(n=a+" "+n)}while(!i&&(c=c.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(n)}function da(c,i,n){if(c){var a=c.getElementsByTagName(i),l=0,h=a.length;if(n)for(;l<h;l++)n(a[l],l);return a}return[]}function Ke(){var c=document.scrollingElement;return c||document.documentElement}function me(c,i,n,a,l){if(!(!c.getBoundingClientRect&&c!==window)){var h,g,v,_,w,k,S;if(c!==window&&c.parentNode&&c!==Ke()?(h=c.getBoundingClientRect(),g=h.top,v=h.left,_=h.bottom,w=h.right,k=h.height,S=h.width):(g=0,v=0,_=window.innerHeight,w=window.innerWidth,k=window.innerHeight,S=window.innerWidth),(i||n)&&c!==window&&(l=l||c.parentNode,!ut))do if(l&&l.getBoundingClientRect&&(X(l,"transform")!=="none"||n&&X(l,"position")!=="static")){var C=l.getBoundingClientRect();g-=C.top+parseInt(X(l,"border-top-width")),v-=C.left+parseInt(X(l,"border-left-width")),_=g+h.height,w=v+h.width;break}while(l=l.parentNode);if(a&&c!==window){var M=Qt(l||c),B=M&&M.a,F=M&&M.d;M&&(g/=F,v/=B,S/=B,k/=F,_=g+k,w=v+S)}return{top:g,left:v,bottom:_,right:w,width:S,height:k}}}function Qo(c,i,n){for(var a=wt(c,!0),l=me(c)[i];a;){var h=me(a)[n],g=void 0;if(n==="top"||n==="left"?g=l>=h:g=l<=h,!g)return a;if(a===Ke())break;a=wt(a,!1)}return!1}function Kt(c,i,n,a){for(var l=0,h=0,g=c.children;h<g.length;){if(g[h].style.display!=="none"&&g[h]!==U.ghost&&(a||g[h]!==U.dragged)&&Qe(g[h],n.draggable,c,!1)){if(l===i)return g[h];l++}h++}return null}function xr(c,i){for(var n=c.lastElementChild;n&&(n===U.ghost||X(n,"display")==="none"||i&&!yn(n,i));)n=n.previousElementSibling;return n||null}function qe(c,i){var n=0;if(!c||!c.parentNode)return-1;for(;c=c.previousElementSibling;)c.nodeName.toUpperCase()!=="TEMPLATE"&&c!==U.clone&&(!i||yn(c,i))&&n++;return n}function Ko(c){var i=0,n=0,a=Ke();if(c)do{var l=Qt(c),h=l.a,g=l.d;i+=c.scrollLeft*h,n+=c.scrollTop*g}while(c!==a&&(c=c.parentNode));return[i,n]}function sc(c,i){for(var n in c)if(!!c.hasOwnProperty(n)){for(var a in i)if(i.hasOwnProperty(a)&&i[a]===c[n][a])return Number(n)}return-1}function wt(c,i){if(!c||!c.getBoundingClientRect)return Ke();var n=c,a=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var l=X(n);if(n.clientWidth<n.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Ke();if(a||i)return n;a=!0}}while(n=n.parentNode);return Ke()}function lc(c,i){if(c&&i)for(var n in i)i.hasOwnProperty(n)&&(c[n]=i[n]);return c}function cr(c,i){return Math.round(c.top)===Math.round(i.top)&&Math.round(c.left)===Math.round(i.left)&&Math.round(c.height)===Math.round(i.height)&&Math.round(c.width)===Math.round(i.width)}var xi;function ha(c,i){return function(){if(!xi){var n=arguments,a=this;n.length===1?c.call(a,n[0]):c.apply(a,n),xi=setTimeout(function(){xi=void 0},i)}}}function cc(){clearTimeout(xi),xi=void 0}function fa(c,i,n){c.scrollLeft+=i,c.scrollTop+=n}function pa(c){var i=window.Polymer,n=window.jQuery||window.Zepto;return i&&i.dom?i.dom(c).cloneNode(!0):n?n(c).clone(!0)[0]:c.cloneNode(!0)}var ze="Sortable"+new Date().getTime();function uc(){var c=[],i;return{captureAnimationState:function(){if(c=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(l){if(!(X(l,"display")==="none"||l===U.ghost)){c.push({target:l,rect:me(l)});var h=$e({},c[c.length-1].rect);if(l.thisAnimationDuration){var g=Qt(l,!0);g&&(h.top-=g.f,h.left-=g.e)}l.fromRect=h}})}},addAnimationState:function(a){c.push(a)},removeAnimationState:function(a){c.splice(sc(c,{target:a}),1)},animateAll:function(a){var l=this;if(!this.options.animation){clearTimeout(i),typeof a=="function"&&a();return}var h=!1,g=0;c.forEach(function(v){var _=0,w=v.target,k=w.fromRect,S=me(w),C=w.prevFromRect,M=w.prevToRect,B=v.rect,F=Qt(w,!0);F&&(S.top-=F.f,S.left-=F.e),w.toRect=S,w.thisAnimationDuration&&cr(C,S)&&!cr(k,S)&&(B.top-S.top)/(B.left-S.left)===(k.top-S.top)/(k.left-S.left)&&(_=hc(B,C,M,l.options)),cr(S,k)||(w.prevFromRect=k,w.prevToRect=S,_||(_=l.options.animation),l.animate(w,B,S,_)),_&&(h=!0,g=Math.max(g,_),clearTimeout(w.animationResetTimer),w.animationResetTimer=setTimeout(function(){w.animationTime=0,w.prevFromRect=null,w.fromRect=null,w.prevToRect=null,w.thisAnimationDuration=null},_),w.thisAnimationDuration=_)}),clearTimeout(i),h?i=setTimeout(function(){typeof a=="function"&&a()},g):typeof a=="function"&&a(),c=[]},animate:function(a,l,h,g){if(g){X(a,"transition",""),X(a,"transform","");var v=Qt(this.el),_=v&&v.a,w=v&&v.d,k=(l.left-h.left)/(_||1),S=(l.top-h.top)/(w||1);a.animatingX=!!k,a.animatingY=!!S,X(a,"transform","translate3d("+k+"px,"+S+"px,0)"),this.forRepaintDummy=dc(a),X(a,"transition","transform "+g+"ms"+(this.options.easing?" "+this.options.easing:"")),X(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){X(a,"transition",""),X(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},g)}}}}function dc(c){return c.offsetWidth}function hc(c,i,n,a){return Math.sqrt(Math.pow(i.top-c.top,2)+Math.pow(i.left-c.left,2))/Math.sqrt(Math.pow(i.top-n.top,2)+Math.pow(i.left-n.left,2))*a.animation}var Vt=[],ur={initializeByDefault:!0},Oi={mount:function(i){for(var n in ur)ur.hasOwnProperty(n)&&!(n in i)&&(i[n]=ur[n]);Vt.forEach(function(a){if(a.pluginName===i.pluginName)throw"Sortable: Cannot mount plugin ".concat(i.pluginName," more than once")}),Vt.push(i)},pluginEvent:function(i,n,a){var l=this;this.eventCanceled=!1,a.cancel=function(){l.eventCanceled=!0};var h=i+"Global";Vt.forEach(function(g){!n[g.pluginName]||(n[g.pluginName][h]&&n[g.pluginName][h]($e({sortable:n},a)),n.options[g.pluginName]&&n[g.pluginName][i]&&n[g.pluginName][i]($e({sortable:n},a)))})},initializePlugins:function(i,n,a,l){Vt.forEach(function(v){var _=v.pluginName;if(!(!i.options[_]&&!v.initializeByDefault)){var w=new v(i,n,i.options);w.sortable=i,w.options=i.options,i[_]=w,ct(a,w.defaults)}});for(var h in i.options)if(!!i.options.hasOwnProperty(h)){var g=this.modifyOption(i,h,i.options[h]);typeof g!="undefined"&&(i.options[h]=g)}},getEventProperties:function(i,n){var a={};return Vt.forEach(function(l){typeof l.eventProperties=="function"&&ct(a,l.eventProperties.call(n[l.pluginName],i))}),a},modifyOption:function(i,n,a){var l;return Vt.forEach(function(h){!i[h.pluginName]||h.optionListeners&&typeof h.optionListeners[n]=="function"&&(l=h.optionListeners[n].call(i[h.pluginName],a))}),l}};function fc(c){var i=c.sortable,n=c.rootEl,a=c.name,l=c.targetEl,h=c.cloneEl,g=c.toEl,v=c.fromEl,_=c.oldIndex,w=c.newIndex,k=c.oldDraggableIndex,S=c.newDraggableIndex,C=c.originalEvent,M=c.putSortable,B=c.extraEventProperties;if(i=i||n&&n[ze],!!i){var F,I=i.options,O="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!ut&&!Ci?F=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(F=document.createEvent("Event"),F.initEvent(a,!0,!0)),F.to=g||n,F.from=v||n,F.item=l||n,F.clone=h,F.oldIndex=_,F.newIndex=w,F.oldDraggableIndex=k,F.newDraggableIndex=S,F.originalEvent=C,F.pullMode=M?M.lastPutMode:void 0;var L=$e($e({},B),Oi.getEventProperties(a,i));for(var Y in L)F[Y]=L[Y];n&&n.dispatchEvent(F),I[O]&&I[O].call(i,F)}}var pc=["evt"],Me=function(i,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=a.evt,h=rc(a,pc);Oi.pluginEvent.bind(U)(i,n,$e({dragEl:j,parentEl:pe,ghostEl:Z,rootEl:de,nextEl:jt,lastDownEl:pn,cloneEl:fe,cloneHidden:_t,dragStarted:mi,putSortable:xe,activeSortable:U.active,originalEvent:l,oldIndex:Jt,oldDraggableIndex:ki,newIndex:Re,newDraggableIndex:bt,hideGhostForTarget:ya,unhideGhostForTarget:ba,cloneNowHidden:function(){_t=!0},cloneNowShown:function(){_t=!1},dispatchSortableEvent:function(v){Oe({sortable:n,name:v,originalEvent:l})}},h))};function Oe(c){fc($e({putSortable:xe,cloneEl:fe,targetEl:j,rootEl:de,oldIndex:Jt,oldDraggableIndex:ki,newIndex:Re,newDraggableIndex:bt},c))}var j,pe,Z,de,jt,pn,fe,_t,Jt,Re,ki,bt,cn,xe,Zt=!1,bn=!1,_n=[],Mt,Xe,dr,hr,$o,ea,mi,Ht,Ei,Si=!1,un=!1,vn,Se,fr=[],yr=!1,wn=[],Sn=typeof document!="undefined",dn=la,ta=Ci||ut?"cssFloat":"float",vc=Sn&&!ca&&!la&&"draggable"in document.createElement("div"),va=function(){if(!!Sn){if(ut)return!1;var c=document.createElement("x");return c.style.cssText="pointer-events:auto",c.style.pointerEvents==="auto"}}(),ga=function(i,n){var a=X(i),l=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),h=Kt(i,0,n),g=Kt(i,1,n),v=h&&X(h),_=g&&X(g),w=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+me(h).width,k=_&&parseInt(_.marginLeft)+parseInt(_.marginRight)+me(g).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(h&&v.float&&v.float!=="none"){var S=v.float==="left"?"left":"right";return g&&(_.clear==="both"||_.clear===S)?"vertical":"horizontal"}return h&&(v.display==="block"||v.display==="flex"||v.display==="table"||v.display==="grid"||w>=l&&a[ta]==="none"||g&&a[ta]==="none"&&w+k>l)?"vertical":"horizontal"},gc=function(i,n,a){var l=a?i.left:i.top,h=a?i.right:i.bottom,g=a?i.width:i.height,v=a?n.left:n.top,_=a?n.right:n.bottom,w=a?n.width:n.height;return l===v||h===_||l+g/2===v+w/2},mc=function(i,n){var a;return _n.some(function(l){var h=l[ze].options.emptyInsertThreshold;if(!(!h||xr(l))){var g=me(l),v=i>=g.left-h&&i<=g.right+h,_=n>=g.top-h&&n<=g.bottom+h;if(v&&_)return a=l}}),a},ma=function(i){function n(h,g){return function(v,_,w,k){var S=v.options.group.name&&_.options.group.name&&v.options.group.name===_.options.group.name;if(h==null&&(g||S))return!0;if(h==null||h===!1)return!1;if(g&&h==="clone")return h;if(typeof h=="function")return n(h(v,_,w,k),g)(v,_,w,k);var C=(g?v:_).options.group.name;return h===!0||typeof h=="string"&&h===C||h.join&&h.indexOf(C)>-1}}var a={},l=i.group;(!l||fn(l)!="object")&&(l={name:l}),a.name=l.name,a.checkPull=n(l.pull,!0),a.checkPut=n(l.put),a.revertClone=l.revertClone,i.group=a},ya=function(){!va&&Z&&X(Z,"display","none")},ba=function(){!va&&Z&&X(Z,"display","")};Sn&&!ca&&document.addEventListener("click",function(c){if(bn)return c.preventDefault(),c.stopPropagation&&c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation(),bn=!1,!1},!0);var Dt=function(i){if(j){i=i.touches?i.touches[0]:i;var n=mc(i.clientX,i.clientY);if(n){var a={};for(var l in i)i.hasOwnProperty(l)&&(a[l]=i[l]);a.target=a.rootEl=n,a.preventDefault=void 0,a.stopPropagation=void 0,n[ze]._onDragOver(a)}}},yc=function(i){j&&j.parentNode[ze]._isOutsideThisEl(i.target)};function U(c,i){if(!(c&&c.nodeType&&c.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(c));this.el=c,this.options=i=ct({},i),c[ze]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(c.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ga(c,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(g,v){g.setData("Text",v.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:U.supportPointer!==!1&&"PointerEvent"in window&&!wi,emptyInsertThreshold:5};Oi.initializePlugins(this,c,n);for(var a in n)!(a in i)&&(i[a]=n[a]);ma(i);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=i.forceFallback?!1:vc,this.nativeDraggable&&(this.options.touchStartThreshold=1),i.supportPointer?ie(c,"pointerdown",this._onTapStart):(ie(c,"mousedown",this._onTapStart),ie(c,"touchstart",this._onTapStart)),this.nativeDraggable&&(ie(c,"dragover",this),ie(c,"dragenter",this)),_n.push(this.el),i.store&&i.store.get&&this.sort(i.store.get(this)||[]),ct(this,uc())}U.prototype={constructor:U,_isOutsideThisEl:function(i){!this.el.contains(i)&&i!==this.el&&(Ht=null)},_getDirection:function(i,n){return typeof this.options.direction=="function"?this.options.direction.call(this,i,n,j):this.options.direction},_onTapStart:function(i){if(!!i.cancelable){var n=this,a=this.el,l=this.options,h=l.preventOnFilter,g=i.type,v=i.touches&&i.touches[0]||i.pointerType&&i.pointerType==="touch"&&i,_=(v||i).target,w=i.target.shadowRoot&&(i.path&&i.path[0]||i.composedPath&&i.composedPath()[0])||_,k=l.filter;if(Pc(a),!j&&!(/mousedown|pointerdown/.test(g)&&i.button!==0||l.disabled)&&!w.isContentEditable&&!(!this.nativeDraggable&&wi&&_&&_.tagName.toUpperCase()==="SELECT")&&(_=Qe(_,l.draggable,a,!1),!(_&&_.animated)&&pn!==_)){if(Jt=qe(_),ki=qe(_,l.draggable),typeof k=="function"){if(k.call(this,i,_,this)){Oe({sortable:n,rootEl:w,name:"filter",targetEl:_,toEl:a,fromEl:a}),Me("filter",n,{evt:i}),h&&i.cancelable&&i.preventDefault();return}}else if(k&&(k=k.split(",").some(function(S){if(S=Qe(w,S.trim(),a,!1),S)return Oe({sortable:n,rootEl:S,name:"filter",targetEl:_,fromEl:a,toEl:a}),Me("filter",n,{evt:i}),!0}),k)){h&&i.cancelable&&i.preventDefault();return}l.handle&&!Qe(w,l.handle,a,!1)||this._prepareDragStart(i,v,_)}}},_prepareDragStart:function(i,n,a){var l=this,h=l.el,g=l.options,v=h.ownerDocument,_;if(a&&!j&&a.parentNode===h){var w=me(a);if(de=h,j=a,pe=j.parentNode,jt=j.nextSibling,pn=a,cn=g.group,U.dragged=j,Mt={target:j,clientX:(n||i).clientX,clientY:(n||i).clientY},$o=Mt.clientX-w.left,ea=Mt.clientY-w.top,this._lastX=(n||i).clientX,this._lastY=(n||i).clientY,j.style["will-change"]="all",_=function(){if(Me("delayEnded",l,{evt:i}),U.eventCanceled){l._onDrop();return}l._disableDelayedDragEvents(),!Zo&&l.nativeDraggable&&(j.draggable=!0),l._triggerDragStart(i,n),Oe({sortable:l,name:"choose",originalEvent:i}),Fe(j,g.chosenClass,!0)},g.ignore.split(",").forEach(function(k){da(j,k.trim(),pr)}),ie(v,"dragover",Dt),ie(v,"mousemove",Dt),ie(v,"touchmove",Dt),ie(v,"mouseup",l._onDrop),ie(v,"touchend",l._onDrop),ie(v,"touchcancel",l._onDrop),Zo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,j.draggable=!0),Me("delayStart",this,{evt:i}),g.delay&&(!g.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Ci||ut))){if(U.eventCanceled){this._onDrop();return}ie(v,"mouseup",l._disableDelayedDrag),ie(v,"touchend",l._disableDelayedDrag),ie(v,"touchcancel",l._disableDelayedDrag),ie(v,"mousemove",l._delayedDragTouchMoveHandler),ie(v,"touchmove",l._delayedDragTouchMoveHandler),g.supportPointer&&ie(v,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(_,g.delay)}else _()}},_delayedDragTouchMoveHandler:function(i){var n=i.touches?i.touches[0]:i;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){j&&pr(j),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var i=this.el.ownerDocument;$(i,"mouseup",this._disableDelayedDrag),$(i,"touchend",this._disableDelayedDrag),$(i,"touchcancel",this._disableDelayedDrag),$(i,"mousemove",this._delayedDragTouchMoveHandler),$(i,"touchmove",this._delayedDragTouchMoveHandler),$(i,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(i,n){n=n||i.pointerType=="touch"&&i,!this.nativeDraggable||n?this.options.supportPointer?ie(document,"pointermove",this._onTouchMove):n?ie(document,"touchmove",this._onTouchMove):ie(document,"mousemove",this._onTouchMove):(ie(j,"dragend",this),ie(de,"dragstart",this._onDragStart));try{document.selection?gn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(i,n){if(Zt=!1,de&&j){Me("dragStarted",this,{evt:n}),this.nativeDraggable&&ie(document,"dragover",yc);var a=this.options;!i&&Fe(j,a.dragClass,!1),Fe(j,a.ghostClass,!0),U.active=this,i&&this._appendGhost(),Oe({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Xe){this._lastX=Xe.clientX,this._lastY=Xe.clientY,ya();for(var i=document.elementFromPoint(Xe.clientX,Xe.clientY),n=i;i&&i.shadowRoot&&(i=i.shadowRoot.elementFromPoint(Xe.clientX,Xe.clientY),i!==n);)n=i;if(j.parentNode[ze]._isOutsideThisEl(i),n)do{if(n[ze]){var a=void 0;if(a=n[ze]._onDragOver({clientX:Xe.clientX,clientY:Xe.clientY,target:i,rootEl:n}),a&&!this.options.dragoverBubble)break}i=n}while(n=n.parentNode);ba()}},_onTouchMove:function(i){if(Mt){var n=this.options,a=n.fallbackTolerance,l=n.fallbackOffset,h=i.touches?i.touches[0]:i,g=Z&&Qt(Z,!0),v=Z&&g&&g.a,_=Z&&g&&g.d,w=dn&&Se&&Ko(Se),k=(h.clientX-Mt.clientX+l.x)/(v||1)+(w?w[0]-fr[0]:0)/(v||1),S=(h.clientY-Mt.clientY+l.y)/(_||1)+(w?w[1]-fr[1]:0)/(_||1);if(!U.active&&!Zt){if(a&&Math.max(Math.abs(h.clientX-this._lastX),Math.abs(h.clientY-this._lastY))<a)return;this._onDragStart(i,!0)}if(Z){g?(g.e+=k-(dr||0),g.f+=S-(hr||0)):g={a:1,b:0,c:0,d:1,e:k,f:S};var C="matrix(".concat(g.a,",").concat(g.b,",").concat(g.c,",").concat(g.d,",").concat(g.e,",").concat(g.f,")");X(Z,"webkitTransform",C),X(Z,"mozTransform",C),X(Z,"msTransform",C),X(Z,"transform",C),dr=k,hr=S,Xe=h}i.cancelable&&i.preventDefault()}},_appendGhost:function(){if(!Z){var i=this.options.fallbackOnBody?document.body:de,n=me(j,!0,dn,!0,i),a=this.options;if(dn){for(Se=i;X(Se,"position")==="static"&&X(Se,"transform")==="none"&&Se!==document;)Se=Se.parentNode;Se!==document.body&&Se!==document.documentElement?(Se===document&&(Se=Ke()),n.top+=Se.scrollTop,n.left+=Se.scrollLeft):Se=Ke(),fr=Ko(Se)}Z=j.cloneNode(!0),Fe(Z,a.ghostClass,!1),Fe(Z,a.fallbackClass,!0),Fe(Z,a.dragClass,!0),X(Z,"transition",""),X(Z,"transform",""),X(Z,"box-sizing","border-box"),X(Z,"margin",0),X(Z,"top",n.top),X(Z,"left",n.left),X(Z,"width",n.width),X(Z,"height",n.height),X(Z,"opacity","0.8"),X(Z,"position",dn?"absolute":"fixed"),X(Z,"zIndex","100000"),X(Z,"pointerEvents","none"),U.ghost=Z,i.appendChild(Z),X(Z,"transform-origin",$o/parseInt(Z.style.width)*100+"% "+ea/parseInt(Z.style.height)*100+"%")}},_onDragStart:function(i,n){var a=this,l=i.dataTransfer,h=a.options;if(Me("dragStart",this,{evt:i}),U.eventCanceled){this._onDrop();return}Me("setupClone",this),U.eventCanceled||(fe=pa(j),fe.removeAttribute("id"),fe.draggable=!1,fe.style["will-change"]="",this._hideClone(),Fe(fe,this.options.chosenClass,!1),U.clone=fe),a.cloneId=gn(function(){Me("clone",a),!U.eventCanceled&&(a.options.removeCloneOnHide||de.insertBefore(fe,j),a._hideClone(),Oe({sortable:a,name:"clone"}))}),!n&&Fe(j,h.dragClass,!0),n?(bn=!0,a._loopId=setInterval(a._emulateDragOver,50)):($(document,"mouseup",a._onDrop),$(document,"touchend",a._onDrop),$(document,"touchcancel",a._onDrop),l&&(l.effectAllowed="move",h.setData&&h.setData.call(a,l,j)),ie(document,"drop",a),X(j,"transform","translateZ(0)")),Zt=!0,a._dragStartId=gn(a._dragStarted.bind(a,n,i)),ie(document,"selectstart",a),mi=!0,wi&&X(document.body,"user-select","none")},_onDragOver:function(i){var n=this.el,a=i.target,l,h,g,v=this.options,_=v.group,w=U.active,k=cn===_,S=v.sort,C=xe||w,M,B=this,F=!1;if(yr)return;function I(ht,et){Me(ht,B,$e({evt:i,isOwner:k,axis:M?"vertical":"horizontal",revert:g,dragRect:l,targetRect:h,canSort:S,fromSortable:C,target:a,completed:L,onMove:function($t,Ze){return hn(de,n,j,l,$t,me($t),i,Ze)},changed:Y},et))}function O(){I("dragOverAnimationCapture"),B.captureAnimationState(),B!==C&&C.captureAnimationState()}function L(ht){return I("dragOverCompleted",{insertion:ht}),ht&&(k?w._hideClone():w._showClone(B),B!==C&&(Fe(j,xe?xe.options.ghostClass:w.options.ghostClass,!1),Fe(j,v.ghostClass,!0)),xe!==B&&B!==U.active?xe=B:B===U.active&&xe&&(xe=null),C===B&&(B._ignoreWhileAnimating=a),B.animateAll(function(){I("dragOverAnimationComplete"),B._ignoreWhileAnimating=null}),B!==C&&(C.animateAll(),C._ignoreWhileAnimating=null)),(a===j&&!j.animated||a===n&&!a.animated)&&(Ht=null),!v.dragoverBubble&&!i.rootEl&&a!==document&&(j.parentNode[ze]._isOutsideThisEl(i.target),!ht&&Dt(i)),!v.dragoverBubble&&i.stopPropagation&&i.stopPropagation(),F=!0}function Y(){Re=qe(j),bt=qe(j,v.draggable),Oe({sortable:B,name:"change",toEl:n,newIndex:Re,newDraggableIndex:bt,originalEvent:i})}if(i.preventDefault!==void 0&&i.cancelable&&i.preventDefault(),a=Qe(a,v.draggable,n,!0),I("dragOver"),U.eventCanceled)return F;if(j.contains(i.target)||a.animated&&a.animatingX&&a.animatingY||B._ignoreWhileAnimating===a)return L(!1);if(bn=!1,w&&!v.disabled&&(k?S||(g=pe!==de):xe===this||(this.lastPutMode=cn.checkPull(this,w,j,i))&&_.checkPut(this,w,j,i))){if(M=this._getDirection(i,a)==="vertical",l=me(j),I("dragOverValid"),U.eventCanceled)return F;if(g)return pe=de,O(),this._hideClone(),I("revert"),U.eventCanceled||(jt?de.insertBefore(j,jt):de.appendChild(j)),L(!0);var ne=xr(n,v.draggable);if(!ne||xc(i,M,this)&&!ne.animated){if(ne===j)return L(!1);if(ne&&n===i.target&&(a=ne),a&&(h=me(a)),hn(de,n,j,l,a,h,i,!!a)!==!1)return O(),ne&&ne.nextSibling?n.insertBefore(j,ne.nextSibling):n.appendChild(j),pe=n,Y(),L(!0)}else if(ne&&wc(i,M,this)){var J=Kt(n,0,v,!0);if(J===j)return L(!1);if(a=J,h=me(a),hn(de,n,j,l,a,h,i,!1)!==!1)return O(),n.insertBefore(j,J),pe=n,Y(),L(!0)}else if(a.parentNode===n){h=me(a);var ee=0,ye,G=j.parentNode!==n,ue=!gc(j.animated&&j.toRect||l,a.animated&&a.toRect||h,M),Pe=M?"top":"left",ge=Qo(a,"top","top")||Qo(j,"top","top"),je=ge?ge.scrollTop:void 0;Ht!==a&&(ye=h[Pe],Si=!1,un=!ue&&v.invertSwap||G),ee=kc(i,a,h,M,ue?1:v.swapThreshold,v.invertedSwapThreshold==null?v.swapThreshold:v.invertedSwapThreshold,un,Ht===a);var ke;if(ee!==0){var Ie=qe(j);do Ie-=ee,ke=pe.children[Ie];while(ke&&(X(ke,"display")==="none"||ke===Z))}if(ee===0||ke===a)return L(!1);Ht=a,Ei=ee;var z=a.nextElementSibling,K=!1;K=ee===1;var dt=hn(de,n,j,l,a,h,i,K);if(dt!==!1)return(dt===1||dt===-1)&&(K=dt===1),yr=!0,setTimeout(_c,30),O(),K&&!z?n.appendChild(j):a.parentNode.insertBefore(j,K?z:a),ge&&fa(ge,0,je-ge.scrollTop),pe=j.parentNode,ye!==void 0&&!un&&(vn=Math.abs(ye-me(a)[Pe])),Y(),L(!0)}if(n.contains(j))return L(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){$(document,"mousemove",this._onTouchMove),$(document,"touchmove",this._onTouchMove),$(document,"pointermove",this._onTouchMove),$(document,"dragover",Dt),$(document,"mousemove",Dt),$(document,"touchmove",Dt)},_offUpEvents:function(){var i=this.el.ownerDocument;$(i,"mouseup",this._onDrop),$(i,"touchend",this._onDrop),$(i,"pointerup",this._onDrop),$(i,"touchcancel",this._onDrop),$(document,"selectstart",this)},_onDrop:function(i){var n=this.el,a=this.options;if(Re=qe(j),bt=qe(j,a.draggable),Me("drop",this,{evt:i}),pe=j&&j.parentNode,Re=qe(j),bt=qe(j,a.draggable),U.eventCanceled){this._nulling();return}Zt=!1,un=!1,Si=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),br(this.cloneId),br(this._dragStartId),this.nativeDraggable&&($(document,"drop",this),$(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),wi&&X(document.body,"user-select",""),X(j,"transform",""),i&&(mi&&(i.cancelable&&i.preventDefault(),!a.dropBubble&&i.stopPropagation()),Z&&Z.parentNode&&Z.parentNode.removeChild(Z),(de===pe||xe&&xe.lastPutMode!=="clone")&&fe&&fe.parentNode&&fe.parentNode.removeChild(fe),j&&(this.nativeDraggable&&$(j,"dragend",this),pr(j),j.style["will-change"]="",mi&&!Zt&&Fe(j,xe?xe.options.ghostClass:this.options.ghostClass,!1),Fe(j,this.options.chosenClass,!1),Oe({sortable:this,name:"unchoose",toEl:pe,newIndex:null,newDraggableIndex:null,originalEvent:i}),de!==pe?(Re>=0&&(Oe({rootEl:pe,name:"add",toEl:pe,fromEl:de,originalEvent:i}),Oe({sortable:this,name:"remove",toEl:pe,originalEvent:i}),Oe({rootEl:pe,name:"sort",toEl:pe,fromEl:de,originalEvent:i}),Oe({sortable:this,name:"sort",toEl:pe,originalEvent:i})),xe&&xe.save()):Re!==Jt&&Re>=0&&(Oe({sortable:this,name:"update",toEl:pe,originalEvent:i}),Oe({sortable:this,name:"sort",toEl:pe,originalEvent:i})),U.active&&((Re==null||Re===-1)&&(Re=Jt,bt=ki),Oe({sortable:this,name:"end",toEl:pe,originalEvent:i}),this.save()))),this._nulling()},_nulling:function(){Me("nulling",this),de=j=pe=Z=jt=fe=pn=_t=Mt=Xe=mi=Re=bt=Jt=ki=Ht=Ei=xe=cn=U.dragged=U.ghost=U.clone=U.active=null,wn.forEach(function(i){i.checked=!0}),wn.length=dr=hr=0},handleEvent:function(i){switch(i.type){case"drop":case"dragend":this._onDrop(i);break;case"dragenter":case"dragover":j&&(this._onDragOver(i),bc(i));break;case"selectstart":i.preventDefault();break}},toArray:function(){for(var i=[],n,a=this.el.children,l=0,h=a.length,g=this.options;l<h;l++)n=a[l],Qe(n,g.draggable,this.el,!1)&&i.push(n.getAttribute(g.dataIdAttr)||Sc(n));return i},sort:function(i,n){var a={},l=this.el;this.toArray().forEach(function(h,g){var v=l.children[g];Qe(v,this.options.draggable,l,!1)&&(a[h]=v)},this),n&&this.captureAnimationState(),i.forEach(function(h){a[h]&&(l.removeChild(a[h]),l.appendChild(a[h]))}),n&&this.animateAll()},save:function(){var i=this.options.store;i&&i.set&&i.set(this)},closest:function(i,n){return Qe(i,n||this.options.draggable,this.el,!1)},option:function(i,n){var a=this.options;if(n===void 0)return a[i];var l=Oi.modifyOption(this,i,n);typeof l!="undefined"?a[i]=l:a[i]=n,i==="group"&&ma(a)},destroy:function(){Me("destroy",this);var i=this.el;i[ze]=null,$(i,"mousedown",this._onTapStart),$(i,"touchstart",this._onTapStart),$(i,"pointerdown",this._onTapStart),this.nativeDraggable&&($(i,"dragover",this),$(i,"dragenter",this)),Array.prototype.forEach.call(i.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),_n.splice(_n.indexOf(this.el),1),this.el=i=null},_hideClone:function(){if(!_t){if(Me("hideClone",this),U.eventCanceled)return;X(fe,"display","none"),this.options.removeCloneOnHide&&fe.parentNode&&fe.parentNode.removeChild(fe),_t=!0}},_showClone:function(i){if(i.lastPutMode!=="clone"){this._hideClone();return}if(_t){if(Me("showClone",this),U.eventCanceled)return;j.parentNode==de&&!this.options.group.revertClone?de.insertBefore(fe,j):jt?de.insertBefore(fe,jt):de.appendChild(fe),this.options.group.revertClone&&this.animate(j,fe),X(fe,"display",""),_t=!1}}};function bc(c){c.dataTransfer&&(c.dataTransfer.dropEffect="move"),c.cancelable&&c.preventDefault()}function hn(c,i,n,a,l,h,g,v){var _,w=c[ze],k=w.options.onMove,S;return window.CustomEvent&&!ut&&!Ci?_=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent("move",!0,!0)),_.to=i,_.from=c,_.dragged=n,_.draggedRect=a,_.related=l||i,_.relatedRect=h||me(i),_.willInsertAfter=v,_.originalEvent=g,c.dispatchEvent(_),k&&(S=k.call(w,_,g)),S}function pr(c){c.draggable=!1}function _c(){yr=!1}function wc(c,i,n){var a=me(Kt(n.el,0,n.options,!0)),l=10;return i?c.clientX<a.left-l||c.clientY<a.top&&c.clientX<a.right:c.clientY<a.top-l||c.clientY<a.bottom&&c.clientX<a.left}function xc(c,i,n){var a=me(xr(n.el,n.options.draggable)),l=10;return i?c.clientX>a.right+l||c.clientX<=a.right&&c.clientY>a.bottom&&c.clientX>=a.left:c.clientX>a.right&&c.clientY>a.top||c.clientX<=a.right&&c.clientY>a.bottom+l}function kc(c,i,n,a,l,h,g,v){var _=a?c.clientY:c.clientX,w=a?n.height:n.width,k=a?n.top:n.left,S=a?n.bottom:n.right,C=!1;if(!g){if(v&&vn<w*l){if(!Si&&(Ei===1?_>k+w*h/2:_<S-w*h/2)&&(Si=!0),Si)C=!0;else if(Ei===1?_<k+vn:_>S-vn)return-Ei}else if(_>k+w*(1-l)/2&&_<S-w*(1-l)/2)return Ec(i)}return C=C||g,C&&(_<k+w*h/2||_>S-w*h/2)?_>k+w/2?1:-1:0}function Ec(c){return qe(j)<qe(c)?1:-1}function Sc(c){for(var i=c.tagName+c.className+c.src+c.href+c.textContent,n=i.length,a=0;n--;)a+=i.charCodeAt(n);return a.toString(36)}function Pc(c){wn.length=0;for(var i=c.getElementsByTagName("input"),n=i.length;n--;){var a=i[n];a.checked&&wn.push(a)}}function gn(c){return setTimeout(c,0)}function br(c){return clearTimeout(c)}Sn&&ie(document,"touchmove",function(c){(U.active||Zt)&&c.cancelable&&c.preventDefault()});U.utils={on:ie,off:$,css:X,find:da,is:function(i,n){return!!Qe(i,n,i,!1)},extend:lc,throttle:ha,closest:Qe,toggleClass:Fe,clone:pa,index:qe,nextTick:gn,cancelNextTick:br,detectDirection:ga,getChild:Kt};U.get=function(c){return c[ze]};U.mount=function(){for(var c=arguments.length,i=new Array(c),n=0;n<c;n++)i[n]=arguments[n];i[0].constructor===Array&&(i=i[0]),i.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(U.utils=$e($e({},U.utils),a.utils)),Oi.mount(a)})};U.create=function(c,i){return new U(c,i)};U.version=oc;var ve=[],yi,_r,wr=!1,vr,gr,xn,bi;function Cc(){function c(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this))}return c.prototype={dragStarted:function(n){var a=n.originalEvent;this.sortable.nativeDraggable?ie(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ie(document,"pointermove",this._handleFallbackAutoScroll):a.touches?ie(document,"touchmove",this._handleFallbackAutoScroll):ie(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var a=n.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?$(document,"dragover",this._handleAutoScroll):($(document,"pointermove",this._handleFallbackAutoScroll),$(document,"touchmove",this._handleFallbackAutoScroll),$(document,"mousemove",this._handleFallbackAutoScroll)),ia(),mn(),cc()},nulling:function(){xn=_r=yi=wr=bi=vr=gr=null,ve.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,a){var l=this,h=(n.touches?n.touches[0]:n).clientX,g=(n.touches?n.touches[0]:n).clientY,v=document.elementFromPoint(h,g);if(xn=n,a||this.options.forceAutoScrollFallback||Ci||ut||wi){mr(n,this.options,v,a);var _=wt(v,!0);wr&&(!bi||h!==vr||g!==gr)&&(bi&&ia(),bi=setInterval(function(){var w=wt(document.elementFromPoint(h,g),!0);w!==_&&(_=w,mn()),mr(n,l.options,w,a)},10),vr=h,gr=g)}else{if(!this.options.bubbleScroll||wt(v,!0)===Ke()){mn();return}mr(n,this.options,wt(v,!1),!1)}}},ct(c,{pluginName:"scroll",initializeByDefault:!0})}function mn(){ve.forEach(function(c){clearInterval(c.pid)}),ve=[]}function ia(){clearInterval(bi)}var mr=ha(function(c,i,n,a){if(!!i.scroll){var l=(c.touches?c.touches[0]:c).clientX,h=(c.touches?c.touches[0]:c).clientY,g=i.scrollSensitivity,v=i.scrollSpeed,_=Ke(),w=!1,k;_r!==n&&(_r=n,mn(),yi=i.scroll,k=i.scrollFn,yi===!0&&(yi=wt(n,!0)));var S=0,C=yi;do{var M=C,B=me(M),F=B.top,I=B.bottom,O=B.left,L=B.right,Y=B.width,ne=B.height,J=void 0,ee=void 0,ye=M.scrollWidth,G=M.scrollHeight,ue=X(M),Pe=M.scrollLeft,ge=M.scrollTop;M===_?(J=Y<ye&&(ue.overflowX==="auto"||ue.overflowX==="scroll"||ue.overflowX==="visible"),ee=ne<G&&(ue.overflowY==="auto"||ue.overflowY==="scroll"||ue.overflowY==="visible")):(J=Y<ye&&(ue.overflowX==="auto"||ue.overflowX==="scroll"),ee=ne<G&&(ue.overflowY==="auto"||ue.overflowY==="scroll"));var je=J&&(Math.abs(L-l)<=g&&Pe+Y<ye)-(Math.abs(O-l)<=g&&!!Pe),ke=ee&&(Math.abs(I-h)<=g&&ge+ne<G)-(Math.abs(F-h)<=g&&!!ge);if(!ve[S])for(var Ie=0;Ie<=S;Ie++)ve[Ie]||(ve[Ie]={});(ve[S].vx!=je||ve[S].vy!=ke||ve[S].el!==M)&&(ve[S].el=M,ve[S].vx=je,ve[S].vy=ke,clearInterval(ve[S].pid),(je!=0||ke!=0)&&(w=!0,ve[S].pid=setInterval(function(){a&&this.layer===0&&U.active._onTouchMove(xn);var z=ve[this.layer].vy?ve[this.layer].vy*v:0,K=ve[this.layer].vx?ve[this.layer].vx*v:0;typeof k=="function"&&k.call(U.dragged.parentNode[ze],K,z,c,xn,ve[this.layer].el)!=="continue"||fa(ve[this.layer].el,K,z)}.bind({layer:S}),24))),S++}while(i.bubbleScroll&&C!==_&&(C=wt(C,!1)));wr=w}},30),_a=function(i){var n=i.originalEvent,a=i.putSortable,l=i.dragEl,h=i.activeSortable,g=i.dispatchSortableEvent,v=i.hideGhostForTarget,_=i.unhideGhostForTarget;if(!!n){var w=a||h;v();var k=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,S=document.elementFromPoint(k.clientX,k.clientY);_(),w&&!w.el.contains(S)&&(g("spill"),this.onSpill({dragEl:l,putSortable:a}))}};function kr(){}kr.prototype={startIndex:null,dragStart:function(i){var n=i.oldDraggableIndex;this.startIndex=n},onSpill:function(i){var n=i.dragEl,a=i.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var l=Kt(this.sortable.el,this.startIndex,this.options);l?this.sortable.el.insertBefore(n,l):this.sortable.el.appendChild(n),this.sortable.animateAll(),a&&a.animateAll()},drop:_a};ct(kr,{pluginName:"revertOnSpill"});function Er(){}Er.prototype={onSpill:function(i){var n=i.dragEl,a=i.putSortable,l=a||this.sortable;l.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),l.animateAll()},drop:_a};ct(Er,{pluginName:"removeOnSpill"});U.mount(new Cc);U.mount(Er,kr);var Oc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNy4xLWMwMDAgNzkuYjBmOGJlOSwgMjAyMS8xMi8wOC0xOToxMToyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIzLjIgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMi0wNS0xOFQyMjoxNToyNCswMjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjItMDUtMjZUMTM6MDY6MDErMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjItMDUtMjZUMTM6MDY6MDErMDI6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQxN2NhMTQ4LWQzZWItOTQ0OC05YjM5LTdlNmJkODhkY2JhMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0MTdjYTE0OC1kM2ViLTk0NDgtOWIzOS03ZTZiZDg4ZGNiYTMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MTdjYTE0OC1kM2ViLTk0NDgtOWIzOS03ZTZiZDg4ZGNiYTMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQxN2NhMTQ4LWQzZWItOTQ0OC05YjM5LTdlNmJkODhkY2JhMyIgc3RFdnQ6d2hlbj0iMjAyMi0wNS0xOFQyMjoxNToyNCswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIzLjIgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtgaEpQAAAoLSURBVHic7V1tTFRXGp4a0zSNIU3TNP4wDeKoiDNEQYQsIASxEj8mqI3iDiJRArjRQuq6kmLUBhv1h+KqFZWs2qAiacCYatb6tUGzfiGpCAQngEecGHWCOqiDjlzuuz+8YwZ27jnnfp1za+dNnl8zc87zvs+9c8993/ee+xEAWMJmHhvBm0DYhlpYEJNZWBCTWVgQk1lYEJNZWBCDrKSkxKHqhwAQhs44cuTIDwCA3rx546qqqiobO3bsCNrf6kYiJibmU96BMAP27t37dwBAEGQDAwOdNTU1FTQx0oVEYWHh169fv+44ffr0T7wDwhPbt2//23Axgm1wcLC7oaGhctq0aV8YJsjx48e3BpFA9fX1O3gHhgc2bNiQixMjyJDL5frNEEFu3rz5SwgSqK6ubjvvALFEaWlpdog4hLQHDx5cwY2lmkRzc3M9hgSqqamp4B0oFigoKMgURVEuDkPM4/E0Wa3WkbjxVJE4duzYj0A+ItChQ4c28g6YkVi6dOlfBEHoJsQBAAC8Xm+L3W6PII2pmgzhDAkYOnjw4Pe8A2cEHA5H7Nu3bzsJ/gMAgM/na09KShpNM64mUlevXq0FClF27979He8A6onMzEyr3+93EfwGAAC/3++aNWvWBNqxNZO7fPlyDVCIsnPnzm95B1IPJCcnj/H5fO0EfwEAQBCE7oULF8YpGV8XkufOnasGClG2bt1azDugWhAfH/+F1+ttIfgJAACiKKL8/Px0pXPoRvbMmTM/AYUomzdvzucdWDWw2WyjPB5PE8G/936WlJRkq5lHV9LSTSEikS0vL89lHVAtsFqtIx8+fPhfgl/v/dNy0OlOvra2NvjOXZb02rVrv2EVUK3o6elpJPjz3q9du3aVapnLEAcOHz78A1CIova0ZonOzs7zFL4AACDJb03zGebI/v37y0iOiKKIiouLs1gGWAnu3LnzK8kHyXTL4RnqUGVlZSnJIVEU0YoVKzJYBFgJbty4UUfiLhk6f/58tV7zGu7Ytm3bikmOCYLQnZeXN8NoLrRobGz8mcRZMnTt2rVaPedm4uDGjRvzSA4KgtC9ZMmSJBZ8cDh79uwBElfJkPSXpuv8zBxdv359DsnRgYGBzkWLFk1jxWk4GhoaKkkcJUPSxV53DkwdXrNmjYOUqvb7/a758+fHsuQFABapXIDlFjC3242taWgB86OwqKgoa3BwEJuy9vv9rqysrGhWnA4cOPA9UIrh8XiaJk6c+IlRXJgLAgCWvLy8GaQ6Qn9/f0dmZqbVaC47duz4FijF8Hq9LVOnTv3cSD5cBAEAS05OThKpnuDz+drT0tIijeIgpTgQjkMwl5SUlDFGx4WbIABgyc7OnkKqK7x8+bI1OTlZ90BIqRuEmztgLP9CuQoCAJY5c+bE9Pf3d+AC4vV6W6ZPn/6lXnMWFRVl0dbBBUHoXrx48XRW8eAuCABYZs6caSUVfbxeb0tcXJzm/+/c3NwU0qIiYKIoooKCgkyWseAuRgCpqalfvXjxohUXoN7e3ubY2Fhio4AcFixYEEfblACcMtLchQhGYmLi6OfPn/+Oi5LH42maPHnyKKVjz549O5q2Dg4AqKKiooBHDLiLMBxxcXGf9/b2NuOi9ejRo2tK7gXS0tIiaevgAICk/lwu/nMXIBRsNtuox48f38BFze12XyE1nQG8O+to6+BgggY/7sGXQ3R09CeksimpLdNut0c8ffoUe7YFGTp16tQ/efvNPfA4REVFjbh//34jYFpW7927959Qvx0/fvzHT548wZ5lweNcvHjxX7z9BbMLEkBXV9dFwIgSKvMqJQBpDF2/fr2Ot48BcCdAi46Ojn8DRhTpcwuAsjq4ETUNLfgI4I+zk0Nra+uvdrvdZrFYIkN8fL+tra3NYrFYbDab3HeGWFdX1wWr1TpLV5JajfcRoRSUTd5Ec7vdV5Q8+8cK3AmogVTHVm0ej6fJrM9EciegBpMmTfp0cHBQqQ4A8C4nlpCQoFuiUm9wJ6AG0t+WYvP5fO3p6emRvPnjwJ2AUkg3b0iREvCupjFv3jwbb/4kcCegBPv27fsHqLygS61I3H0ggTsBWkh9wEiRCkFG88ClGcCdAA0cDkcsqY4hCEI34Y4ejOql0hPcCZCQmJg4miJ1jlatWjUHgJgyMVWaJBS4EyCB4qkltGnTpvzA9+12e8SrV69wApoiqysH7gRwoHgcAEkX+iG/o/iLC/k7M4A7ATlI6XCEC+rRo0d/lPs9RZsPKisry+Ht53BwJxAK0g4Q2GBKXerYcaqqqrAPDYmiiJxOZwpvf4PBncBwSEetbBBB4YWZdKb5/X5XRkZGFG+/A+BOIBhOpzOF0MCmqn5x9+7d3zBjUu9DwgLcCQSQkpIyhtSmI5VzFY9ttVpHklZrRj5ioATcCdAGTOuddlpaWiRBcFNUD7mLAfC+5CprXq+3JT4+XnZbPFosW7ZsBhCuT7ybHbiLIRWbZIOk90VX2m9Fdj4gLKeNBlcxJMdlgyMIQrfD4dD98TaKLUC4bZTDTQzSkSqKIlq5cqVhnefS0ll2fgjKj7EEFzGkFn9sMFjcRZN6t4w6Q3FgLkZGRkYUabUj7X9rOJfY2NgIUibZ5/O1JyYmUm3PpweYimG32yMIjc9I2qabGSeaWgvL4hZTQUi1Cl5p8XXr1i0GQjWSVXGLmdOEiyi6dOnSYVZcQoHiWXUmxS0mzhI6RdDt27dP8RBhOGhS/kafxYY7uWfPnv97W0Cwma3OTcoagMHFLUOdk9bxSM4zt9t9Zdy4cabqBKHJq4GBy3LDHCOtXsyU8h4OiqW5YcUtQxxKSEj4Ere+V7L1Ni8sX748HQgrLyOKW4Y4g1ve+v1+19y5c03f0glAlYjU/UzX3Qlcp4gZa9gknDx5slLOn4DpWdzSlTxh2YhWr149j3eA1UDmxTVDfNOruKUbaUIjNNqyZQuXnRH0AsVDpLoUt3QhS+gUMW1TmhJMmTLlM5qWVq3FLc1ECZ0i6MSJEx/M+6hoEpGgsbiliSChERpduHDBFA/j6wma3VVBQ3FLNTHCHa3pu8y1oLq6egNQ7EOsprilmhQm54Pa2trO8A6a0aBIRKoqbulOxiwNZyxAkYiEZ8+e/a7kxlExCVyniMfjaZowYcLHvAPFClardSRpby8AZQepIgK4VEJfX18Ly9qzWUCTiAQFN47UE0spj5BimK2DnDWk122EjE3ABEHozs3NJaaNNB8Fal4N9yEC8++Benp6GlNTU7+iGYdqMrmtVc3+hhzWCFGqRtI7uajHoP5iYWHh18PuyE35SBhv3Lp1qx4AUF9fX4ual9Qo+nLQa6o/mDd3GoGGhobKqKgoVVs/Kd7ArLy8/K8xMTGTnU5nuUFbeP2p7Q+1o9yfwUbwJhC2oRYWxGQWFsRkFhbEZBYWxGQWFsRkFhbEZPY/sFO0fMCITY4AAAAASUVORK5CYII=",Ic="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACPklEQVR4nO2cS5LDIAwF5am5/5U9q0nF+dhgwO4nXu9TBTSSECRZ1nUNw+Hn7gGYLRYCw0JgWAiM37sH0AjxRLK0fFhZCFFGxHZc1XJUhVBlvFItxzXkOoo2kYVcy6EUC7meXSkWAsNCYFjIPXxNW6rH3iXKj75NjVoh3Y7hqkJoPEtvkuOUBcNC+tOUIpWFXFEbLkdZiDofa42yEJULxiqUhaTEQsZwur6pCiE1hS28zUNVSFosBIaFjONUulQUkqV+/LOZj6KQ1FgIjDuv3z+lnl5phpKuat5tIqKvkB5XGWvsL2bK65JnaoRctRhHUlJTWkPS70wKJULUZEhH15EQNRnyKB17p9gcRCHSKacVmpCpZURwvpeVrSE8zSgh8gtzF3tCSLeqUxT0CF4NmZXHhrMQGK1CSLWCNJbTOEJgWMh4qiLXQmBYyHhuezG8m5KJ4wt/JiEl4BtMpywGj8i1EBgWAkNFCL4Y90JFyDQoCZkiSpSEROSUspmTYh9SK4Xce7zNRVFILVJRpZay0mMhMLKnrJG/QRlC5gj5VszJRT6tkKNFx0rJKkQWC4FhITBahWBzsSqOEBgWAmNPCLqByoojBIaFwLAQGBYCw0JgWAgMC4HR44Hq9frk6v7l7PUN8m+gRrwY+n6rAacsGBYCw0JgWAiMmYXgTlgRx0KQg+4Adl4lEYId/AmWgM+ntA85mgSp90Av+BG9GkPpRSAxc1FHYiEwLASGhcCwEBgWAsNCYFgIDAuBYSEw/gA/aTLvItMlWwAAAABJRU5ErkJggg==";class Be{static init(i,n){var g,v,_,w,k;this._window=document.querySelector(i),this._sketch=n;const a=(g=this._window)==null?void 0:g.querySelector("#newLayer-js"),l=(v=this._window)==null?void 0:v.querySelector("#deleteLayer-js"),h=(_=this._window)==null?void 0:_.querySelector("#mergeLayer-js");this._layers=((w=this._window)==null?void 0:w.querySelector("ul"))||null,this._layers&&(this._sortable=U.create(this._layers,{animation:100,dataIdAttr:"data-id",onEnd:this._moveLayer.bind(this)})),(k=this._layers)==null||k.addEventListener("click",this._layerClick.bind(this)),a==null||a.addEventListener("click",()=>this._addLayer()),l==null||l.addEventListener("click",this._removeLayer.bind(this)),h==null||h.addEventListener("click",this._mergeLayer.bind(this))}static updateLayers(){var a,l,h,g;this._layers&&(this._layers.innerHTML="");const i=this._sketch.animation.currentFrame;if(i)for(const v of i.layers){const _=this._newLayer(v.id,v.drawing.actif);(a=this._layers)==null||a.appendChild(_)}const n=(l=this._sketch.animation.currentFrame)==null?void 0:l.layerIndex;(g=(h=this._layers)==null?void 0:h.querySelector(`[data-id="${n}"`))==null||g.classList.add("selected")}static _addLayer(){var g,v,_,w,k;const i=(g=this._layers)==null?void 0:g.querySelector(".selected"),n=this.newId(),a=this._newLayer(n,!0);a.classList.add("selected"),i==null||i.classList.remove("selected"),i?(v=this._layers)==null||v.insertBefore(a,i):(_=this._layers)==null||_.appendChild(a);const h=Array.from(((w=this._layers)==null?void 0:w.querySelectorAll("li"))||[]).indexOf(a);(k=this._sketch.animation.currentFrame)==null||k.newLayer(n,h),this._updateSelectedLayer(),this._sketch.updatePreview()}static _newLayer(i,n){var v;const a=document.createElement("li"),l=i;a.classList.add("layers_item"),a.setAttribute("data-id",l.toString());const h=(v=Pi("Layer"))!=null?v:"Layer";a.textContent=h+" "+l;const g=document.createElement("input");return g.setAttribute("type","checkbox"),g.checked=n,g.setAttribute("name","visible"),g.classList.add("layers_checkbox"),g.addEventListener("change",this._checkBoxChange.bind(this)),a.insertAdjacentElement("afterbegin",g),a}static _removeLayer(){var h,g,v,_,w;const i=(h=this._layers)==null?void 0:h.querySelectorAll("li");if(!i||i.length<=1)return;const n=(g=this._layers)==null?void 0:g.querySelector(".selected"),a=n==null?void 0:n.nextElementSibling;n==null||n.remove(),console.log(a),a?a==null||a.classList.add("selected"):(_=(v=this._layers)==null?void 0:v.lastElementChild)==null||_.classList.add("selected");const l=Number(n==null?void 0:n.getAttribute("data-id"));l&&((w=this._sketch.animation.currentFrame)==null||w.removeLayer(l)),this._updateSelectedLayer(),this._sketch.updatePreview()}static _mergeLayer(){var h,g;const i=(h=this._layers)==null?void 0:h.querySelector(".selected"),n=Number(i==null?void 0:i.getAttribute("data-id")),a=i==null?void 0:i.nextSibling,l=Number(a==null?void 0:a.getAttribute("data-id"));n&&l&&i&&a&&((g=this._sketch.animation.currentFrame)==null||g.mergeLayer(n,l),i.remove(),a.classList.add("selected"))}static _updateSelectedLayer(){var n,a;const i=(n=this._layers)==null?void 0:n.querySelector(".selected");if(i){const l=Number(i==null?void 0:i.getAttribute("data-id"));l&&((a=this._sketch.animation.currentFrame)==null||a.selectLayer(l))}}static _moveLayer(i){var n,a;(a=this._sketch.animation.currentFrame)==null||a.sortLayers(((n=this._sortable)==null?void 0:n.toArray().map(Number))||[]),this._sketch.updatePreview()}static _layerClick(i){var a,l;const n=i.target;n.nodeName==="LI"&&((l=(a=this._window)==null?void 0:a.querySelector(".selected"))==null||l.classList.remove("selected"),n.classList.add("selected")),this._updateSelectedLayer()}static _checkBoxChange(i){var g;const n=i.target,a=n.closest("li"),l=Number(a==null?void 0:a.getAttribute("data-id")),h=n.checked;l&&((g=this._sketch.animation.currentFrame)==null||g.setLayerVisible(l,h))}static newId(){var a;const i=Array.from(((a=this._layers)==null?void 0:a.querySelectorAll("li"))||[]),n=Math.max(...i.map(l=>Number(l.getAttribute("data-id"))));return n>0?n+1:1}}D(Be,"_sketch"),D(Be,"_window"),D(Be,"_layers"),D(Be,"_sortable",null);class Lt{static init(i,n){this._element=document.querySelector(i),this._frameList=this._element.querySelector("#frameList-js"),this._sketch=n;const a=this._element.querySelector("#newFrame-js");a==null||a.addEventListener("click",this._addFrame.bind(this)),U.create(this._frameList,{onStart:this._onSortStart.bind(this),onSort:this._onSort.bind(this)}),this._addFrame(),this._sketch.addEventListener("update",this._onSketchChange.bind(this))}static _handleClick(i){if(this._sketch.playing){He.show("inactifClick-modal");return}const n=i.target,a=n==null?void 0:n.closest(".anim_frame"),l=n==null?void 0:n.closest(".anim_delete");(n==null?void 0:n.closest(".anim_duplicate"))!==null?this._duplicateFrame(a):l!==null?(this._removeFrame(a),Be.updateLayers()):(this._selectFrame(a),Be.updateLayers())}static _onSortStart(i){this._sketch.playing&&(He.show("inactifClick-modal"),i.preventDefault)}static _onSort(i){const a=Array.from(this._frameList.querySelectorAll(".anim_frame:not(.anim_frame-new)")).map(h=>Number(h.getAttribute("data-id"))),l=i.item;if(this._sketch.animation.sortFrames(a),this._sketch.playing){He.show("inactifClick-modal");return}this._selectFrame(l),Be.updateLayers()}static _addFrame(){if(this._sketch.playing){He.show("inactifClick-modal");return}const i=this.newId(),n=this._createEl(i);this._frameList.appendChild(n),this._frameList.scrollTo(this._frameList.scrollWidth,0),this._sketch.animation.newFrame(i),this._selectFrame(n),Be.updateLayers()}static _removeFrame(i){if(this._sketch.playing){He.show("inactifClick-modal");return}const n=this._frameList.querySelectorAll(".anim_frame");if((n==null?void 0:n.length)>2){if(i.classList.contains("selected")){const h=Array.from(this._frameList.querySelectorAll(".anim_frame:not(.anim_frame-new)")),g=h.indexOf(i);if(g>=1){const v=h[g-1];this._selectFrame(v)}else{const v=h[1];this._selectFrame(v)}}const l=Number(i.getAttribute("data-id"));this._sketch.animation.removeFrame(l),i.remove()}}static _selectFrame(i){const n=this._frameList.querySelector(".selected");n==null||n.classList.remove("selected"),i.classList.add("selected");const a=Number(i.getAttribute("data-id"));this._sketch.animation.selectFrame(a),this._sketch.updatePreview()}static _duplicateFrame(i){const n=Number(i.getAttribute("data-id")),a=this.newId(),l=this._createEl(a);this._sketch.animation.duplicate(n,a);const h=this._sketch.animation.frames.find(g=>g.id===a);l.style.backgroundImage=`url(${h.preview.toDataURL()})`,this._frameList.appendChild(l),this._frameList.scrollTo(this._frameList.scrollWidth,0),this._selectFrame(l),Be.updateLayers()}static _createEl(i){const n=document.createElement("li");n.classList.add("anim_frame"),n.setAttribute("data-id",i.toString());const a=document.createElement("button");a.classList.add("anim_delete"),a.setAttribute("tooltip-text","remove frame"),a.setAttribute("tooltip-right","true");const l=document.createElement("img");l.src=Oc,l.setAttribute("alt","remove frame"),a.appendChild(l),n.appendChild(a);const h=document.createElement("button");h.classList.add("anim_duplicate"),h.setAttribute("tooltip-text","duplicate frame"),h.setAttribute("tooltip-right","true");const g=document.createElement("img");return g.src=Ic,g.setAttribute("alt","duplicate frame"),h.appendChild(g),n.appendChild(h),n.addEventListener("click",this._handleClick.bind(this)),n}static newId(){const i=Array.from(this._frameList.querySelectorAll(".anim_frame")||[]),n=Math.max(...i.map(a=>Number(a.getAttribute("data-id"))));return n>0?n+1:1}static _onSketchChange(){Array.from(this._frameList.querySelectorAll(".anim_frame:not(.anim_frame-new)")).forEach(n=>{const a=Number(n.getAttribute("data-id")),l=this._sketch.animation.frames.find(h=>h.id===a);n.style.backgroundImage=`url(${l.preview.toDataURL()})`})}static updateFrames(){Array.from(this._frameList.querySelectorAll(".anim_frame:not(.anim_frame-new)")).forEach(h=>h.remove()),this._sketch.animation.frames.forEach(h=>{const g=this._createEl(h.id);g.style.backgroundImage=`url(${h.preview.toDataURL()})`,this._frameList.appendChild(g)});const a=this._sketch.animation.frameIndex,l=this._frameList.querySelector(`[data-id="${a}"]`);l==null||l.classList.add("selected")}}D(Lt,"_sketch"),D(Lt,"_element"),D(Lt,"_frameList");class Ve{static init(i,n){var l;this._sketch=n;const a=document.querySelector(i);this._form=a.querySelector("form"),this._fileNameInput=this._form.querySelector("#fileName-download"),this._formatInput=this._form.querySelector("#format-download"),this._scaleInput=this._form.querySelector("#scale-download"),this._spriteSheetField=this._form.querySelector(".downloadForm_spritesheet"),this._scaleFieldset=this._form.querySelector(".scale"),this._rowsInput=this._form.querySelector("#rows-download"),this._columnsInput=this._form.querySelector("#columns-download"),(l=this._form)==null||l.addEventListener("submit",this._handleSubmit.bind(this)),this._formatInput.addEventListener("change",this.updateContent.bind(this)),this._rowsInput.addEventListener("change",this._updateSpriteSheetValues.bind(this)),this._columnsInput.addEventListener("change",this._updateSpriteSheetValues.bind(this))}static _handleSubmit(i){i.preventDefault();const n=this._fileNameInput.value,a=this._formatInput.value,l=this._scaleInput.valueAsNumber,h=this._rowsInput.valueAsNumber,g=this._columnsInput.valueAsNumber;this._sketch.download(n,a,l,g,h),He.close("download-modal")}static updateContent(){this._isSpriteSheet()?(this._setSpriSheetInitValues(),this._spriteSheetField.style.setProperty("display","flex")):(this._setSpriSheetInitValues(),this._spriteSheetField.style.setProperty("display","none")),this._scaleFieldset.style.setProperty("display",this._formatInput.value==="json"?"none":"block")}static _isSpriteSheet(){return this._sketch.animation.frames.length>1&&this._formatInput.value==="png"}static _setSpriSheetInitValues(){const i=this._sketch.animation.frames.length,n=this._biggestDisvisor(i);this._rowsInput.value=n.toString(),this._rowsInput.setAttribute("max",i.toString()),this._columnsInput.value=(i/n).toString(),this._columnsInput.setAttribute("max",i.toString())}static _updateSpriteSheetValues(i){const n=i.target,a=n.valueAsNumber,l=this._sketch.animation.frames.length,h=Math.ceil(l/a);n===this._columnsInput?this._rowsInput.valueAsNumber=h:this._columnsInput.valueAsNumber=h}static _biggestDisvisor(i){for(let n=Math.floor(i/2);n>0;n--)if(i%n===0)return n;return 1}}D(Ve,"_form"),D(Ve,"_sketch"),D(Ve,"_fileNameInput"),D(Ve,"_formatInput"),D(Ve,"_scaleInput"),D(Ve,"_spriteSheetField"),D(Ve,"_scaleFieldset"),D(Ve,"_rowsInput"),D(Ve,"_columnsInput");class kn{static init(i,n){this._sketch=n,this._inputEl=document.querySelector(i),this._inputEl.addEventListener("change",this._loadFile.bind(this))}static _loadFile(){var n;const i=(n=this._inputEl)==null?void 0:n.files;if(FileReader&&i&&i.length){const a=i[0].type,l=new FileReader;/json/.test(a)?(l.readAsText(i[0]),l.addEventListener("load",this._loadJson.bind(this))):/png/.test(a)&&(l.readAsDataURL(i[0]),l.onload=h=>Ac(l.result))}this._inputEl.value=""}static _loadJson(i){var a;const n=(a=i.target)==null?void 0:a.result;this._sketch.loadJson(n)}static open(){this._inputEl.click()}}D(kn,"_inputEl"),D(kn,"_sketch");function Ac(c){const i=document.createElement("img");i.src=c,console.log(i)}class En{static init(i,n){this._form=document.querySelector(i),this._sketch=n,this._form.addEventListener("submit",this._onSubmit.bind(this))}static _onSubmit(i){var _,w,k;i.preventDefault();const n=(_=this._form.querySelector("#width-js"))==null?void 0:_.valueAsNumber,a=(w=this._form.querySelector("#height-js"))==null?void 0:w.valueAsNumber,l=(k=this._form.querySelector("#align-js input:checked"))==null?void 0:k.value;if(!l)throw new Error("align is undefined");const h=JSON.parse(l),[g,v]=h;if(!n||!a)throw new Error("width or height is undefined");this._sketch.resize(n,a,g,v),He.close("resize-modal")}static update(){const i=this._form.querySelector("#width-js"),n=this._form.querySelector("#height-js");i&&(i.value=this._sketch.width.toString()),n&&(n.value=this._sketch.height.toString())}}D(En,"_form"),D(En,"_sketch");class Tc{static init(i,n){document.querySelectorAll(i).forEach(l=>{l.addEventListener("click",h=>{switch(l.id){case"fit":n.camera.fitSketch();break;case"clear":n.clear();break;case"resize":He.show("resize-modal"),En.update();break;case"undo":n.undo(),Lt.updateFrames(),Be.updateLayers();break;case"redo":n.redo(),Lt.updateFrames(),Be.updateLayers();break;case"download":He.show("download-modal"),Ve.updateContent();break;case"open":kn.open();break}})})}}class Mc{static init(i,n){const a=document.querySelector(i),l=document.querySelector("color-picker");a==null||a.addEventListener("click",h=>{l==null||l.open()}),l==null||l.addEventListener("color-change",h=>{n.color=h.detail,a&&(a.style.backgroundColor=h.detail)})}}class Dc{static init(){document.querySelectorAll("[translate]").forEach(n=>{const a=n.getAttribute("translate");if(a){const l=Pi(a);l&&(n.textContent=l)}})}}class _i{static init(i){this._playBtn=document.getElementById("play"),this._onionBtn=document.getElementById("oignon"),this._fpsInput=document.getElementById("fps"),this._playBtn.addEventListener("click",this._handleClickPlay.bind(this)),this._fpsInput.addEventListener("change",this._handleChangeFps.bind(this)),this._onionBtn.addEventListener("change",this._handleChangeOnion.bind(this)),this._sketch=i}static _handleClickPlay(i){i.target.checked?this._sketch.play():this._sketch.stop()}static _handleChangeFps(i){const n=i.target,a=n.value,l=Math.floor(Math.min(24,Math.max(1,Number(a))));n.value=l.toString(),this._sketch.fps=l}static _handleChangeOnion(){this._sketch.onion=this._onionBtn.checked,this._sketch.updatePreview()}}D(_i,"_sketch"),D(_i,"_playBtn"),D(_i,"_onionBtn"),D(_i,"_fpsInput");customElements.define("sketch-app",Zl);const De=document.querySelector("sketch-app");Jl.init("#tools-js input[type=radio]",De);Ql.init("#size-js",De);Tc.init(".actions_btn",De);Mc.init("#colorBtn-js",De);Be.init("#layers-js",De);Lt.init("#anim-js",De);_i.init(De);En.init("#resizeForm-js",De);Ve.init("#download-modal",De);sa.init();Dc.init();kn.init("#file-selector",De);sa.init();De.addEventListener("inactif-click",()=>He.show("inactifClick-modal"));De.addEventListener("load",c=>Lt.updateFrames());De.addEventListener("load",c=>Be.updateLayers());window.onload=()=>{De.camera.fitSketch()};window.addEventListener("beforeunload",function(c){const i="If you leave before saving, your changes will be lost.";return c.returnValue=Pi(i)||i,Pi(i)||i});
